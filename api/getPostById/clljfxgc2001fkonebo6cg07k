{"type":"getPostById","data":{"title":"Forking Hexo plugin 'hexo-index-anything'","date":"2021-04-25T11:41:46.000Z","description":"<p>As I started with this blog 2 years ago, I wanted to document the customization of Hexo to my needs in a series of articles. To group these articles I considered using the build-in <code>categories</code>, but I already used them to group articles by the underlying tech stack or area, like ´JavaScript´, ´C#´ or ´Tools´ and I didn’t want to mix it, as the category was also used in the Url of a post.</p>\n<p>I was researching another grouping solution for Hexo and stumbled upon <a href=\"https://github.com/leviwheatcroft/hexo-index-anything\">hexo-index-anything</a>, a very clever Hexo plugin to generate index pages for almost every <a href=\"https://hexo.io/docs/front-matter.html\">FrontMatter</a> variable in a post.</p>\n<p>As it was freely available under a MIT license on Github, I forked it in July 2020 and made some bug fixes and drop a pull request to Levi … but he  unfortunately never answered my pull or issue requests and has set the status of the project to DEPRECATED.</p>\n<p>Ok then … make a successor on your own, fella…</p>","categories":[{"name":"JavaScript","_id":"clljfxgf5003bkonecf8fgrnp"}],"tags":[{"name":"Hexo","_id":"clljfxgez0034kone6arwc74s"},{"name":"GitHub","_id":"clljfxgf30038konef1d69yuo"},{"name":"Plugin","_id":"clljfxggi005xkone9j1kglbz"}],"content":"<p>As I started with this blog 2 years ago, I wanted to document the customization of Hexo to my needs in a series of articles. To group these articles I considered using the build-in <code>categories</code>, but I already used them to group articles by the underlying tech stack or area, like ´JavaScript´, ´C#´ or ´Tools´ and I didn’t want to mix it, as the category was also used in the Url of a post.</p>\n<p>I was researching another grouping solution for Hexo and stumbled upon <a href=\"https://github.com/leviwheatcroft/hexo-index-anything\">hexo-index-anything</a>, a very clever Hexo plugin to generate index pages for almost every <a href=\"https://hexo.io/docs/front-matter.html\">FrontMatter</a> variable in a post.</p>\n<p>As it was freely available under a MIT license on Github, I forked it in July 2020 and made some bug fixes and drop a pull request to Levi … but he  unfortunately never answered my pull or issue requests and has set the status of the project to DEPRECATED.</p>\n<p>Ok then … make a successor on your own, fella…</p>\n<span id=\"more\"></span>\n\n<h2 id=\"Basic-Functionality\"><a href=\"#Basic-Functionality\" class=\"headerlink\" title=\"Basic Functionality\"></a>Basic Functionality</h2><p>Let me describe how the original plugin and my successor are working in general:</p>\n<p>Assume, you have several posts from different authors and you want a list of all posts for every author. The only thing you have to do (after installation and configuration of the plugin), is to add a custom variable called <code>author</code> to the FrontMatter of each post, with the name of the author as value.</p>\n<figure class=\"highlight yml\"><figcaption><span>/source/_posts/my-fancy-post.md</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">title:</span> <span class=\"string\">My</span> <span class=\"string\">Fancy</span> <span class=\"string\">Post</span></span><br><span class=\"line\"><span class=\"attr\">date:</span> <span class=\"number\">2021-04-25 13:41:46</span></span><br><span class=\"line\"><span class=\"attr\">author:</span> <span class=\"string\">Kristof</span></span><br><span class=\"line\"><span class=\"string\">...</span></span><br></pre></td></tr></table></figure>\n\n<p>Next time you run <code>hexo generate</code>, several new files will be available in your output folder:</p>\n<p><strong>One INDEX page</strong></p>\n<p>… for the <strong>author index</strong>, with a list of all available authors and the number of the posts:</p>\n<ul>\n<li>&#x2F;authors&#x2F;index.html</li>\n</ul>\n<p><strong>Many POSTS pages</strong></p>\n<p>…, one for each author for the <strong>author index</strong>, with all of the authors posts:</p>\n<ul>\n<li>&#x2F;authors&#x2F;kristof&#x2F;index.html</li>\n<li>&#x2F;authors&#x2F; … &#x2F;index.html</li>\n</ul>\n<h2 id=\"New-Plugin-Name\"><a href=\"#New-Plugin-Name\" class=\"headerlink\" title=\"New Plugin Name\"></a>New Plugin Name</h2><p>In order to avoid confusion (and be able to provide the plugin on Github&#x2F;NPM) I needed a new name for the plugin and due to the fact that it is a generator, I named it simply <strong>hexo-generator-anything</strong>.</p>\n<h2 id=\"New-Features\"><a href=\"#New-Features\" class=\"headerlink\" title=\"New Features\"></a>New Features</h2><p>The original code was really hard to read, because every second variable was named ‘index’, therefore I started with some refactorings, before I continued implementing new features.</p>\n<h3 id=\"Configuration\"><a href=\"#Configuration\" class=\"headerlink\" title=\"Configuration\"></a>Configuration</h3><p>The original, one-dimensional variable to index mapping, wasn’t meaningful enough for me. The new mapping is now a dictionary and has unique identifiers:</p>\n<figure class=\"highlight yml\"><figcaption><span>/_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">anything:</span></span><br><span class=\"line\">  <span class=\"attr\">layout_index:</span> <span class=\"string\">anything-index</span></span><br><span class=\"line\">  <span class=\"attr\">layout_posts:</span> <span class=\"string\">anything-posts</span></span><br><span class=\"line\">  <span class=\"attr\">index_mappings:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">variable:</span> <span class=\"string\">author</span></span><br><span class=\"line\">      <span class=\"attr\">path:</span> <span class=\"string\">authors</span></span><br></pre></td></tr></table></figure>\n\n<p>The <code>template*</code> setting names has changed into <code>layout_*</code>, to make more clear what they are meant for. They are pointing to an existing EJS file in your Hexo themes layout folder to render the particular page.</p>\n<ul>\n<li><p><code>layout_index</code><br>EJS file (without extension) to render the INDEX page</p>\n</li>\n<li><p><code>layout_Posts</code><br>EJS file (without extension) to render each POSTS page</p>\n</li>\n</ul>\n<p>On <a href=\"https://github.com/kristofzerbe/hexo-generator-anything\">Github</a> and in the <a href=\"https://www.npmjs.com/package/hexo-generator-anything\">NPM package</a> you will find sample EJS files and some partials, to take the SoC pattern into account.</p>\n<p>The original <code>titleSeparator</code> setting is not longer available, because it is not necessary anymore. By providing a data structure for <code>index</code> with the attributes <code>name</code> and <code>caption</code>, a title can be put together in the EJS file itself.</p>\n<h3 id=\"Introducing-linked-Markdown-files\"><a href=\"#Introducing-linked-Markdown-files\" class=\"headerlink\" title=\"Introducing linked Markdown files\"></a>Introducing linked Markdown files</h3><p>One of my needs was, to provide more information on the INDEX page and the POSTS pages for each entry or, to stay with the example, for each author. As the <code>_posts</code> folder is used for storing the post data files, I introduced a <strong><code>_anything</code></strong> folder for dropping MD files, which are linked to the index and its values.</p>\n<p><img src=\"/post/Forking-Hexo-plugin-hexo-index-anything/anything-folder.png\" alt=\"Anything folder\"></p>\n<p>The subfolders of <strong><code>_anything</code></strong> are representing the index and the files in it each possible value of the index.</p>\n<p>The file is structured like any other post file: the FrontMatter data at the top and below some content to show along with the the entry to describe it:</p>\n<figure class=\"highlight yml\"><figcaption><span>/source/_anything/authors/kristof.md</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">title:</span> <span class=\"string\">Kristof</span></span><br><span class=\"line\"><span class=\"attr\">github:</span> <span class=\"string\">https://github.com/kristofzerbe</span></span><br><span class=\"line\"><span class=\"attr\">avatar:</span> <span class=\"string\">kristof.png</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"meta\"></span></span><br><span class=\"line\"><span class=\"string\">...</span> <span class=\"string\">some</span> <span class=\"string\">smart</span> <span class=\"string\">things</span> <span class=\"string\">to</span> <span class=\"string\">say</span> <span class=\"string\">about</span> <span class=\"string\">Kristof,</span> <span class=\"string\">or</span> <span class=\"string\">links</span> <span class=\"string\">or</span> <span class=\"string\">images,</span> <span class=\"string\">whatever</span> <span class=\"string\">...</span></span><br></pre></td></tr></table></figure>\n\n<p>The INDEX file itself may have its own Markdown file, to provide addition text or data to it, like describing the list.</p>\n<p>The variable <code>title</code> is a requirement in the Markdown files, but you can add as many variables as you need and use it in the EJS files. All data will be passed through to the template.</p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>The new plugin runs very well and it is heavy in use on generating the sections <a href=\"https://kiko.io/series\">Series</a> and <a href=\"https://kiko.io/projects\">Projects</a> of this blog. Give it a try …</p>\n","_path":"post/Forking-Hexo-plugin-hexo-index-anything/","_link":"https://kiko.io/post/Forking-Hexo-plugin-hexo-index-anything/","_id":"clljfxgc2001fkonebo6cg07k"}}