{"type":"getPostById","data":{"title":"Visualize the codebase of your GitHub repo","date":"2021-08-21T05:55:00.000Z","description":"<p>Beginning of the month, <a href=\"https://twitter.com/Wattenberger\">Amelia Wattenberger</a> of <a href=\"https://next.github.com/\">GitHub Next</a> has published a project to create a SVG visualization of a GitHub repository’s codebase.</p>\n<p>On the project page <strong><a href=\"https://next.github.com/projects/repo-visualization\">Visualizing a codebase</a></strong>, she talks about the advantages of code vizualization in terms of a better overview and comparability of code …  and I loved it at first sight, because I’m an absolute visual person.</p>\n<p><img src=\"/post/Visualize-the-codebase-of-your-GitHub-repo/screenshot-repo-visualization.png\" alt=\"Screenshot from the project page\"></p>\n<p>But her attempt was not only to show us what’s possible (static SVG files and even interactive apps for code browsing, filtering and comparing), but give us the possibility to create our own codebase diagrams as SVG automatically, whenever we commit our code, by running a <a href=\"https://docs.github.com/en/actions\">GitHub Action</a>, she and her team has developed … the <a href=\"https://github.com/githubocto/repo-visualizer\"><strong>Repo Vizualizer</strong></a></p>","categories":[{"name":"Tools","_id":"cljdzt2wn0035ixq55oqa0kds"}],"tags":[{"name":"GitHub","_id":"cljdzt2wp003aixq59p1s4grm"},{"name":"Windows","_id":"cljdzt2xi005hixq5f0wv5w1d"},{"name":"Imaging","_id":"cljdzt2y7007dixq5c04zfvow"}],"content":"<p>Beginning of the month, <a href=\"https://twitter.com/Wattenberger\">Amelia Wattenberger</a> of <a href=\"https://next.github.com/\">GitHub Next</a> has published a project to create a SVG visualization of a GitHub repository’s codebase.</p>\n<p>On the project page <strong><a href=\"https://next.github.com/projects/repo-visualization\">Visualizing a codebase</a></strong>, she talks about the advantages of code vizualization in terms of a better overview and comparability of code …  and I loved it at first sight, because I’m an absolute visual person.</p>\n<p><img src=\"/post/Visualize-the-codebase-of-your-GitHub-repo/screenshot-repo-visualization.png\" alt=\"Screenshot from the project page\"></p>\n<p>But her attempt was not only to show us what’s possible (static SVG files and even interactive apps for code browsing, filtering and comparing), but give us the possibility to create our own codebase diagrams as SVG automatically, whenever we commit our code, by running a <a href=\"https://docs.github.com/en/actions\">GitHub Action</a>, she and her team has developed … the <a href=\"https://github.com/githubocto/repo-visualizer\"><strong>Repo Vizualizer</strong></a></p>\n<span id=\"more\"></span>\n\n<p>Actually, her instructions are quite simple to implement, but the devil is in the details and I would like to show you what you may need for this. The goal is to prepare every project hosted on GitHub with instructions to run the Repo Visualizer after every commit to create or update a SVG file in the project, we can use in the README or via hotlinking in every other web page.</p>\n<p>Let’s start with my setup:</p>\n<ul>\n<li>Windows 10</li>\n<li>Visual Studio Code</li>\n<li>a bunch of tiny projects hosted on GitHub</li>\n</ul>\n<hr>\n<h2 id=\"Project-Integration\"><a href=\"#Project-Integration\" class=\"headerlink\" title=\"Project Integration\"></a>Project Integration</h2><p>GitHub actions are configured via YAML files in the folder <code>.github\\workflows</code>. Therefore, just take Amelias demo file <code>diagram.yaml</code> and copy it to this folder.</p>\n<figure class=\"highlight yaml\"><figcaption><span>.github\\workflows\\diagram.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">Create</span> <span class=\"string\">Vizualizing</span> <span class=\"string\">Codebase</span> <span class=\"string\">Diagram</span></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">workflow_dispatch:</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">main</span></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">get_data:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Checkout</span> <span class=\"string\">code</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@master</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Update</span> <span class=\"string\">diagram</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">githubocto/repo-visualizer@main</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">excluded_paths:</span> <span class=\"string\">&quot;ignore,.github&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>You don’t have to change anything in this file, except the name if you want to. It is clear to run correctly.</p>\n<hr>\n<h2 id=\"Prepare-Windows\"><a href=\"#Prepare-Windows\" class=\"headerlink\" title=\"Prepare Windows\"></a>Prepare Windows</h2><p>In case you get the following error message on pushing the new file in your project to GitHub …</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">refusing to allow an OAuth App to create or update workflow .github/workflows/diagram.yml without workflow scope</span><br></pre></td></tr></table></figure>\n\n<p>… you have a problem with your OAuth Token the Git Credential Manager created for you, while installing Git for Windows. This token doesn’t include the permission to update GitHub action workflows.</p>\n<p>A workaround is, to create a <strong>Personal Access Token</strong> on Github WITH this permission …</p>\n<p><img src=\"/post/Visualize-the-codebase-of-your-GitHub-repo/create-personal-access-token.png\" alt=\"Create personal access token\"></p>\n<p>… and replace the existing token in the <strong>Windows Credential Manager</strong> (in German the wonderful word “Anmeldeinformationsverwaltung”):</p>\n<p><img src=\"/post/Visualize-the-codebase-of-your-GitHub-repo/windows-credential-manager.png\" alt=\"Windows Credential Manager\"></p>\n<hr>\n<h2 id=\"Parameters\"><a href=\"#Parameters\" class=\"headerlink\" title=\"Parameters\"></a>Parameters</h2><p>There are a few interesting parameters to place within the <code>with</code> section, that allow you to customize the output of the graph to your needs:</p>\n<ul>\n<li><code>output_file</code> - The name and relative path to the SVG file to generate. Default is <em>.&#x2F;diagram.svg</em></li>\n<li><code>root_path</code> - The root path of the code to be vizualized</li>\n<li><code>excluded_paths</code> - Folders to exclude from visualizing (as in the demo YAML)</li>\n<li><code>excluded_globs</code> - Files to exclude from visualizing in micromatch syntax</li>\n<li><code>commit_message</code> - After the action has created the diagram, it will be commited with this custom message</li>\n</ul>\n<p>After pushing your changes, you can watch the action run in the ACTIONS tab in GitHub:</p>\n<p><img src=\"/post/Visualize-the-codebase-of-your-GitHub-repo/github-workflow.png\" alt=\"Github Workflow\"></p>\n<p><img src=\"/post/Visualize-the-codebase-of-your-GitHub-repo/github-workflow-details.png\" alt=\"Github Workflow Details\"></p>\n<hr>\n<h2 id=\"The-README\"><a href=\"#The-README\" class=\"headerlink\" title=\"The README\"></a>The README</h2><p>As the SVG is part of yor project, you can use it easily in your repos README:</p>\n<figure class=\"highlight md\"><figcaption><span>README.md</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">## Codebase Vizualization</span></span><br><span class=\"line\">For an inactive diagram, please visit [<span class=\"string\">Repo Visualization App</span>](<span class=\"link\">https://octo-repo-visualization.vercel.app/?repo=kristofzerbe%2Fhexo-generator-anything</span>)...</span><br><span class=\"line\">![<span class=\"string\">Visualization of the codebase</span>](<span class=\"link\">./DIAGRAM.svg</span>)</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/post/Visualize-the-codebase-of-your-GitHub-repo/diagram-svg.png\" alt=\"Diagram SVG\"></p>\n<p>This SVG is not interactive as Amelias Repo Visualization React app is, but it is a good overview of a repos codebase und it looks really good.</p>\n","_path":"post/Visualize-the-codebase-of-your-GitHub-repo/","_link":"https://kiko.io/post/Visualize-the-codebase-of-your-GitHub-repo/","_id":"cljdzt2v10025ixq5hwwzg880"}}