{"type":"getPostById","data":{"title":"CONTINUE READING Link & Auto Scrolling on the called page","date":"2023-07-29T14:14:35.000Z","description":"<p>On the home page of a blog or other text-heavy site with regular new articles, it is often advisable not to display the entire text of the article, but a more or less large excerpt and a READ MORE or CONTINUE READING link that leads to the rest of the article, usually a stand-alone article page. This allows the user to quickly get a picture of, say, the last dozen posts when he comes here to browse your texts.</p>\n<p>However, it is somewhat unpleasant if you as the author decide to display a larger excerpt after all, and the user lands at the top of the called page after clicking on the MORE link and first has to scroll&#x2F;navigate to the right place until he can resume reading. This destroys his reading flow. It is better to take the user directly to the page where the MORE link interrupted the text on the home page.</p>\n<p>With a hash and some JavaScript this is done so quickly, that I wonder why I haven’t implemented this on my own blog already :)</p>","categories":[{"name":"JavaScript","_id":"cllovky9i003pk0oybjum1woy"}],"tags":[{"name":"UI","_id":"cllovky970032k0oy4cet9xxh"},{"name":"Usability","_id":"cllovkyc600cgk0oy2arx0gsl"}],"content":"<p>On the home page of a blog or other text-heavy site with regular new articles, it is often advisable not to display the entire text of the article, but a more or less large excerpt and a READ MORE or CONTINUE READING link that leads to the rest of the article, usually a stand-alone article page. This allows the user to quickly get a picture of, say, the last dozen posts when he comes here to browse your texts.</p>\n<p>However, it is somewhat unpleasant if you as the author decide to display a larger excerpt after all, and the user lands at the top of the called page after clicking on the MORE link and first has to scroll&#x2F;navigate to the right place until he can resume reading. This destroys his reading flow. It is better to take the user directly to the page where the MORE link interrupted the text on the home page.</p>\n<p>With a hash and some JavaScript this is done so quickly, that I wonder why I haven’t implemented this on my own blog already :)</p>\n<span id=\"more\"></span>\n\n<p>The principle is quite simple:</p>\n<ol>\n<li>append a hash to the MORE link URL the user will click</li>\n<li>detect the hash on the called article page and scroll via JavaScript to an anchor element that was rendered here instead of the MORE link</li>\n<li>remove the hash from the URL again</li>\n</ol>\n<h2 id=\"Some-pre-explanation-of-my-example\"><a href=\"#Some-pre-explanation-of-my-example\" class=\"headerlink\" title=\"Some pre-explanation of my example\"></a>Some pre-explanation of my example</h2><p>My blog is based on the static website generator <a href=\"https://hexo.io/\">Hexo</a>. So I write my articles in <a href=\"https://en.wikipedia.org/wiki/Markdown\">Markdown</a> and use for the interruption of an article a built-in helper, which uses the comment <code>&lt;!-- more --&gt;</code> to hack the <strong>Content</strong> into two parts (<strong>Excerpt</strong> and <strong>More</strong>) and replaces it with simple <strong><code>&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;</code></strong>. I use the <strong>Excerpt</strong> for the start and other overview pages and the <strong>Content</strong> for the article pages themselves.</p>\n<h2 id=\"Expand-the-MORE-link\"><a href=\"#Expand-the-MORE-link\" class=\"headerlink\" title=\"Expand the MORE link\"></a>Expand the MORE link</h2><p>In my template for the start page, 8 articles are currently rendered into the page via a separate <em>EXCERPT</em> template. This contains the code for the MORE link (<code>excerpt_link</code> in my example):</p>\n<figure class=\"highlight js\"><figcaption><span>../layout/partial/excerpt.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div <span class=\"keyword\">class</span>=<span class=\"string\">&quot;article-entry&quot;</span>&gt;</span><br><span class=\"line\">  &lt;%- post.<span class=\"property\">excerpt</span> %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;% <span class=\"keyword\">if</span> (theme.<span class=\"property\">excerpt_link</span>)&#123; %&gt;</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;article-more-link&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&lt;%- url_for(post.path) + &#x27;#continue&#x27; %&gt;&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        &lt;%= theme.excerpt_link %&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\">  &lt;% &#125; %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p>I simply appended the hash “<strong>#continue</strong>“ to the <code>url_for(post.path)</code> statement and this is it for the start page.</p>\n<h2 id=\"The-JS-on-the-article-page\"><a href=\"#The-JS-on-the-article-page\" class=\"headerlink\" title=\"The JS on the article page\"></a>The JS on the article page</h2><p>Since some of my pages deal with hashes, I have a general script that loads in the footer of each page and checks the hashes passed to the page. In the switch statement I only needed a new case for <strong>continue</strong>.</p>\n<p>The first thing I did was to remove the hash again from the because I don’t want to show that to the user. It is only a tool for a better reading flow and should not have any further effects.</p>\n<p>To scroll around on a page via JavaScript, there is the <code>scrollIntoView</code> method, which provides a wonderfully smooth scrolling effect with the <code>behavior: &quot;smooth&quot;</code> and <code>inline: &quot;nearest&quot;</code> options. In my case, however, this was out of the question, since it does not support an offset, which I need for my fixed header.</p>\n<p>The solution was the classic <code>window.scrollTo()</code> function, which is a bit more work, but you can specify exactly where you want the page to go.</p>\n<figure class=\"highlight js\"><figcaption><span>../layout/partial/after-footer.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"keyword\">var</span> hash = <span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">hash</span>.<span class=\"title function_\">substr</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">switch</span> (hash.<span class=\"title function_\">toLowerCase</span>()) &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">case</span> <span class=\"string\">&quot;continue&quot;</span>:</span><br><span class=\"line\">    history.<span class=\"title function_\">replaceState</span>(<span class=\"literal\">null</span>, <span class=\"literal\">null</span>, <span class=\"string\">&#x27; &#x27;</span>); <span class=\"comment\">// remove hash</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">window</span>.<span class=\"title function_\">scrollTo</span>(&#123; <span class=\"comment\">// scroll to the MORE element in the Article</span></span><br><span class=\"line\">      <span class=\"attr\">behavior</span>: <span class=\"string\">&#x27;smooth&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">top</span>:</span><br><span class=\"line\">        <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&quot;#more&quot;</span>).<span class=\"title function_\">getBoundingClientRect</span>().<span class=\"property\">top</span> -</span><br><span class=\"line\">        <span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">getBoundingClientRect</span>().<span class=\"property\">top</span> -</span><br><span class=\"line\">        <span class=\"number\">200</span>, <span class=\"comment\">// with a little buffer around it</span></span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"attr\">default</span>: <span class=\"keyword\">break</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>This is it …</p>\n","_path":"post/CONTINUE-READING-Link-Auto-Scrolling-on-the-called-page/","_link":"https://kiko.io/post/CONTINUE-READING-Link-Auto-Scrolling-on-the-called-page/","_id":"cllovky84002wk0oyhtve7eau"}}