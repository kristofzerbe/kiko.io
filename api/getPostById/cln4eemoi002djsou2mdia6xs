{"type":"getPostById","data":{"title":"Creating Icon Font from SVG Files","date":"2022-09-17T13:08:34.000Z","description":"<p>A several years ago I started building a little PWA and chose <a href=\"https://bootswatch.com/3/\">Bootswatch 3.3.5.</a> for theming. As it depends on Bootstrap I was able to use the <a href=\"https://icons.getbootstrap.com/\">icons from Bootstrap</a>. At the beginning I needed only a handful of these icons, but with the time it became more and more difficult to find the right one, because the Bootstrap Glyphicons in version 3 included only around 250 icons and there was not always the right one. Also, the app was always lugging around well over 100 KB of extra files, of which I actually only needed a few kilobytes.</p>\n<p>In another project I had used <a href=\"https://fontello.com/\">Fontello</a>, where you can build and download your own icon font from a selection of available icons. Very nice, but I didn’t feel like fiddling with project-specific configuration files on the Fontello website. But since you could upload your own SVG files in Fontello, which were then taken over into the font, the same had to work somehow with a Node.JS plugin!?</p>\n<p>And yes <a href=\"https://www.npmjs.com/package/gulp-iconfont\">gulp-iconfont</a> from <a href=\"https://github.com/nfroidure\">Nicolas Froidure</a> was exactly what I needed.</p>\n<p><img src=\"/post/Creating-Icon-Font-from-SVG-Files/gulp-iconfont.png\" alt=\"gulp-iconfont on GitHub\"></p>\n<hr>\n<h2 id=\"First-Solution\"><a href=\"#First-Solution\" class=\"headerlink\" title=\"First Solution\"></a>First Solution</h2><p>Just copy a bunch of SVG files in a folder, run gulp and there was my own customized icon font with a tolerable size of around 20 kilobytes. At that time, <a href=\"https://github.com/backflip\">Thomas Jaggi</a> had taken care of the creation of a CSS file with the correct code points that matched the font with his tool <a href=\"https://www.npmjs.com/package/gulp-iconfont-css\">gulp-iconfont-css</a>.</p>","categories":[{"name":"JavaScript","_id":"cln4eemq8003yjsouehfs3sh7"}],"tags":[{"name":"Bundling","_id":"cln4eemr9006pjsou8i028mo5"},{"name":"SVG","_id":"cln4eemst00b4jsou6gpm59ux"},{"name":"Font","_id":"cln4eemt500c3jsou9in0asbq"}],"content":"<p>A several years ago I started building a little PWA and chose <a href=\"https://bootswatch.com/3/\">Bootswatch 3.3.5.</a> for theming. As it depends on Bootstrap I was able to use the <a href=\"https://icons.getbootstrap.com/\">icons from Bootstrap</a>. At the beginning I needed only a handful of these icons, but with the time it became more and more difficult to find the right one, because the Bootstrap Glyphicons in version 3 included only around 250 icons and there was not always the right one. Also, the app was always lugging around well over 100 KB of extra files, of which I actually only needed a few kilobytes.</p>\n<p>In another project I had used <a href=\"https://fontello.com/\">Fontello</a>, where you can build and download your own icon font from a selection of available icons. Very nice, but I didn’t feel like fiddling with project-specific configuration files on the Fontello website. But since you could upload your own SVG files in Fontello, which were then taken over into the font, the same had to work somehow with a Node.JS plugin!?</p>\n<p>And yes <a href=\"https://www.npmjs.com/package/gulp-iconfont\">gulp-iconfont</a> from <a href=\"https://github.com/nfroidure\">Nicolas Froidure</a> was exactly what I needed.</p>\n<p><img src=\"/post/Creating-Icon-Font-from-SVG-Files/gulp-iconfont.png\" alt=\"gulp-iconfont on GitHub\"></p>\n<hr>\n<h2 id=\"First-Solution\"><a href=\"#First-Solution\" class=\"headerlink\" title=\"First Solution\"></a>First Solution</h2><p>Just copy a bunch of SVG files in a folder, run gulp and there was my own customized icon font with a tolerable size of around 20 kilobytes. At that time, <a href=\"https://github.com/backflip\">Thomas Jaggi</a> had taken care of the creation of a CSS file with the correct code points that matched the font with his tool <a href=\"https://www.npmjs.com/package/gulp-iconfont-css\">gulp-iconfont-css</a>.</p>\n<span id=\"more\"></span>\n\n<h3 id=\"Setup\"><a href=\"#Setup\" class=\"headerlink\" title=\"Setup\"></a>Setup</h3><p>First I needed some SVG files…</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|-- Images</span><br><span class=\"line\"><span class=\"code\">    |-- SVG</span></span><br><span class=\"line\"><span class=\"code\">        |-- alert.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- cancel.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- delete.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- email.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- flag.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- link.svg</span></span><br></pre></td></tr></table></figure>\n\n<p>… and the NPM packages of my task runner <a href=\"https://gulpjs.com/\">gulp.js</a>:</p>\n<figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --<span class=\"built_in\">save</span>-<span class=\"built_in\">dev</span> gulp-iconfont</span><br><span class=\"line\">npm install --<span class=\"built_in\">save</span>-<span class=\"built_in\">dev</span> gulp-iconfont-css</span><br></pre></td></tr></table></figure>\n\n<p>For generating the CSS file a template called <code>_icons.css</code> is shipped with the NPM package of <strong>gulp-iconfont-css</strong>, which can be customized as needed. In my case I just made a copy into a folder called <code>Templates</code>, where I store all other template files I need for my PWA.</p>\n<figure class=\"highlight css\"><figcaption><span>Templates/icons-template.css</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@font-face</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;&lt;%= fontName %&gt;&quot;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">src</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;&lt;%= fontName %&gt;.eot&#x27;</span>);</span><br><span class=\"line\">  <span class=\"attribute\">src</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;&lt;%= fontName %&gt;.eot?#iefix&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;eot&#x27;</span>),</span><br><span class=\"line\">       <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;&lt;%= fontName %&gt;.woff2&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;woff2&#x27;</span>),</span><br><span class=\"line\">       <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;&lt;%= fontName %&gt;.woff&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;woff&#x27;</span>),</span><br><span class=\"line\">       <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;&lt;%= fontName %&gt;.ttf&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;truetype&#x27;</span>),</span><br><span class=\"line\">       <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;&lt;%= fontName %&gt;.svg#&lt;%= fontName %&gt;&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;svg&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.&lt;%= cssClass %&gt;<span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;&lt;%= fontName %&gt;&quot;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-style</span>: normal;</span><br><span class=\"line\">  <span class=\"attribute\">font-variant</span>: normal;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: normal;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">  <span class=\"attribute\">text-transform</span>: none;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">font-smoothing</span>: antialiased;</span><br><span class=\"line\">  -moz-osx-<span class=\"attribute\">font-smoothing</span>: grayscale;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;% _<span class=\"selector-class\">.each</span>(glyphs, function(glyph) &#123; %&gt;</span><br><span class=\"line\">.&lt;%= cssClass %&gt;-&lt;%= glyph<span class=\"selector-class\">.fileName</span> %&gt;<span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;\\&lt;%= glyph.codePoint %&gt;&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;% &#125;); %&gt;</span><br></pre></td></tr></table></figure>\n\n<p>As I was using Gulp for building my app, I had to integrate a new task for creating the icon font in the <code>gulpfile.js</code>:</p>\n<figure class=\"highlight js\"><figcaption><span>/gulpfile.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> iconfont = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-iconfont&#x27;</span>),</span><br><span class=\"line\">    iconfontCss = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-iconfont-css&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> distFolder = <span class=\"string\">&#x27;Build&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> fontName = <span class=\"string\">&#x27;MyAppIcons&#x27;</span>; </span><br><span class=\"line\"></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;create-iconfont&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> gulp.<span class=\"title function_\">src</span>([<span class=\"string\">&#x27;Images/SVG/*.svg&#x27;</span>]) </span><br><span class=\"line\">    .<span class=\"title function_\">pipe</span>(<span class=\"title function_\">iconfontCss</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">fontName</span>: fontName, </span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;Templates/icons-template.css&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">targetPath</span>: fontName + <span class=\"string\">&#x27;.css&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">fontPath</span>: distFolder</span><br><span class=\"line\">    &#125;))</span><br><span class=\"line\">    .<span class=\"title function_\">pipe</span>(<span class=\"title function_\">iconfont</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">formats</span>: [<span class=\"string\">&#x27;svg&#x27;</span>, <span class=\"string\">&#x27;ttf&#x27;</span>, <span class=\"string\">&#x27;eot&#x27;</span>, <span class=\"string\">&#x27;woff&#x27;</span>, <span class=\"string\">&#x27;woff2&#x27;</span>],</span><br><span class=\"line\">      <span class=\"attr\">fontName</span>: fontName, <span class=\"comment\">// Required</span></span><br><span class=\"line\">      <span class=\"attr\">fontHeight</span>: <span class=\"number\">1001</span>,</span><br><span class=\"line\">      <span class=\"attr\">normalize</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"attr\">prependUnicode</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// Recommended</span></span><br><span class=\"line\">      <span class=\"attr\">timestamp</span>: <span class=\"title class_\">Math</span>.<span class=\"title function_\">round</span>(<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>() / <span class=\"number\">1000</span>) <span class=\"comment\">// Recommended</span></span><br><span class=\"line\">    &#125;))</span><br><span class=\"line\">    .<span class=\"title function_\">pipe</span>(gulp.<span class=\"title function_\">dest</span>(distFolder));</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;build&#x27;</span>, </span><br><span class=\"line\">  gulp.<span class=\"title function_\">series</span>(</span><br><span class=\"line\">    <span class=\"string\">&#x27;create-iconfont&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">// other gulp tasks</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>I little explanation on that … First of all the task for <strong>gulp-iconfont-css</strong> has to be inserted before piping the files through <strong>gulp-iconfont</strong>, in order to create the CSS file properly. Following options were used:</p>\n<h4 id=\"gulp-iconfont-css\"><a href=\"#gulp-iconfont-css\" class=\"headerlink\" title=\"gulp-iconfont-css\"></a>gulp-iconfont-css</h4><table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>fontName</code></td>\n<td>Name that the generated font will have</td>\n</tr>\n<tr>\n<td><code>path</code></td>\n<td>Path to the template for generating CSS file</td>\n</tr>\n<tr>\n<td><code>targetPath</code></td>\n<td>Path where the CSS file will be generated</td>\n</tr>\n<tr>\n<td><code>fontPath</code></td>\n<td>Path to the icon font file</td>\n</tr>\n</tbody></table>\n<h4 id=\"gulp-iconfont\"><a href=\"#gulp-iconfont\" class=\"headerlink\" title=\"gulp-iconfont\"></a>gulp-iconfont</h4><p>The library combines some other projects such as <a href=\"https://github.com/nfroidure/svgicons2svgfont\">svgicons2svgfont</a>, <a href=\"https://github.com/nfroidure/svgicons2svgfont#svgicons2svgfontoptions\">gulp-svgicons2svgfont</a> and <a href=\"https://github.com/nfroidure/gulp-svg2ttf\">gulp-svg2ttf</a> to create the different font formats, because its just a wrapper around them.</p>\n<table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>formats</code></td>\n<td>Font file formats that will be created</td>\n</tr>\n<tr>\n<td><code>fontName</code></td>\n<td>Name of the font (for <em>svgicons2svgfont</em>)</td>\n</tr>\n<tr>\n<td><code>fontHeight</code></td>\n<td>Minimum height on scaling icons</td>\n</tr>\n<tr>\n<td><code>normalize</code></td>\n<td>Normalize icons by scaling them to the height of the highest icon (for <em>svgicons2svgfont</em>)</td>\n</tr>\n<tr>\n<td><code>prependUnicode</code></td>\n<td>Prefix files with their automatically allocated unicode code point (for <em>gulp-svgicons2svgfont</em>)</td>\n</tr>\n<tr>\n<td><code>timestamp</code></td>\n<td>Get consistent builds when watching files (for <em>gulp-svg2ttf</em>)</td>\n</tr>\n</tbody></table>\n<h3 id=\"Output\"><a href=\"#Output\" class=\"headerlink\" title=\"Output\"></a>Output</h3><p>After running <code>gulp build</code> all files needed were generated:</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|-- Build</span><br><span class=\"line\"><span class=\"code\">    |-- MyAppIcons.css</span></span><br><span class=\"line\"><span class=\"code\">    |-- MyAppIcons.eot</span></span><br><span class=\"line\"><span class=\"code\">    |-- MyAppIcons.svg</span></span><br><span class=\"line\"><span class=\"code\">    |-- MyAppIcons.ttf</span></span><br><span class=\"line\"><span class=\"code\">    |-- MyAppIcons.woff</span></span><br><span class=\"line\"><span class=\"code\">    |-- MyAppIcons.woff2</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><figcaption><span>MyAppIcons.css</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@font-face</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;MyAppIcons&quot;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">src</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;MyAppIcons.eot&#x27;</span>);</span><br><span class=\"line\">  <span class=\"attribute\">src</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;MyAppIcons.eot?#iefix&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;eot&#x27;</span>),</span><br><span class=\"line\">       <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;MyAppIcons.woff2&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;woff2&#x27;</span>),</span><br><span class=\"line\">       <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;MyAppIcons.woff&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;woff&#x27;</span>),</span><br><span class=\"line\">       <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;MyAppIcons.ttf&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;truetype&#x27;</span>),</span><br><span class=\"line\">       <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;MyAppIcons.svg#MyAppIcons&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;svg&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.icon</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;MyAppIcons&quot;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-style</span>: normal;</span><br><span class=\"line\">  <span class=\"attribute\">font-variant</span>: normal;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: normal;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">  <span class=\"attribute\">text-transform</span>: none;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">font-smoothing</span>: antialiased;</span><br><span class=\"line\">  -moz-osx-<span class=\"attribute\">font-smoothing</span>: grayscale;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.icon-alert</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;\\E001&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.icon-cancel</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;\\E002&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.icon-delete</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;\\E003&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.icon-email</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;\\E004&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.icon-flag</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;\\E005&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.icon-link</span><span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;\\E006&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>All I had to do now, was to reference the new CSS file in my HTML and decorating my HTML tags with one of the new <code>icon</code>-classes. Yes! My had my own icon font, just by copying some SVG files in a folder…</p>\n<h3 id=\"The-Problem\"><a href=\"#The-Problem\" class=\"headerlink\" title=\"The Problem\"></a>The Problem</h3><p>A while later, as my app grew, I needed some new icons, but in the meantime I had used the content codes elsewhere in static CSS files, for example with other pseudo-selectors like AFTER.</p>\n<figure class=\"highlight css\"><figcaption><span>style.css</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.my-special-link</span><span class=\"selector-pseudo\">::after</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;MyAppIcons&quot;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">content</span>: <span class=\"string\">&quot;\\E006&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>After copying a few new icon files to the SVG folder and running the build, I found that most of the icons didn’t fit anymore!?</p>\n<p>After a short research it was clear to me what had happened. With the insertion of the new SVG files, the order of the files in the folder was changed. But since the libraries processed this folder in alphabetical order, file by file, and simply incremented the codes to be assigned, the codes had simply shifted.</p>\n<p>In the example above, this can be easily understood if we insert a file named <strong>cloud.svg</strong> here. The code for <em>cancel.svg</em> (<code>E002</code>) remains untouched, but <em>cloud.svg</em> now gets <code>E003</code> and <em>delete.svg</em> <code>E004</code> and so on. The hardwired icon for <code>.my-special-link</code> (<code>E006</code>) now showed instead of the link icon a flag icon.</p>\n<hr>\n<h2 id=\"Newer-Solution\"><a href=\"#Newer-Solution\" class=\"headerlink\" title=\"Newer Solution\"></a>Newer Solution</h2><p>I don’t know when this happened, because I don’t keep a constant eye on my little PWA and thus the further development of the related tools, but after having manually adjusted the moved codes two or three times now and once again wanting to change a few things on the PWA’s icons, I had enough and came across the following sentence on the gulp-iconfont-css page on GitHub:</p>\n\n    <div>\n        <blockquote><p>Recent versions of gulp-iconfont emit a glyphs (or codepoints &lt; 4.0.0) event (see docs) which should likely be used instead of the workflow described below. However, it will continue to work as expected.</p>\n</blockquote>\n        <cite><a href=\"https://github.com/backflip/gulp-iconfont-css\">--- backflip (Thomas Jaggi)</a></cite>\n    </div>\n  \n\n<p>Ahh, ok. I don’t need the <strong>gulp-iconfont-css</strong> anymore. I can create the CSS file by myself. Lets see how the <strong>gulp-iconfont</strong> task looks, after rewriting:</p>\n<figure class=\"highlight js\"><figcaption><span>/gulpfile.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> iconfont = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-iconfont&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> distFolder = <span class=\"string\">&#x27;Build&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> fontObj = &#123;</span><br><span class=\"line\">  <span class=\"attr\">fontName</span>: <span class=\"string\">&quot;MyAppIcons&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">cssClass</span>: <span class=\"string\">&quot;icon&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&quot;create-iconfont&quot;</span>, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> gulp</span><br><span class=\"line\">    .<span class=\"title function_\">src</span>([<span class=\"string\">&quot;Images/SVG/*.svg&quot;</span>])</span><br><span class=\"line\">    .<span class=\"title function_\">pipe</span>(</span><br><span class=\"line\">      <span class=\"title function_\">iconfont</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">fontName</span>: fontObj.<span class=\"property\">fontName</span>,</span><br><span class=\"line\">        <span class=\"attr\">fontHeight</span>: <span class=\"number\">1001</span>,</span><br><span class=\"line\">        <span class=\"attr\">formats</span>: [<span class=\"string\">&quot;svg&quot;</span>, <span class=\"string\">&quot;ttf&quot;</span>, <span class=\"string\">&quot;eot&quot;</span>, <span class=\"string\">&quot;woff&quot;</span>, <span class=\"string\">&quot;woff2&quot;</span>],</span><br><span class=\"line\">        <span class=\"attr\">normalize</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">prependUnicode</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">timestamp</span>: <span class=\"title class_\">Math</span>.<span class=\"title function_\">round</span>(<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>() / <span class=\"number\">1000</span>),</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    )</span><br><span class=\"line\">    .<span class=\"title function_\">on</span>(<span class=\"string\">&quot;glyphs&quot;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">glyphs, options</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      fontObj.<span class=\"property\">glyphs</span> = glyphs.<span class=\"title function_\">map</span>(mapGlyphs);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(fontObj, options);</span><br><span class=\"line\"></span><br><span class=\"line\">      gulp</span><br><span class=\"line\">        .<span class=\"title function_\">src</span>(<span class=\"string\">&#x27;Templates/icons-template.css&#x27;</span>)</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>(<span class=\"title function_\">consolidate</span>(<span class=\"string\">&quot;lodash&quot;</span>, fontObj))</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>(<span class=\"title function_\">rename</span>(&#123; <span class=\"attr\">basename</span>: fontObj.<span class=\"property\">fontName</span> &#125;))</span><br><span class=\"line\">        .<span class=\"title function_\">pipe</span>(gulp.<span class=\"title function_\">dest</span>(distFolder));</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .<span class=\"title function_\">pipe</span>(gulp.<span class=\"title function_\">dest</span>(distFolder));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">mapGlyphs</span>(<span class=\"params\">glyph</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">fileName</span>: glyph.<span class=\"property\">name</span>,</span><br><span class=\"line\">    <span class=\"attr\">codePoint</span>: glyph.<span class=\"property\">unicode</span>[<span class=\"number\">0</span>].<span class=\"title function_\">charCodeAt</span>(<span class=\"number\">0</span>).<span class=\"title function_\">toString</span>(<span class=\"number\">16</span>).<span class=\"title function_\">toUpperCase</span>(),</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.<span class=\"title function_\">task</span>(<span class=\"string\">&#x27;build&#x27;</span>, </span><br><span class=\"line\">  gulp.<span class=\"title function_\">series</span>(</span><br><span class=\"line\">    <span class=\"string\">&#x27;create-iconfont&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">// other gulp tasks</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>First I have introduced a new <code>fontObj</code> variable to hold all informations for the untouched CSS template. The major difference is now, that <code>iconfont</code> is the only main task, with a subtask where the glyphs are processed directly via <a href=\"https://www.npmjs.com/package/consolidate\"><code>consolidate</code></a>. The <code>mapGlyphs()</code> function ensures that the file names with the CodePoints are transferred into an easily usable structure.</p>\n<p>Works fine, but doesn’t solve my problem with the shifted CodePoints, when inserting new SVG icons … but someone remarked in a StackOverflow article to have a look at the test files of <em>gulp-iconfont</em>. <strong>There, the SVG files carry as prefix the name of the CodePoints to be used for this file!</strong>. Unfortunately, this feature is not documented, but it works…</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|-- Images</span><br><span class=\"line\"><span class=\"code\">    |-- SVG</span></span><br><span class=\"line\"><span class=\"code\">        |-- uE001-alert.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- uE002-cancel.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- uE003-delete.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- uE004-email.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- uE005-flag.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- uE006-link.svg</span></span><br><span class=\"line\"><span class=\"code\">        |-- uE007-cloud.svg</span></span><br></pre></td></tr></table></figure>\n\n<p>Now the order of the SVG files doesn’t matter anymore. I just copy a new SVG file into the folder and rename it with a currently unused Unicode.</p>\n<hr>\n<h2 id=\"Upcoming-Solution-Using-SVG-Sprites\"><a href=\"#Upcoming-Solution-Using-SVG-Sprites\" class=\"headerlink\" title=\"Upcoming Solution: Using SVG Sprites\"></a>Upcoming Solution: Using SVG Sprites</h2><p>Interestingly, the inventor of <strong>gulp-iconfont</strong> page writes on the GiHub page:</p>\n\n    <div>\n        <blockquote><p>Warning: While this plugin may still be useful for fonts generation or old browser support, you should consider using SVG icons directly. Indeed, when i created gulp-iconfont and all its related modules, using SVG icons was just not realistic for a wide browser suppport but i was already conviced that SVG was the future, that’s why i wanted my SVG source files to sit separated in a folder. So, now, just enjoy switching to SVG with almost no effort :). Was a great open source journey with you all!</p>\n</blockquote>\n        <cite><a href=\"https://github.com/nfroidure/gulp-iconfont\">--- Nicolas Froidure (nfroidure)</a></cite>\n    </div>\n  \n\n<p>This goes along with some older articles of Chris Coyer from CSSTricks:</p>\n<ul>\n<li><a href=\"https://css-tricks.com/svg-sprites-use-better-icon-fonts/\">https://css-tricks.com/svg-sprites-use-better-icon-fonts/</a></li>\n<li><a href=\"https://css-tricks.com/svg-symbol-good-choice-icons/\">https://css-tricks.com/svg-symbol-good-choice-icons/</a></li>\n<li><a href=\"https://github.com/w0rm/gulp-svgstore\">https://github.com/w0rm/gulp-svgstore</a></li>\n</ul>\n<p>Maybe it’s time to say goodbye to icon fonts completely and use SVG files directly, but in my opinion this is not suitable for all needs. Especially if you work a lot with pesudo selectors, a general rebuild of the code and the UI will be necessary and you would do well to weigh the cost-benefit carefully.</p>\n","_path":"post/Creating-Icon-Font-from-SVG-Files/","_link":"https://kiko.io/post/Creating-Icon-Font-from-SVG-Files/","_id":"cln4eemoi002djsou2mdia6xs"}}