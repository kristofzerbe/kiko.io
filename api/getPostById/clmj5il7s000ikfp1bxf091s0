{"type":"getPostById","data":{"title":"Change CSS class when element scrolls into viewport","date":"2020-07-13T16:24:39.000Z","description":"<p>I had a neat visual gimmick on the start page of this blog, that the gray-scaled header image of a post in the list scaled up to 100% and became colored, when the user hovered over it:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.article-inner</span> <span class=\"selector-class\">.article-photo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">object-fit</span>: cover;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transform-style</span>: preserve-<span class=\"number\">3</span>d;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all ease-out <span class=\"number\">0.6s</span>;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0.3</span>;</span><br><span class=\"line\">  <span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">1</span>) <span class=\"built_in\">contrast</span>(<span class=\"number\">0.5</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.article-inner</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.article-photo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">0</span>) <span class=\"built_in\">contrast</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Nice, but a little bit useless on smartphones or tablets, where HOVER  doesn’t really work.</p>","categories":[{"name":"JavaScript","_id":"clmj5ila2003rkfp18n6zdoq5"}],"tags":[{"name":"CSS","_id":"clmj5ila0003mkfp15nllb569"},{"name":"jQuery","_id":"clmj5ila9004ckfp11nkfg0io"}],"content":"<p>I had a neat visual gimmick on the start page of this blog, that the gray-scaled header image of a post in the list scaled up to 100% and became colored, when the user hovered over it:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.article-inner</span> <span class=\"selector-class\">.article-photo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">150px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">object-fit</span>: cover;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transform-style</span>: preserve-<span class=\"number\">3</span>d;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all ease-out <span class=\"number\">0.6s</span>;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0.3</span>;</span><br><span class=\"line\">  <span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">1</span>) <span class=\"built_in\">contrast</span>(<span class=\"number\">0.5</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.article-inner</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.article-photo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">0</span>) <span class=\"built_in\">contrast</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Nice, but a little bit useless on smartphones or tablets, where HOVER  doesn’t really work.</p>\n<span id=\"more\"></span>\n\n<p>A better idea was to transform the header image automatically, when it becomes visible to the user. So I changed the HOVER selector into a class…</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.article-photo</span><span class=\"selector-class\">.in-view</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">transform</span>: <span class=\"built_in\">scale</span>(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">0</span>) <span class=\"built_in\">contrast</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>… and wrote a little JS function to determine the point, where the images is fully visible in the viewport:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">isVisibleInViewPort</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> viewTop = $(<span class=\"variable language_\">window</span>).<span class=\"title function_\">scrollTop</span>();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> viewBottom = viewTop + $(<span class=\"variable language_\">window</span>).<span class=\"title function_\">height</span>();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> eTop = $(e).<span class=\"title function_\">offset</span>().<span class=\"property\">top</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> eBottom = eTop + $(e).<span class=\"title function_\">height</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ((eBottom &lt;= viewBottom) &amp;&amp; (eTop &gt;= viewTop));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>This function I had to bind to the windows scroll event to all header images only:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$(<span class=\"variable language_\">window</span>).<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;scroll&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  $(<span class=\"string\">&quot;.article-photo&quot;</span>).<span class=\"title function_\">each</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_\">isVisibleInViewPort</span>($(<span class=\"variable language_\">this</span>))) &#123;</span><br><span class=\"line\">      $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">addClass</span>(<span class=\"string\">&quot;in-view&quot;</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">removeClass</span>(<span class=\"string\">&quot;in-view&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n","_path":"post/Change-CSS-class-when-element-scrolls-into-viewport/","_link":"https://kiko.io/post/Change-CSS-class-when-element-scrolls-into-viewport/","_id":"clmj5il7s000ikfp1bxf091s0"}}