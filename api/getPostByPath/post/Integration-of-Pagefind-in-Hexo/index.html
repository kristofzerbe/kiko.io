{"type":"getPostByPath","data":{"title":"Integration of Pagefind in Hexo","date":"2023-01-19T12:24:00.000Z","description":"<p>From the beginning of this blog I wanted to provide some kind of full text search in order to give my users the ability to find stuff by keyword.</p>\n<p>There are a few Hexo plugins that have approached the subject, but it was not really satisfactory and performant. So I relied on the worlds biggest search engine: Google. A search button, which drives out a small input field and with the pressing of the ENTER key the form was sent via GET to <code>//google.com/search</code>.</p>\n<p><img src=\"/post/Integration-of-Pagefind-in-Hexo/google-site-search.png\" alt=\"Google Site Search on kiko.io\"></p>\n<p>The procedure was simple, but also burdened with the fact that I always expose my users to Google. At least until now … :)</p>\n<p><a href=\"https://mstdn.social/@BryceWrayTX\">Bryce Wray</a> set me on a new path with his post <a href=\"https://www.brycewray.com/posts/2022/12/sweeter-searches-pagefind/\">Sweeter searches with Pagefind</a>, in which he talks about his experience with the still fairly fresh tool <a href=\"https://pagefind.app/\"><strong>Pagefind</strong></a>…</p>\n\n    <div>\n        <blockquote><p>Pagefind is a fully static search library that aims to perform well on large sites, while using as little of your users’ bandwidth as possible, and without hosting any infrastructure …</p>\n</blockquote>\n        <cite><a href=\"https://pagefind.app/\">--- Liam Bigelow @ pagefind.app</a></cite>\n    </div>\n  \n\n<p>Pardon me? A full text search for SSG’s running completely in the browser? It sounded so great that I had to try it right away. And what can I say … it not only works fantastically well, but is also extremely easy to implement. Of course, you have to consider a few things, especially with regard to the SSG Hexo I use, but I didn’t find any big hurdles, also because the tool is so <a href=\"https://pageind.app/\">well documented</a>. Let’s see what my implementation looks like…</p>","categories":[{"name":"Tools","_id":"clnyqkcj9003vksozbwp19jwe"}],"tags":[{"name":"Hexo","_id":"clnyqkcj5003qksoz8mz863x3"},{"name":"Blogging","_id":"clnyqkcjg0046ksoz3dyx0kvo"},{"name":"Search","_id":"clnyqkco900e9ksozg0gzhd0c"}],"content":"<p>From the beginning of this blog I wanted to provide some kind of full text search in order to give my users the ability to find stuff by keyword.</p>\n<p>There are a few Hexo plugins that have approached the subject, but it was not really satisfactory and performant. So I relied on the worlds biggest search engine: Google. A search button, which drives out a small input field and with the pressing of the ENTER key the form was sent via GET to <code>//google.com/search</code>.</p>\n<p><img src=\"/post/Integration-of-Pagefind-in-Hexo/google-site-search.png\" alt=\"Google Site Search on kiko.io\"></p>\n<p>The procedure was simple, but also burdened with the fact that I always expose my users to Google. At least until now … :)</p>\n<p><a href=\"https://mstdn.social/@BryceWrayTX\">Bryce Wray</a> set me on a new path with his post <a href=\"https://www.brycewray.com/posts/2022/12/sweeter-searches-pagefind/\">Sweeter searches with Pagefind</a>, in which he talks about his experience with the still fairly fresh tool <a href=\"https://pagefind.app/\"><strong>Pagefind</strong></a>…</p>\n\n    <div>\n        <blockquote><p>Pagefind is a fully static search library that aims to perform well on large sites, while using as little of your users’ bandwidth as possible, and without hosting any infrastructure …</p>\n</blockquote>\n        <cite><a href=\"https://pagefind.app/\">--- Liam Bigelow @ pagefind.app</a></cite>\n    </div>\n  \n\n<p>Pardon me? A full text search for SSG’s running completely in the browser? It sounded so great that I had to try it right away. And what can I say … it not only works fantastically well, but is also extremely easy to implement. Of course, you have to consider a few things, especially with regard to the SSG Hexo I use, but I didn’t find any big hurdles, also because the tool is so <a href=\"https://pageind.app/\">well documented</a>. Let’s see what my implementation looks like…</p>\n<span id=\"more\"></span>\n\n<hr>\n<h2 id=\"The-Tool-in-Brief\"><a href=\"#The-Tool-in-Brief\" class=\"headerlink\" title=\"The Tool in Brief\"></a>The Tool in Brief</h2><p>Pagefind it is a Node.js tool and is started via the Node Package Runner (npx) and <strong>runs against the static files already created during the build</strong>. It indexes all the desired pages or even parts of the pages and creates meta and index files for them in a special build folder, which can be retrieved later via JavaScript. To make things a bit more user-friendly, Pagefind also directly generates the necessary JavaScript and CSS files for a UI.</p>\n<p>… but Liam can explain better how it works: </p>\n<div class=\"video-container\"><iframe src=https://www.youtube.com/embed/74lsEXqRQys frameborder=0 allow=autoplay; encrypted-media allowfullscreen></iframe></div>\n\n<hr>\n<h2 id=\"Implementation-in-Hexo\"><a href=\"#Implementation-in-Hexo\" class=\"headerlink\" title=\"Implementation in Hexo\"></a>Implementation in Hexo</h2><p>First of all I decided to store all necessary parameters in a supported <a href=\"https://pagefind.app/docs/config-sources/\">config file</a> in the root of my blog project.</p>\n<figure class=\"highlight yaml\"><figcaption><span>pagefind.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">source:</span> <span class=\"string\">docs</span></span><br><span class=\"line\"><span class=\"attr\">bundle_dir:</span> <span class=\"string\">pagefind</span></span><br><span class=\"line\"><span class=\"attr\">exclude_selectors:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;.note-list&quot;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;.anything-list&quot;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;.article-related&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>source</code> defines the relative folder where all static files are created during the build and which should now be indexed.</p>\n<p><code>bundle_dir</code> overrides the default storage folder called <code>_pagefind</code>, which is created in the build folder for the search files. This is necessary because my blog is built and hosted on <strong>Github Pages</strong> and the responsible GitHub Action goes over folders with a starting underscore on deployment. More info on that <a href=\"https://github.com/orgs/community/discussions/23640\">here</a> and <a href=\"https://github.com/CloudCannon/pagefind/discussions/126\">here</a>.</p>\n<p><code>exclude_selectors</code> is a list of all those page elements whose content should NOT be indexed, but more about that later.</p>\n<p>With another setting called <code>glob</code> it is possible to tell Pagefind which files to index, but this currently has its pitfalls when trying to exclude some. Liam already <a href=\"https://github.com/CloudCannon/pagefind/discussions/127\">has this on the screen</a> for one of the next versions.</p>\n<hr>\n<h3 id=\"Limiting-Indexing-Content\"><a href=\"#Limiting-Indexing-Content\" class=\"headerlink\" title=\"Limiting Indexing Content\"></a>Limiting Indexing Content</h3><p>A post on a web page never stands alone, but is surrounded by other elements such as navigation, further links, etc. However, these addional elements should not end up in the index. Pagefind skips some of them like <code>nav</code>, <code>form</code> or <code>script</code> automatically, but there always remain some that should be excluded by hand.</p>\n<p>Best option to narrow down the indexable content is the use of the attribute <code>data-pagefind-body</code>. Instead of excluding something, tell Pagefind what to include. However, this approach makes it easier, but also has consequences:</p>\n\n    <div>\n        <blockquote><p>If <em>data-pagefind-body</em> is found <strong>anywhere</strong> on your site, any pages without this attribute will be removed from your index.</p>\n</blockquote>\n        <cite><a href=\"https://pagefind.app/docs/indexing/\">--- pagefind.app</a></cite>\n    </div>\n  \n\n<p>In my case, I had a few places in my templates that I needed to add the attribute to:</p>\n<table>\n<thead>\n<tr>\n<th>Type</th>\n<th>File</th>\n<th>Element</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Post</td>\n<td>_partial&#x2F;article.ejs</td>\n<td>article</td>\n</tr>\n<tr>\n<td>Notes</td>\n<td>note.ejs</td>\n<td>article</td>\n</tr>\n<tr>\n<td>Page</td>\n<td>page.ejs</td>\n<td>.page-content</td>\n</tr>\n<tr>\n<td>Dynamic Page</td>\n<td>[name].ejs</td>\n<td>.page-content</td>\n</tr>\n<tr>\n<td>Anything Page</td>\n<td>_partial&#x2F;anything-page-item.ejs</td>\n<td>.anything-content</td>\n</tr>\n</tbody></table>\n<p>All elements inside of the elements attributed like that, I had to exclude via the setting <code>exclude_selectors</code> in the config (see above).</p>\n<hr>\n<h3 id=\"Specifying-Meta-Information\"><a href=\"#Specifying-Meta-Information\" class=\"headerlink\" title=\"Specifying Meta Information\"></a>Specifying Meta Information</h3><p>It was important to me to show the date of a post in the search result, because nothing is as inaccurate as a post that is many years old. With Pagefind you select the HTML element in the templates in which the meta value is located and attribute it with <code>data-pagefind-meta</code>, for example:</p>\n<figure class=\"highlight html\"><figcaption><span>date.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">time</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;published dt-published&quot;</span> <span class=\"attr\">itemprop</span>=<span class=\"string\">&quot;datePublished&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">data-pagefind-meta</span>=<span class=\"string\">&quot;date&quot;</span>&gt;</span></span><br><span class=\"line\">  &lt;%= date(page.date, &#x27;DD MMM YYYY&#x27;) %&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">time</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>As title for the search hit Pagefind searches for H1 tags and takes the value of the last tag it finds. If you are not sure that there is always only one H1 tag on the page (and for me it is), then you better specify which tag it should take:</p>\n<figure class=\"highlight html\"><figcaption><span>title.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;&lt;%= class_name %&gt;&quot;</span> <span class=\"attr\">itemprop</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">data-pagefind-meta</span>=<span class=\"string\">&quot;title&quot;</span>&gt;</span></span><br><span class=\"line\">  &lt;%= post.title %&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>Thus, on specifying meta data you can refer not only to the content of a tag, but also to other attributes. Here’s the example for my special Hexo implementation for header images:</p>\n<figure class=\"highlight html\"><figcaption><span>photograph.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;header-photo&quot;</span> <span class=\"attr\">data-pagefind-meta</span>=<span class=\"string\">&quot;image[src], image_alt[alt]&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">     <span class=\"attr\">src</span>=<span class=\"string\">&quot;/photos/normal/&lt;%= page.photograph.file %&gt;&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">     <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&lt;%= page.photograph.name%&gt;&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">     <span class=\"attr\">width</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;0&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>In case there is simply no element that contains the meta value, you can also specify it within the attribute:</p>\n<figure class=\"highlight html\"><figcaption><span>article.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">article</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;note-&lt;%= page.slug %&gt;&quot;</span> <span class=\"attr\">itemprop</span>=<span class=\"string\">&quot;blogPost&quot;</span>   </span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">data-pagefind-body</span> </span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">data-pagefind-meta</span>=<span class=\"string\">&quot;type:Note&quot;</span>&gt;</span></span><br><span class=\"line\"> ...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">article</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"Adding-a-Search-Page\"><a href=\"#Adding-a-Search-Page\" class=\"headerlink\" title=\"Adding a Search Page\"></a>Adding a Search Page</h3><p>Pagefind includes not only everything to get search results from the created index by JavaScript, but also the complete <a href=\"https://pagefind.app/docs/ui/\">UI for a search page</a>, which means that you can build the complete search into your site yourself, or simply take a pre-built UI and visually customize it if necessary. I did the latter.</p>\n<p>The following code is the basic structure of the search page as suggested by Pagefind:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/pagefind/pagefind-ui.css&quot;</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/pagefind/pagefind-ui.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;search&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"function\">(<span class=\"params\">event</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">new</span> <span class=\"title class_\">PagefindUI</span>(&#123; <span class=\"attr\">element</span>: <span class=\"string\">&quot;#search&quot;</span> &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>To accommodate this in Hexo, it is advisable to use your own template and generate the page with an appropriate generator. A standard PAGE in Markdown format is only conditionally suitable for this, because links and scripts are needed. I described how to implement such a generator that renders descriptive Markdown in addition to the EJS template in my post <a href=\"/post/Pattern-for-dynamic-Hexo-pages/\" title=\"Pattern for dynamic Hexo pages\">Pattern for dynamic Hexo pages</a>, and I’ve taken that approach here as well.</p>\n<p>For simplicity, I won’t list the full code here, but link to my blog’s GitHub repo:</p>\n<table>\n<thead>\n<tr>\n<th>File</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://github.com/kristofzerbe/kiko.io/blob/master/source/_dynamic/search.md\"><em>&#x2F;source&#x2F;_dynamic&#x2F;</em><br><strong>search.md</strong></a></td>\n<td>Markdown file with Frontmatter data and introduction text</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/kristofzerbe/kiko.io/blob/master/themes/landscape/layout/search.ejs\"><em>&#x2F;themes&#x2F;landscape&#x2F;layout&#x2F;</em><br><strong>search.ejs</strong></a></td>\n<td>Layout template for search page</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/kristofzerbe/kiko.io/blob/master/themes/landscape/script/generator-dynamic-search.js\"><em>&#x2F;themes&#x2F;landscape&#x2F;script&#x2F;</em><br><strong>generator-dynamic-search.js</strong></a></td>\n<td>Hexo Generator for creating the page during build</td>\n</tr>\n<tr>\n<td><a href=\"https://github.com/kristofzerbe/kiko.io/blob/master/themes/landscape/script/source/css/_pagefind.styl\"><em>&#x2F;themes&#x2F;landscape&#x2F;script&#x2F;source&#x2F;css&#x2F;</em><br><strong>_pagefind.styl</strong></a></td>\n<td>Customized CSS Variables and style overrides</td>\n</tr>\n</tbody></table>\n<p>For the visual customization of the user interface Pagefind provides some CSS variables in the automatically generated CSS file. These help a bit to customize the UI to your own ideas, but I decided to override some of the styles in a seperate file called <code>_pagefind.styl</code>, which will be bundled via <code>@import &quot;_pagefind&quot;</code> in the main <code>styles.styl</code>.</p>\n<p>Since the main bundled CSS file is loaded in the HEAD before the <code>_pagefind.css</code> somewhere in the page, for simplicity I first made sure to pull the overrides with <code>!important</code>. This is not yet pretty and I will have to revise this later on.</p>\n<hr>\n<h3 id=\"Running-Build-and-Pagefind\"><a href=\"#Running-Build-and-Pagefind\" class=\"headerlink\" title=\"Running Build and Pagefind\"></a>Running Build and Pagefind</h3><p>Thus prepared, the rest is a piece of cake. Pagefind does not need to be installed, because if you call the npm package via npx, the latest version will be downloaded and executed automatically. You just have to make sure that the hexo build has run before. The best way is to run the following command:</p>\n<p><code>hexo clean &amp;&amp; hexo generate &amp;&amp;</code><strong><code>npx pagefind</code></strong></p>\n<p>This my result in the console:</p>\n<figure class=\"highlight accesslog\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Running Pagefind v0.<span class=\"number\">10</span>.<span class=\"number\">7</span> (Extended)</span><br><span class=\"line\">Running from: <span class=\"string\">&quot;...\\\\kiko.io&quot;</span></span><br><span class=\"line\">Source:       <span class=\"string\">&quot;docs&quot;</span></span><br><span class=\"line\">Bundle Directory:  <span class=\"string\">&quot;pagefind&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">[Walking source directory]</span></span><br><span class=\"line\">Found <span class=\"number\">319</span> files matching **/*.&#123;html&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">[Parsing files]</span></span><br><span class=\"line\">Found a data-pagefind-body element on the site.</span><br><span class=\"line\">↳ Ignoring pages without this tag.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">[Reading languages]</span></span><br><span class=\"line\">Discovered <span class=\"number\">1</span> language: en</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">[Building search indexes]</span></span><br><span class=\"line\">Total: </span><br><span class=\"line\">  Indexed <span class=\"number\">1</span> language</span><br><span class=\"line\">  Indexed <span class=\"number\">124</span> pages</span><br><span class=\"line\">  Indexed <span class=\"number\">7220</span> words</span><br><span class=\"line\">  Indexed <span class=\"number\">0</span> filters</span><br><span class=\"line\">  Indexed <span class=\"number\">0</span> sorts</span><br><span class=\"line\"></span><br><span class=\"line\">Finished in <span class=\"number\">5</span>.<span class=\"number\">924</span> seconds</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"Mount-in-GitHub-Action\"><a href=\"#Mount-in-GitHub-Action\" class=\"headerlink\" title=\"Mount in GitHub Action\"></a>Mount in GitHub Action</h3><p>Since I am hosting this blog on GitHub Pages and the complete build and deployment is done by a GitHub Action, I added a step to the <code>hexo-build</code> job in the workflow file so that after the build Pagefind indexes the result:</p>\n<figure class=\"highlight yml\"><figcaption><span>hexo-build.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">hexo-build:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"string\">...</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Build</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">generate</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Run</span> <span class=\"string\">Pagefind</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">npm_config_yes=true</span> <span class=\"string\">npx</span> <span class=\"string\">pagefind</span></span><br><span class=\"line\">      <span class=\"string\">...</span></span><br></pre></td></tr></table></figure>\n\n<p>Thankfully, in his article on Pagefind, Bryce also put me on the track of how to prevent a possible security prompt caused by npx from blocking Pagefind to run … <a href=\"/notes/2023/avoid-npx-install-prompt/\">npm_config_yes&#x3D;true</a>.</p>\n<hr>\n<h3 id=\"The-Result\"><a href=\"#The-Result\" class=\"headerlink\" title=\"The Result\"></a>The Result</h3><p>The finished solution is really amazing. As soon as you start typing, the included Pagefind JavaScript updates the results list … and it’s sooo fast. Really an exciting tool. Thanks to Liam and CloudCannon.</p>\n\n    <a href=\"/search\">\n        <img src=\"kiko-io-search.png\" alt=\"Pagefind Search on kiko.io\" />\n    </a>\n    \n\n<p>I hope that my explanation has inspired you to try it out for yourself on your Hexo driven blog or website. If you need some help or advice, drop me a line…</p>\n<hr>\n<h2 id=\"More-Info\"><a href=\"#More-Info\" class=\"headerlink\" title=\"More Info\"></a>More Info</h2>\n        <ul class=\"moreinfo-list\">\n            <li>CloudCannon: <a href=\"https://pagefind.app/\">Pagefind</a></li><li>Liam Bigelow: <a href=\"https://cloudcannon.com/blog/introducing-pagefind/\">Introducing Pagefind: Static Low-bandwidth Search at Scale</a></li><li>Bryce Wray: <a href=\"https://www.brycewray.com/posts/2022/07/pagefind-quite-find-site-search/\">Pagefind is quite a find for site search</a></li><li>Bryce Wray: <a href=\"https://www.brycewray.com/posts/2022/12/sweeter-searches-pagefind/\">Sweeter searches with Pagefind</a></li><li>Nicolas Deville: <a href=\"https://notes.nicolasdeville.com/helpers/pagefind/\">Pagefind</a></li>\n        </ul>\n    \n","_path":"post/Integration-of-Pagefind-in-Hexo/","_link":"https://kiko.io/post/Integration-of-Pagefind-in-Hexo/","_id":"clnyqkch30039ksoz2pw61b1u"}}