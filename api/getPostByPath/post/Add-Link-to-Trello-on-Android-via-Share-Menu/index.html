{"type":"getPostByPath","data":{"title":"Add Link to Trello on Android via Share Menu","date":"2023-11-13T16:11:47.000Z","description":"<p>I have been collecting interesting links in various Trello boards for many years and also process some of them automatically, such as my <a href=\"/collections/tiny-tools\">Tiny Tools</a>.</p>\n<p>However, the official Trello Android App has the problem eversince that, when you want to create a URL as a Trello card in the browser, the URL is entered in the <code>Description</code> and not as an <code>Attachment</code>, where it actually belongs.</p>\n<p><img src=\"/post/Add-Link-to-Trello-on-Android-via-Share-Menu/share-trello-app.png\" alt=\"Share Link with Trello App\"></p>\n<p>I have solved this for myself for years using a <strong>bookmarklet</strong> in the Chrome browser (see <a href=\"/post/Add-website-to-Trello-card-the-better-way/\" title=\"Add website to Trello card the better way\">Add website to Trello card the better way</a>) and get along quite well with it. However, there is one catch, that has annoyed me ever since:<br>I find an interesting link in the Mastodon WebApp, for example, and tap on it. What opens, however, is the WebView integrated in Android and not my standard Chrome browser, in which the bookmarklet would be available. So, for links that I want to store, I always have to open the WebView menu and select “Open in Chrome Browser”. I cannot use the general SHARE menu. At least not so far … :)</p>","categories":[{"name":"Tools","_id":"clp3xjcnj0042m3oz8ly312b9"}],"tags":[{"name":"Trello","_id":"clp3xjcnz005rm3ozbixncx8i"},{"name":"Android","_id":"clp3xjcpf00b1m3oz3q4c1zdu"}],"content":"<p>I have been collecting interesting links in various Trello boards for many years and also process some of them automatically, such as my <a href=\"/collections/tiny-tools\">Tiny Tools</a>.</p>\n<p>However, the official Trello Android App has the problem eversince that, when you want to create a URL as a Trello card in the browser, the URL is entered in the <code>Description</code> and not as an <code>Attachment</code>, where it actually belongs.</p>\n<p><img src=\"/post/Add-Link-to-Trello-on-Android-via-Share-Menu/share-trello-app.png\" alt=\"Share Link with Trello App\"></p>\n<p>I have solved this for myself for years using a <strong>bookmarklet</strong> in the Chrome browser (see <a href=\"/post/Add-website-to-Trello-card-the-better-way/\" title=\"Add website to Trello card the better way\">Add website to Trello card the better way</a>) and get along quite well with it. However, there is one catch, that has annoyed me ever since:<br>I find an interesting link in the Mastodon WebApp, for example, and tap on it. What opens, however, is the WebView integrated in Android and not my standard Chrome browser, in which the bookmarklet would be available. So, for links that I want to store, I always have to open the WebView menu and select “Open in Chrome Browser”. I cannot use the general SHARE menu. At least not so far … :)</p>\n<span id=\"more\"></span>\n\n<p>The bookmarklet does nothing more as sending the link with some additional information like <code>name</code> (title) to the URL <a href=\"https://trello.com/add-card\">https://trello.com/add-card</a>, where the user can select the desired board and list:</p>\n<figure class=\"highlight js\"><figcaption><span>Trello-AddCard-Bookmarklet.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">javascript</span>: (<span class=\"keyword\">function</span> (<span class=\"params\">win, name, desc</span>) &#123;</span><br><span class=\"line\">  win.<span class=\"title function_\">open</span>(</span><br><span class=\"line\">    <span class=\"string\">&quot;https://trello.com/add-card&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;?source=&quot;</span> +</span><br><span class=\"line\">      win.<span class=\"property\">location</span>.<span class=\"property\">host</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;&amp;mode=popup&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;&amp;url=&quot;</span> +</span><br><span class=\"line\">      <span class=\"built_in\">encodeURIComponent</span>(win.<span class=\"property\">location</span>.<span class=\"property\">href</span>) +</span><br><span class=\"line\">      (name ? <span class=\"string\">&quot;&amp;name=&quot;</span> + <span class=\"built_in\">encodeURIComponent</span>(name) : <span class=\"string\">&quot;&quot;</span>) +</span><br><span class=\"line\">      (desc ? <span class=\"string\">&quot;&amp;desc=&quot;</span> + <span class=\"built_in\">encodeURIComponent</span>(desc) : <span class=\"string\">&quot;&quot;</span>),</span><br><span class=\"line\">    <span class=\"string\">&quot;add-trello-card&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;width=500,height=600,left=&quot;</span> +</span><br><span class=\"line\">      (win.<span class=\"property\">screenX</span> + (win.<span class=\"property\">outerWidth</span> - <span class=\"number\">500</span>) / <span class=\"number\">2</span>) +</span><br><span class=\"line\">      <span class=\"string\">&quot;,top=&quot;</span> +</span><br><span class=\"line\">      (win.<span class=\"property\">screenY</span> + (win.<span class=\"property\">outerHeight</span> - <span class=\"number\">740</span>) / <span class=\"number\">2</span>)</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;)(<span class=\"variable language_\">window</span>, <span class=\"variable language_\">document</span>.<span class=\"property\">title</span>, getSelection ? <span class=\"title function_\">getSelection</span>().<span class=\"title function_\">toString</span>() : <span class=\"string\">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<p>If you want to use this bookmarklet, you have to remove all line breaks from the code, decode the url and save it as a bookmark … or you visit <a href=\"https://trello.com/add-card\">https://trello.com/add-card</a> and drag the link “Send to Trello” to your bookmark list. It comes out the same.</p>\n<p><img src=\"/post/Add-Link-to-Trello-on-Android-via-Share-Menu/trello-add-page.png\" alt=\"Create Link Card via Trello Add Card Page\"></p>\n<p>As I said above, the Trello Bookmarklet e.g. Add Card page works differently to the Android app from the same company in terms of the URL. Are different departments not talking to each other?</p>\n<p>However … for me, the bookmarklet is history, because there is a much better approach that uses the Add Card page also, but can be called up from the standard Android Share Menu.</p>\n<hr>\n<h2 id=\"Power-Tool-HTTP-Shortcuts\"><a href=\"#Power-Tool-HTTP-Shortcuts\" class=\"headerlink\" title=\"Power Tool: HTTP Shortcuts\"></a>Power Tool: HTTP Shortcuts</h2><p>The trigger for my new solution was my search for better interaction possibilities from my blog to the IndieWeb. One hit was the article <a href=\"https://snarfed.org/android-indieweb-interactions-with-the-http-shortcuts-app\">Android IndieWeb interactions with the HTTP Shortcuts app</a> by Ryan Barrett, which uses the app <a href=\"https://http-shortcuts.rmy.ch/\"><strong>HTTP Shortcuts</strong></a> by <strong>Roland Meyer</strong> to serve as a <strong>Share Target</strong> for LIKE, FOLLOW and REPLY actions. </p>\n<p>Share Target? A while ago I had the idea of using the <a href=\"https://developer.chrome.com/articles/web-share-target/\">Web Share Target API</a> to solve my problem above, but haven’t got round to setting up such a PWA yet.</p>\n<p>But I no longer have to do that, because the HTTP Shortcuts app not only offers me the option of serving as a share target, but also significantly more functions for creating Android shortcuts, which are extremely useful:</p>\n<ul>\n<li><strong>Browser Shortcut</strong> - Open the URL in the browser</li>\n<li><strong>Scripting Shortcut</strong> - Write JavaScript for advanced workflows</li>\n<li><strong>Multi-Shortcut</strong> - Trigger multiple shortcuts at once</li>\n</ul>\n<p>All these shortcuts can be used to send any HTTP requests and process the responses in a variety of ways. The feature list is impressive and well <a href=\"https://http-shortcuts.rmy.ch/documentation\">documented</a>.</p>\n<h3 id=\"Scripting-Shortcut-for-calling-Trello’s-Add-Card-Page\"><a href=\"#Scripting-Shortcut-for-calling-Trello’s-Add-Card-Page\" class=\"headerlink\" title=\"Scripting Shortcut for calling Trello’s Add Card Page\"></a>Scripting Shortcut for calling Trello’s Add Card Page</h3><p>For my case, I need a scripting shortcut to process the information shared by the Android sharing dialogue to call the Add Card page. This is done via static variables that are created in HTTP Shortcuts and can then be used later in the script:</p>\n<p><img src=\"/post/Add-Link-to-Trello-on-Android-via-Share-Menu/httpshortcuts-variables.png\" alt=\"Setting Up Variables\"></p>\n<p>Creating the shortcut is quite simple, as you can see from the screenshots. Select the type, assign a name, perhaps a suitable icon and (importantly) tick the option <strong>Show as app shortcut on launcher and promote as Direct Share target</strong>, which ensures that the shortcut appears in the Android Share menu.</p>\n<p><img src=\"/post/Add-Link-to-Trello-on-Android-via-Share-Menu/httpshortcuts-shortcut.png\" alt=\"Shortcuts List and Creating/Editing Shortcut\"></p>\n<p><img src=\"/post/Add-Link-to-Trello-on-Android-via-Share-Menu/httpshortcuts-shortcut-settings.png\" alt=\"Scripting Shortcut Settings\"></p>\n<p>The script is no less straightforward, because it simply assembles the URL to the Trello Add Card page with the static variables and opens it using the app’s built-in JavaScript function <code>openUrl</code>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> url = <span class=\"title function_\">getVariable</span>(<span class=\"string\">&quot;SharedUrl&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> title = <span class=\"title function_\">getVariable</span>(<span class=\"string\">&quot;SharedTitle&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">getHostnameFromRegex</span> = (<span class=\"params\">url</span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> matches = url.<span class=\"title function_\">match</span>(<span class=\"regexp\">/^https?\\:\\/\\/([^\\/?#]+)(?:[\\/?#]|$)/i</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> matches &amp;&amp; matches[<span class=\"number\">1</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> hostname = <span class=\"title function_\">getHostnameFromRegex</span>(url);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> trelloAddUrl = </span><br><span class=\"line\">  <span class=\"string\">&quot;https://trello.com/add-card?source=&quot;</span> + hostname + </span><br><span class=\"line\">    <span class=\"string\">&quot;&amp;mode=popup&amp;url=&quot;</span> + <span class=\"built_in\">encodeURIComponent</span>(url) + </span><br><span class=\"line\">    <span class=\"string\">&quot;&amp;name=&quot;</span> + <span class=\"built_in\">encodeURIComponent</span>(title);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">openUrl</span>(trelloAddUrl);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>The result is convincing and frees me from the bookmarklet on my smartphone, but I will continue to use it on my desktop browser.</p>\n\n    <p class=\"download-link\">\n      <a class=\"button\" href=\"AddToTrello-Shortcut.zip\" download>\n        Download Shortcut Files for Import in HTTP Shortcut <strong>AddToTrello-Shortcut.zip</strong>\n      </a>\n    </p>\n    \n\n<p>The HTTP Shortcuts app, however, has really got me hooked. I see a lot of potential for automating things on my smartphone and will keep you updated as I develop more solutions with it. Thank you Roland for this gem …</p>\n<p><img src=\"/post/Add-Link-to-Trello-on-Android-via-Share-Menu/httpshortcuts-share.png\" alt=\"Shortcut as Share Target\"></p>\n","_path":"post/Add-Link-to-Trello-on-Android-via-Share-Menu/","_link":"https://kiko.io/post/Add-Link-to-Trello-on-Android-via-Share-Menu/","_id":"clp3xjcma002vm3oz5jgl3gmo"}}