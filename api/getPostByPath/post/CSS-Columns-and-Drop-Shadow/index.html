{"type":"getPostByPath","data":{"title":"CSS Columns and Drop Shadow","date":"2022-01-15T23:00:00.000Z","description":"<p>As of today, there is no true <strong>Masonry Layout</strong> technique in web development that can be implemented exclusively with CSS and is not based on JavaScript. True in the meaning, that the reading direction should be from left to right and not in the form of columns from top to bottom. For the latter, also called <em>Fake Masonry</em>, there are even two implementation options in CSS: Columns or Flex, whereas the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/columns\">Columns</a> variant is the much simpler one.</p>\n<p>Lets say you have a list of boxes you want to show in a grid-like list, but the height of every box is defined by its content, which results in different heights. Here is an example with a base64 encoded 1px image with an individually defined height:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrapper&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">    Box 1</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height:53px&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">    Box 2</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height:50px&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">    Box 3</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height:33px&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- ... 6 more items with different heights --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>By applying <code>column-count</code> and <code>column-gap</code> to the wrapper and a <code>margin-bottom</code> with the same value as the gap to each item, you will achieve this:</p>\n<p><img src=\"/post/CSS-Columns-and-Drop-Shadow/sample-columns.png\" alt=\"Simple Columns Layout\"></p>\n<p>The order of the boxes is from top to bottom and then from left to right … Fake Masonry, but is works as expected. Here is the most important CSS:</p>","categories":[{"name":"UI/UX","_id":"clmueyz4o003ilkoo9b1f2ttx"}],"tags":[{"name":"CSS","_id":"clmueyz5o003nlkoogtfng9gq"},{"name":"Browser","_id":"clmueyz5p003plkoofbho6glk"}],"content":"<p>As of today, there is no true <strong>Masonry Layout</strong> technique in web development that can be implemented exclusively with CSS and is not based on JavaScript. True in the meaning, that the reading direction should be from left to right and not in the form of columns from top to bottom. For the latter, also called <em>Fake Masonry</em>, there are even two implementation options in CSS: Columns or Flex, whereas the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/columns\">Columns</a> variant is the much simpler one.</p>\n<p>Lets say you have a list of boxes you want to show in a grid-like list, but the height of every box is defined by its content, which results in different heights. Here is an example with a base64 encoded 1px image with an individually defined height:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wrapper&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">    Box 1</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height:53px&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">    Box 2</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height:50px&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">    Box 3</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height:33px&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- ... 6 more items with different heights --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>By applying <code>column-count</code> and <code>column-gap</code> to the wrapper and a <code>margin-bottom</code> with the same value as the gap to each item, you will achieve this:</p>\n<p><img src=\"/post/CSS-Columns-and-Drop-Shadow/sample-columns.png\" alt=\"Simple Columns Layout\"></p>\n<p>The order of the boxes is from top to bottom and then from left to right … Fake Masonry, but is works as expected. Here is the most important CSS:</p>\n<span id=\"more\"></span>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-pseudo\">:root</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">--gap</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attr\">--gap-half</span>: <span class=\"built_in\">calc</span>(<span class=\"built_in\">var</span>(--gap) / <span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrapper</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* LAYOUT STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">width</span>: max-content;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"built_in\">var</span>(--gap-half);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* COLUMN STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">column-count</span>: <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"attribute\">column-gap</span>: <span class=\"built_in\">var</span>(--gap);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* BASIC STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#fffaf5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* LAYOUT STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin-bottom</span>: <span class=\"built_in\">var</span>(--gap);</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: auto;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* COLUMN STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">break-inside</span>: avoid-column;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>See the pen for the complete HTML and CSS:</p>\n\n    <iframe class=\"indiepen\"\n        src=\"https://indiepen.tech/embed/?url=https%3A%2F%2Fkiko.io%2Fpost%2FCSS-Columns-and-Drop-Shadow%2Fsample-columns&tab=result\"\n        style=\"width: 100%; overflow: hidden; display: block; border: 0;\"\n        title=\"Indiepen Embed\"\n        loading=\"lazy\" \n        width=\"100%\" \n        height=\"410\">\n    </iframe>\n  \n\n<hr>\n<h2 id=\"Drop-Shadow-and-the-Chromium-Bug\"><a href=\"#Drop-Shadow-and-the-Chromium-Bug\" class=\"headerlink\" title=\"Drop Shadow and the Chromium Bug\"></a>Drop Shadow and the Chromium Bug</h2><p>To make the list visually a little bit more interesting, we now add a shadow, which is half as thick as the gap, to the boxes:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-pseudo\">:root</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">--gap</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attr\">--gap-half</span>: <span class=\"built_in\">calc</span>(<span class=\"built_in\">var</span>(--gap) / <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"attr\">--color-border</span>: <span class=\"built_in\">hsl</span>(<span class=\"number\">0</span> <span class=\"number\">0%</span> <span class=\"number\">90%</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ... more styles */</span></span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> <span class=\"built_in\">var</span>(--color-border) solid;</span><br><span class=\"line\">  <span class=\"attribute\">box-shadow</span>: <span class=\"number\">1px</span> <span class=\"number\">2px</span> <span class=\"built_in\">var</span>(--gap-half) <span class=\"number\">5px</span> <span class=\"built_in\">var</span>(--color-border);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>In case you work with a Chromium based browser (Version 97.x as of today), you will be confronted with a bug. The “break” from one column to the next doesn’t respect the full 10px high shadow of the next item. <strong>It breaks too late</strong>. You will get something like this:</p>\n<p><img src=\"/post/CSS-Columns-and-Drop-Shadow/sample-columns-shadows.png\" alt=\"Column layout with DropShadow in Chromium\"></p>\n\n    <div class=\"alertbox alertbox-info\">\n      <p>I added a red shadow on hover, to make the bug more obvious. See following pen to inspect the CSS. In case you use Firefox (Version 96.x as of today), you won’t see the bug, because Mozilla did it right.</p>\n\n    </div>\n  \n\n\n    <iframe class=\"indiepen\"\n        src=\"https://indiepen.tech/embed/?url=https%3A%2F%2Fkiko.io%2Fpost%2FCSS-Columns-and-Drop-Shadow%2Fsample-columns-shadows&tab=result\"\n        style=\"width: 100%; overflow: hidden; display: block; border: 0;\"\n        title=\"Indiepen Embed\"\n        loading=\"lazy\" \n        width=\"100%\" \n        height=\"410\">\n    </iframe>\n  \n\n<hr>\n<h2 id=\"Workaround\"><a href=\"#Workaround\" class=\"headerlink\" title=\"Workaround\"></a>Workaround</h2><h3 id=\"Step-1\"><a href=\"#Step-1\" class=\"headerlink\" title=\"Step 1\"></a>Step 1</h3><p>In order to achieve a proper result, we have to hack the HTML and the CSS a bit. First of all we have to wrap the content of an item with a new element called <code>ìtem-inner</code>:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-inner&quot;</span>&gt;</span></span><br><span class=\"line\">    Box 1</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height:53px&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Step-2\"><a href=\"#Step-2\" class=\"headerlink\" title=\"Step 2\"></a>Step 2</h3><p>Next, we move the <code>width</code>, the <code>border</code> and the <code>box-shadow</code> from the item itself to the new inner element. Important here is, to set the background of the <code>item</code> element to <code>transparent</code> in order to prevent interfering with the shadow.</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-pseudo\">:root</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">--gap</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attr\">--gap-half</span>: <span class=\"built_in\">calc</span>(<span class=\"built_in\">var</span>(--gap) / <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"attr\">--color-border</span>: <span class=\"built_in\">hsl</span>(<span class=\"number\">0</span> <span class=\"number\">0%</span> <span class=\"number\">90%</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* BASIC STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: transparent;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item-inner</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* BASIC STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#fffaf5</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> <span class=\"built_in\">var</span>(--color-border) solid;</span><br><span class=\"line\">  <span class=\"attribute\">box-shadow</span>: <span class=\"number\">1px</span> <span class=\"number\">2px</span> <span class=\"built_in\">var</span>(--gap-half) <span class=\"number\">5px</span> <span class=\"built_in\">var</span>(--color-border);</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: all ease-out <span class=\"number\">0.3s</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* LAYOUT STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Step-3\"><a href=\"#Step-3\" class=\"headerlink\" title=\"Step 3\"></a>Step 3</h3><p>Now we have to set the <code>wrapper</code>‘s gap to 0, because we will implement the spacing of the items by applying different paddings to the <code>item</code> element: <strong>half of the gap</strong> to be reached, to the <code>left</code>, the <code>right</code> and the <code>bottom</code> padding and the <strong>full gap</strong> to the <code>top</code>. The latter, to achieve pushing the previous element far enough away so as not to see anything of the shadow.</p>\n<p>But because this would mean that the horizontal gap would be too large by half, we have to use a negative margin to pull the element up by that amount.  </p>\n<p><img src=\"/post/CSS-Columns-and-Drop-Shadow/sample-columns-shadows-fix-step1.png\" alt=\"Chromium Columns Shadows Fix Step 3.1\"></p>\n<p>This in turn would mean, that the first <code>item</code> element in the list would be too high by the now defined negative top margin, which we correct again by using <code>item:first-child</code>.</p>\n<p><img src=\"/post/CSS-Columns-and-Drop-Shadow/sample-columns-shadows-fix-step2.png\" alt=\"Chromium Columns Shadows Fix Step 3.2\"></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-pseudo\">:root</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">--gap</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">  <span class=\"attr\">--gap-half</span>: <span class=\"built_in\">calc</span>(<span class=\"built_in\">var</span>(--gap) / <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"comment\">/* ... more variables */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.wrapper</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ...more styles */</span></span><br><span class=\"line\">  <span class=\"attribute\">column-gap</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ... BASIC STYLES */</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">/* LAYOUT STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">width</span>: auto; </span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"built_in\">var</span>(--gap-half-negative) <span class=\"number\">0</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"built_in\">var</span>(--gap) <span class=\"built_in\">var</span>(--gap-half) <span class=\"built_in\">var</span>(--gap-half);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* COLUMN STYLES */</span></span><br><span class=\"line\">  <span class=\"attribute\">break-inside</span>: avoid-column;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.item</span><span class=\"selector-pseudo\">:first</span>-child &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Here is the complete solution as a pen:</p>\n\n    <iframe class=\"indiepen\"\n        src=\"https://indiepen.tech/embed/?url=https%3A%2F%2Fkiko.io%2Fpost%2FCSS-Columns-and-Drop-Shadow%2Fsample-columns-shadows-fix&tab=result\"\n        style=\"width: 100%; overflow: hidden; display: block; border: 0;\"\n        title=\"Indiepen Embed\"\n        loading=\"lazy\" \n        width=\"100%\" \n        height=\"410\">\n    </iframe>\n  \n\n<hr>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Maybe the Chromium team will fix the bug as soon as possible, to no longer have to rely on this hack, but the really best solution would be, to finish the work already started on the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Masonry_Layout\"><strong>true grid masonry</strong></a>, which currently only Firefox offers behind a flag.</p>\n<hr>\n<h2 id=\"More-Info\"><a href=\"#More-Info\" class=\"headerlink\" title=\"More Info\"></a>More Info</h2>\n        <ul class=\"moreinfo-list\">\n            <li>caniuse.com: <a href=\"https://caniuse.com/?search=grid-template-rows\">Can I Use: CSS property: grid-template-rows</a></li><li>Ryan (dev.to): <a href=\"https://dev.to/ryandsouza13/creating-a-responsive-masonry-layout-using-the-css-column-count-property-4kf7\">Creating A Responsive Masonry Layout Using The CSS column-count Property</a></li><li>MDN WebDocs: <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Masonry_Layout\">Masonry Layout</a></li><li>Rachel Andrew (Smashing Magazine): <a href=\"https://www.smashingmagazine.com/native-css-masonry-layout-css-grid/\">Native CSS Masonry Layout In CSS Grid</a></li><li>Syed Umar Anis: <a href=\"https://umaranis.com/2020/09/01/create-masonry-layout-with-css-grid-with-variable-sized-contents-arranged-in-columns/\">Create Masonry Layout with CSS</a></li><li>Chris Coyier (CSS-Tricks): <a href=\"https://css-tricks.com/piecing-together-approaches-for-a-css-masonry-layout\">Approaches for a CSS Masonry Layout</a></li><li>Jonas (Kulturbanause): <a href=\"https://kulturbanause.de/blog/responsive-masonry-layout-mit-css/\">Responsive Masonry Layouts mit CSS erstellen (German)</a></li>\n        </ul>\n    ","_path":"post/CSS-Columns-and-Drop-Shadow/","_link":"https://kiko.io/post/CSS-Columns-and-Drop-Shadow/","_id":"clmueyz33002alkooao9kh0ux"}}