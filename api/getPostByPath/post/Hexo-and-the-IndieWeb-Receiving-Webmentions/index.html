{"type":"getPostByPath","data":{"title":"Hexo and the IndieWeb (Receiving Webmentions)","date":"2021-05-13T12:16:00.000Z","description":"<div class=\"alertbox alertbox-info\">\n      <p>This is part three of the splitted original post <a href=\"/post/Hexo-and-the-IndieWeb/\" title=\"Hexo and the IndieWeb\">Hexo and the IndieWeb</a>. Don’t miss Part 2 <a href=\"/post/Hexo-and-the-IndieWeb-Sending-Webmentions/\" title=\"Hexo and the IndieWeb (Sending Webmentions)\">Hexo and the IndieWeb (Sending Webmentions)</a> either.</p>\n\n    </div>\n  \n\n<hr>\n<p>A meaningful interaction has always two directions: sending and receiving. In this part of the post I want to show you how to receive Webmentions from other blogs participating in the IndieWeb.</p>\n<p>As Hexo is a SSG it generates static HTML pages. This has the advantage that the pages can be hosted just about anywhere (in my case <a href=\"https://pages.github.com/\">Github Pages</a>, but also the disadvantage of not having a real backend. Therefore, we need an external service that acts as an Webmention endpoint, where other people can send their webmentions.</p>\n<p><a href=\"https://aaronparecki.com/\">Aaron Parecki</a>, co-founder of the IndieWeb, has made a service called <a href=\"https://webmention.io/\"><strong>webmention.io</strong></a> we can use for free. It is able to convert old-fashioned Pingbacks to Webmentions, supports deleting of unwanted mentions, has a Blocklist for blocking domains, Webhooks for real-time processing and last but not least an API to get all your Webmentions per page or per site.</p>","categories":[{"name":"Tools","_id":"clo41jfq9003vp0oua6p7byoz"}],"tags":[{"name":"Hexo","_id":"clo41jfq7003qp0ou7j3efq2j"},{"name":"Blogging","_id":"clo41jfqe0046p0oub2wufee9"},{"name":"Publishing","_id":"clo41jfrf006hp0ou44uj6jbc"},{"name":"Share","_id":"clo41jfrx007mp0ou0c3f2fcs"}],"content":"\n    <div class=\"alertbox alertbox-info\">\n      <p>This is part three of the splitted original post <a href=\"/post/Hexo-and-the-IndieWeb/\" title=\"Hexo and the IndieWeb\">Hexo and the IndieWeb</a>. Don’t miss Part 2 <a href=\"/post/Hexo-and-the-IndieWeb-Sending-Webmentions/\" title=\"Hexo and the IndieWeb (Sending Webmentions)\">Hexo and the IndieWeb (Sending Webmentions)</a> either.</p>\n\n    </div>\n  \n\n<hr>\n<p>A meaningful interaction has always two directions: sending and receiving. In this part of the post I want to show you how to receive Webmentions from other blogs participating in the IndieWeb.</p>\n<p>As Hexo is a SSG it generates static HTML pages. This has the advantage that the pages can be hosted just about anywhere (in my case <a href=\"https://pages.github.com/\">Github Pages</a>, but also the disadvantage of not having a real backend. Therefore, we need an external service that acts as an Webmention endpoint, where other people can send their webmentions.</p>\n<p><a href=\"https://aaronparecki.com/\">Aaron Parecki</a>, co-founder of the IndieWeb, has made a service called <a href=\"https://webmention.io/\"><strong>webmention.io</strong></a> we can use for free. It is able to convert old-fashioned Pingbacks to Webmentions, supports deleting of unwanted mentions, has a Blocklist for blocking domains, Webhooks for real-time processing and last but not least an API to get all your Webmentions per page or per site.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"Setup\"><a href=\"#Setup\" class=\"headerlink\" title=\"Setup\"></a>Setup</h2><p>webmention.io needs a registration and Aaron uses his own authentication method <strong>Web Sign-In</strong> over <a href=\"https://indielogin.com/\">IndieLogin</a> to achieve that.</p>\n<p><img src=\"/post/Hexo-and-the-IndieWeb-Receiving-Webmentions/indielogin.png\" alt=\"IndieLogin.com\"></p>\n<p>After you have signed in, you see your settings with two important links, you have to integrate in the head of your HTML:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;webmention&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://webmention.io/[YOUR-BLOG-DOMAIN]/webmention&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;pingback&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://webmention.io/[YOUR-BLOG-DOMAIN]/xmlrpc&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>They define your page on the one hand as a webmention- and on the other hand as a pingback endpoint. Every send Webmention or Pingback from another blog is routed to these URL’s.</p>\n<p>You will also find your <strong>API Key</strong> on this page. To be honest, is not a real API key, but rather a key to retrieve all incoming webmentions at once. Therefore it does not need to be kept private and secured. There is no way to modify your incoming Webmentions over it.</p>\n<h2 id=\"Incoming-Webmentions\"><a href=\"#Incoming-Webmentions\" class=\"headerlink\" title=\"Incoming Webmentions\"></a>Incoming Webmentions</h2>\n    <div class=\"alertbox alertbox-info\">\n      <p>I’m implementing my Hexo&#x2F;Webmention solution as I’m writing this post, therefore I don’t have any Webmentions to show as an example. Since all mentions on webmention.io are publicly accessible, I simply use Max Böcks article <a href=\"https://mxb.dev/blog/using-webmentions-on-static-sites/\">Using Webmentions in Eleventy</a> in the following. Max, I hope it is ok … :)</p>\n\n    </div>\n  \n\n<p>Aaron has defined three ways to get the incoming mentions of a particular article on your blog:</p>\n<h3 id=\"1-View-as-HTML-page\"><a href=\"#1-View-as-HTML-page\" class=\"headerlink\" title=\"1. View as HTML page\"></a>1. View as HTML page</h3>\n    <figure class=\"highlight\">\n        <pre>https://webmention.io/api/<b>mentions.html</b>?target=<i>https://mxb.dev/blog/using-webmentions-on-static-sites/</i></pre>\n    </figure>\n  \n\n<p><img src=\"/post/Hexo-and-the-IndieWeb-Receiving-Webmentions/view-html.png\" alt=\"View HTML\"></p>\n<p>Using it this way, webmention.io integrates the content with some styles and other information of the sending post for easy reading.<br><br></p>\n<h3 id=\"2-Consume-as-Atom-feed\"><a href=\"#2-Consume-as-Atom-feed\" class=\"headerlink\" title=\"2. Consume as Atom feed\"></a>2. Consume as Atom feed</h3>\n    <figure class=\"highlight\">\n        <pre>https://webmention.io/api/<b>mentions.atom</b>?target=<i>https://mxb.dev/blog/using-webmentions-on-static-sites/</i></pre>\n    </figure>\n  \n\n<p><img src=\"/post/Hexo-and-the-IndieWeb-Receiving-Webmentions/view-atom.png\" alt=\"View ATOM\"><br><br></p>\n<h3 id=\"3-Get-as-JSON\"><a href=\"#3-Get-as-JSON\" class=\"headerlink\" title=\"3. Get as JSON\"></a>3. Get as JSON</h3>\n    <figure class=\"highlight\">\n        <pre>https://webmention.io/api/<b>mentions.jf2</b>?target=<i>https://mxb.dev/blog/using-webmentions-on-static-sites/</i></pre>\n    </figure>\n  \n\n<p><img src=\"/post/Hexo-and-the-IndieWeb-Receiving-Webmentions/view-json.png\" alt=\"View JSON\"><br><br></p>\n<p>Especially the last one is interesting for us, because we can use it to automate getting the data and integrate it in our blog post.</p>\n<p>You can also use all these Url’s to get the Webmentions of all of your pages, by changing the <code>target</code> parameter into:</p>\n\n    <figure class=\"highlight\">\n        <pre>...?<b>token</b>=[YOUR-API-KEY]</pre>\n    </figure>\n  \n\n<p>The feed with token for getting all webmentions is particularly practical for checking whether there are new ones for your blog via a feed reader.</p>\n<p>There are some parameters you have to be aware of:</p>\n<table>\n<thead>\n<tr>\n<th>Parameter</th>\n<th>Example</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Paging</td>\n<td><code>?per-page=20&amp;page=0</code> (<strong>default</strong>, page 1 with 20 entries)</td>\n</tr>\n<tr>\n<td>Sorting By</td>\n<td><code>?sort-by=created</code> (<strong>default</strong>)</td>\n</tr>\n<tr>\n<td>Sorting Direction</td>\n<td><code>?sort-dir=down</code> (<strong>default</strong>, newest first)</td>\n</tr>\n<tr>\n<td>Time Limit</td>\n<td><code>?since=2021-05-10T12:00:00-0700</code></td>\n</tr>\n<tr>\n<td>ID Limit</td>\n<td><code>?since_id=500</code>).</td>\n</tr>\n</tbody></table>\n<p>You can find more on parameters in the documentation of webmention.io’s source code here: <a href=\"https://github.com/aaronpk/webmention.io\">https://github.com/aaronpk/webmention.io</a>.</p>\n<h2 id=\"The-Data\"><a href=\"#The-Data\" class=\"headerlink\" title=\"The Data\"></a>The Data</h2><p>Let’s dive into the data. The JSON is a list and every Webmention is an entry underneath <code>children</code>, with following useful fields:</p>\n<table>\n<thead>\n<tr>\n<th>Field</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>author.name</code></td>\n<td>Name of the sender</td>\n</tr>\n<tr>\n<td><code>author.photo</code></td>\n<td>Avatar photo of the sender</td>\n</tr>\n<tr>\n<td><code>author.url</code></td>\n<td>Personal URL of the sender</td>\n</tr>\n<tr>\n<td><code>wm-id</code></td>\n<td>Unique ID of the Webmention</td>\n</tr>\n<tr>\n<td><code>wm-target</code></td>\n<td>URL of your post</td>\n</tr>\n<tr>\n<td><code>wm-received</code></td>\n<td>UTC Date&#x2F;Time sended</td>\n</tr>\n<tr>\n<td><code>wm-source</code></td>\n<td>URL of the sending post</td>\n</tr>\n<tr>\n<td><code>published</code></td>\n<td>Publish Date&#x2F;Time of the sending post</td>\n</tr>\n<tr>\n<td><code>wm-property</code></td>\n<td>Webmention type out of the following values:<ul><li><b>mention-of</b>&nbsp;:&nbsp;Mention as link in post</li><li><b>in-reply-to</b>&nbsp;:&nbsp;Reply to your post</li><li><b>like-of</b>&nbsp;:&nbsp;Like of your post</li><li><b>repost-of</b>&nbsp;:&nbsp;Repost of your post</li><li><b>bookmark-of</b>&nbsp;:&nbsp;Bookmark of your post</li></ul></td>\n</tr>\n</tbody></table>\n<p>Other occuring fields are optional, but no less interesting for displaying them at your post:</p>\n<table>\n<thead>\n<tr>\n<th>Field</th>\n<th>Purpose</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>name</code></td>\n<td>Name of the Webmention (title of the sending post or something)</td>\n</tr>\n<tr>\n<td><code>summary.type</code></td>\n<td>Summary type of the Webmention, e.g. “text&#x2F;plain”</td>\n</tr>\n<tr>\n<td><code>summary.value</code></td>\n<td>Summary text of the Webmention</td>\n</tr>\n<tr>\n<td><code>content.html</code></td>\n<td>Content as HTML of sending post</td>\n</tr>\n<tr>\n<td><code>content.text</code></td>\n<td>Content as text of sending post</td>\n</tr>\n</tbody></table>\n<p>The fact that we get the complete HTML content of the sending post, means that we easily can parse it for IndieWeb microformats (see <a href=\"/post/Hexo-and-the-IndieWeb/\" title=\"Hexo and the IndieWeb\">Part 1</a>) to get even more information about it and the blog owner!</p>\n<hr>\n<h2 id=\"Integration\"><a href=\"#Integration\" class=\"headerlink\" title=\"Integration\"></a>Integration</h2><p>We have two ways to choose from in order to integrate the data thus obtained into the post:</p>\n<ol>\n<li>Static … means while generating the site</li>\n<li>Dynamic … means real-time via client-side Javascript</li>\n</ol>\n<p>The static approach has two big disadvantages:</p>\n<ul>\n<li>The Webmentions are only visible with a time delay, due to the need of generating the pages of the site</li>\n<li>Hexos generation mechanism only takes those, whose content has beed updated in the meanwhile, but do not take into account any external data like Webmentions. We would have to fire up the time consuming <code>clean</code> and <code>generate</code> all the time</li>\n</ul>\n<p>So, let’s go for the dynamic approach, a little bit JavaScript, which loads the Webmentions on page load (like most Commenting platforms do).</p>\n<p>First of all, we need a placeholder in our article.ejs, where the Webmentions will be displayed. Somewhere near the comments and implemented as another partial:</p>\n<figure class=\"highlight html\"><figcaption><span>layout/_partial/article.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">article</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;&lt;%= post.layout %&gt;-&lt;%= post.slug %&gt;&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">class</span>=<span class=\"string\">&quot;article article-type-&lt;%= post.layout %&gt; h-entry&quot;</span> <span class=\"attr\">itemscope</span> <span class=\"attr\">itemprop</span>=<span class=\"string\">&quot;blogPost&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;%- partial(&#x27;post/webmentions&#x27;) %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;%- partial(&#x27;post/comments&#x27;) %&gt;</span><br><span class=\"line\">  &lt;%- partial(&#x27;post/related&#x27;) %&gt;</span><br><span class=\"line\">  &lt;%- partial(&#x27;post/nav&#x27;) %&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">article</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><figcaption><span>layout/_partial/post/webmentions.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;article-webmentions&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;webmentions-placeholder&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-placeholder&quot;</span>&gt;</span>No Webmentions yet...<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;load&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"title function_\">insertWebmentions</span>(<span class=\"string\">&#x27;&lt;%- post.slug.toLowerCase() %&gt;&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;)    </span></span><br><span class=\"line\"><span class=\"language-javascript\">  </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>The call <code>insertWebmentions</code> references to the asset script <code>webmentions.js</code>, which will be bundled via Grunt in my case, but you can place it where you want and add it to your articles head element. The main thing is, that it will load when the article page is launched.</p>\n<p>The script checks, if the user has already loaded the Webmentions for the current page from webmention.io in the last hour and do so if not, and stores the data in the browser by the pages key (slug) and with a timestamp:</p>\n<figure class=\"highlight js\"><figcaption><span>assets/webmentions.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">insertWebmentions</span>(<span class=\"params\">key</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> lsTimestamp = <span class=\"string\">&quot;wmts_&quot;</span> + key;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> lsWebmentions = <span class=\"string\">&quot;wm_&quot;</span> + key;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> currentUrl = <span class=\"variable language_\">window</span>.<span class=\"property\">location</span>.<span class=\"property\">href</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wmUrl = <span class=\"string\">`https://webmention.io/api/mentions.jf2?target=<span class=\"subst\">$&#123;currentUrl&#125;</span>&amp;per-page=1000&amp;sort-dir=up`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> lastRequest;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> webmentions;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Get data from browser storage, if available</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(lsTimestamp) &amp;&amp; </span><br><span class=\"line\">    <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(lsWebmentions)) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    lastRequest = <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(lsTimestamp);</span><br><span class=\"line\">    webmentions = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(lsWebmentions));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(webmentions &amp;&amp; lastRequest &amp;&amp; <span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(<span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>() - lastRequest) / (<span class=\"number\">60</span>*<span class=\"number\">60</span>*<span class=\"number\">1000</span>) &lt; <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Webmentions are present and not older than an hour</span></span><br><span class=\"line\">    <span class=\"title function_\">process</span>();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Get Webmentions from webmention.io</span></span><br><span class=\"line\">    <span class=\"title function_\">load</span>().<span class=\"title function_\">then</span>(<span class=\"function\">() =&gt;</span> &#123; <span class=\"title function_\">process</span>(); &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Load webmention.io&#x27;s JSON data for the current page</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">load</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(wmUrl);</span><br><span class=\"line\">    webmentions = <span class=\"keyword\">await</span> response.<span class=\"title function_\">json</span>();</span><br><span class=\"line\">    <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(lsWebmentions, <span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(webmentions));</span><br><span class=\"line\">    <span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">setItem</span>(lsTimestamp, <span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Process Webmentions</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">function</span> <span class=\"title function_\">process</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Actually the script loads the first 1000 Webmentions in ascending order of their retreiving date. Should last for a while or I may feel like adding real paging at some point ;)</p>\n<p>On processing the webmentions, a separate HTML block is generated for each type (<code>wm-property</code>) regarding the content of the Webmention, whereby the header is always the same. The <code>VERB</code> refers to the Webmentions type: <em>mentioned</em>, <em>replied</em>, <em>liked</em>, <em>bookmarked</em> or <em>reposted</em>.</p>\n<figure class=\"highlight html\"><figcaption><span>HEADER</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-card h_card&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-photo-link u-url&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;[AUTHOR.URL]&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-photo u-photo&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;44&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;44&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">src</span>=<span class=\"string\">&quot;[AUTHOR.PHOTO]&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;[AUTHOR.NAME]&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-meta&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-name p-name&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;[AUTHOR.URL]&quot;</span>&gt;</span>[AUTHOR.NAME]<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-verb&quot;</span>&gt;</span>[VERB] on<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">time</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-date dt-published&quot;</span> <span class=\"attr\">datetime</span>=<span class=\"string\">&quot;[WM-RECEIVED]&quot;</span>&gt;</span></span><br><span class=\"line\">      [formatted WM-RECEIVED]</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">time</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">small</span>&gt;</span>[Running Number]<span class=\"tag\">&lt;/<span class=\"name\">small</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>The HTML of the five implemented types:</p>\n<figure class=\"highlight html\"><figcaption><span>MENTION</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;webmention wm-mentioned&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;[WM-ID]&quot;</span>&gt;</span></span><br><span class=\"line\">  [HEADER HTML]</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-content p-content&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>[First 50 words of CONTENT.TEXT with ellipsis]<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-source&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;[WM-SOURCE]&quot;</span>&gt;</span>[WM-SOURCE]<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><figcaption><span>REPLY</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;webmention wm-mentioned&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;[WM-ID]&quot;</span>&gt;</span></span><br><span class=\"line\">  [HEADER HTML]</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-content p-content&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>[Complete CONTENT.HTML]<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-source&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;[WM-SOURCE]&quot;</span>&gt;</span>[WM-SOURCE]<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><figcaption><span>LIKE & BOOKMARK (no content)</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;webmention wm-mentioned&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;[WM-ID]&quot;</span>&gt;</span></span><br><span class=\"line\">  [HEADER HTML]</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight html\"><figcaption><span>REPOST</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;webmention wm-mentioned&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;[WM-ID]&quot;</span>&gt;</span></span><br><span class=\"line\">  [HEADER HTML]</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;wm-content p-content&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">      ... at <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;[WM-SOURCE]&quot;</span>&gt;</span>[WM-SOURCE]<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>The result will look like this, after adding some styles:</p>\n<p><img src=\"/post/Hexo-and-the-IndieWeb-Receiving-Webmentions/wm-example.png\" alt=\"Webmention example\"></p>\n<p>You can download the complete JavaScript- and the Stylus file on Github:<br><a href=\"https://github.com/kristofzerbe/Hexo-and-the-IndieWeb-Files\"><strong>https://github.com/kristofzerbe/Hexo-and-the-IndieWeb-Files</strong></a></p>\n<hr>\n<h3 id=\"Form-for-sending-Webmentions-manually\"><a href=\"#Form-for-sending-Webmentions-manually\" class=\"headerlink\" title=\"Form for sending Webmentions manually\"></a>Form for sending Webmentions manually</h3><p>As you may noticed in <a href=\"/post/Hexo-and-the-IndieWeb-Sending-Webmentions/\" title=\"Hexo and the IndieWeb (Sending Webmentions)\">Part 2</a>, some manual work is necessary to have webmentions sent. Therefore, it is good to give the user a possibility to submit his blog post, where he mentions yours, directly. As webmentions.io supports posting a new source, the HTML form is quite simple an we can integrate it in the partial from above, below the script tag:</p>\n<figure class=\"highlight html\"><figcaption><span>layout/_partial/post/webmentions.ejs</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;article-webmentions&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;webmention-form&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">action</span>=<span class=\"string\">&quot;https://webmention.io/&lt;%- config.title %&gt;&gt;/webmention&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">name</span>=<span class=\"string\">&quot;webmention-form&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;post&quot;</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;webmention-form-source&quot;</span>&gt;</span>Your Article URL:<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;webmention-form-source&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">type</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;source&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;https://your-blog.com/your-article&quot;</span> <span class=\"attr\">required</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;hidden&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;target&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&lt;%- post.permalink %&gt;&gt;&quot;</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Send Webmention&quot;</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>The variable <code>config.title</code> defines the name of your blog with which you have registered at webmention.io. In the hidden input, we use the permalink of the current page&#x2F;article as the mentions target.</p>\n<hr>\n<h2 id=\"Building-Bridges\"><a href=\"#Building-Bridges\" class=\"headerlink\" title=\"Building Bridges\"></a>Building Bridges</h2><p>Yes, the IndieWeb and Webmentions are an alternative concept of social networking, bypassing the big silos like Facebook, Twitter and Co. … but they exist and they have a massive reach. Of course, your posts will be shared there, so why not include those mentions?</p>\n<p><a href=\"https://brid.gy/\"><strong>Bridgy</strong></a> is such a bridge builder. It connects your blog with the big social media players:</p>\n<p><img src=\"/post/Hexo-and-the-IndieWeb-Receiving-Webmentions/bridgy.png\" alt=\"Bridgy\"></p>\n<p>The only thing you have to do, is to allow Bridgy to access your social media data, like your Tweets on Twitter. If somebody mentions you and one of your articles as a Tweet, Reply or Like, it sends a mention to the endpoint defined in your HTML, in our case webmention.io. Thats it … kinda magic.</p>\n<hr>\n<h2 id=\"Summary\"><a href=\"#Summary\" class=\"headerlink\" title=\"Summary\"></a>Summary</h2><p>Some people say, Webmentions makes commenting forms on blogs, like Disqus or others, obsolete, but I don’t agree with that, because not every visitor owns a blog and not every blog owner want’s to write a post only to comment the thoughts of another blogger. Both approaches work well side by side and complement each other. Webmentions are super to build a blog network and  increasing your blogs coverage. As I said in <a href=\"/post/Hexo-and-the-IndieWeb/\" title=\"Hexo and the IndieWeb\">Part 1</a> … we write for readers.</p>\n<hr>\n<h2 id=\"More-Info\"><a href=\"#More-Info\" class=\"headerlink\" title=\"More Info\"></a>More Info</h2>\n        <ul class=\"moreinfo-list\">\n            <li>indieweb.org: <a href=\"https://indieweb.org/webmention.io\">webmention.io</a></li><li>Max Böck: <a href=\"https://mxb.dev/blog/using-webmentions-on-static-sites/\">Using Webmentions in Eleventy</a></li><li>Max Böck: <a href=\"https://mxb.dev/blog/webmention-analytics/\">Webmention Analytics</a></li><li>Paul Kinlan: <a href=\"https://paul.kinlan.me/using-web-mentions-in-a-static-sitehugo/\">Using Web Mentions in a static site (Hugo)</a></li><li>Sia Karamalegos: <a href=\"https://sia.codes/posts/webmentions-eleventy-in-depth/\">An In-Depth Tutorial of Webmentions + Eleventy</a></li><li>Keith J. Grant: <a href=\"https://keithjgrant.com/posts/2019/02/adding-webmention-support-to-a-static-site/\">Adding Webmention Support to a Static Site</a></li><li>Chris Bongers: <a href=\"https://h.daily-dev-tips.com/goodbye-comments-welcome-webmentions\">Goodbye comments, welcome Webmentions</a></li>\n        </ul>\n    \n","_path":"post/Hexo-and-the-IndieWeb-Receiving-Webmentions/","_link":"https://kiko.io/post/Hexo-and-the-IndieWeb-Receiving-Webmentions/","_id":"clo41jfns001mp0oucyvs8f62"}}