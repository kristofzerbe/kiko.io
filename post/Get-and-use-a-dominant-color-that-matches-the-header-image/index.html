<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title data-area="POST">Get and use a dominant color that matches the header image - kiko.io</title>
  <meta name="author" content="Kristof Zerbe">
  <meta name="title" content="Get and use a dominant color that matches the header image - kiko.io">
  
  <meta name="description" content="Vibrant Color library and recalculating its HSL output values">
  
   
  <meta name="excerpt" content="The pages of this website are all structured according to the scheme Header, Content, Footer, where the header contains an individual hero image and, like the footer, has a dark gray background color. I chose dark gray at the time because I needed contrast and it matches all the other colors, since the header image is slowly overlaid by the header background color as you scroll.
In July last year, in Discoveries #19 - Visual Helpers, I introduced two tools that deal with determining the dominant color from an image, and since then I‚Äôve been buzzing around in my head about using one of them to color the header and footer to match the image.
After a short testing period I decided to use Vibrant Colors (also because of the good example by Konstantin Polunin on Codepen) and how it works and how I had to adapt the results to my needs I want to highlight in this post.">
  
  
  <link rel="canonical" href="https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
  <meta name="theme-color" content="#444">

    
  <script type="application/ld+json">{"@context":"http://schema.org/","@graph":[{"@type":"Article","@id":"https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/#article","mainEntityOfPage":{"@id":"https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/"},"headline":"Get and use a dominant color that matches the header image - kiko.io","description":"Vibrant Color library and recalculating its HSL output values","datePublished":"2023-10-10T13:34:57Z","dateModified":"2023-10-10T13:34:57Z","image":{"@id":"https://kiko.io#image/Get-and-use-a-dominant-color-that-matches-the-header-image"},"author":{"@id":"https://kiko.io/#person"},"publisher":{"@id":"https://kiko.io/#organization"}},{"@type":"WebPage","@id":"https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/","url":"https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/","name":"Get and use a dominant color that matches the header image - kiko.io","isPartOf":{"@id":"https://kiko.io/#website"},"description":"Vibrant Color library and recalculating its HSL output values","inLanguage":"en-US","primaryImageOfPage":{"@id":"https://kiko.io#image/Get-and-use-a-dominant-color-that-matches-the-header-image"},"image":{"@id":"https://kiko.io#photo/D50_5535_2309.jpg"}},{"@type":"WebSite","@id":"https://kiko.io/#website","url":"https://kiko.io","name":"kiko.io","description":"Blog about memorable tech stuff by Kristof Zerbe","inLanguage":"en-US","publisher":{"@id":"https://kiko.io/#organization"},"potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://kiko.io/search/?q={searchTerm}"},"query-input":"required name=searchTerm"}},{"@type":"Organization","@id":"https://kiko.io/#organization","name":"kiko.io","url":"https://kiko.io","logo":"https://kiko.io/images/icon-192x192.png"},{"@type":"Person","@id":"https://kiko.io/#person","name":"Kristof Zerbe","url":"https://kiko.io/about","image":"https://kiko.io/images/kristof-zerbe.png","sameAs":["https://github.com/kristofzerbe","https://www.xing.com/profile/Kristof_Zerbe","https://www.linkedin.com/in/kristof-zerbe-91012510/","https://500px.com/p/kikon","https://indieweb.social/@kiko","https://pixelfed.social/kristofz"]},{"@type":"ImageObject","@id":"https://kiko.io#photo/D50_5535_2309.jpg","caption":"Floral Magic XCI","url":"https://kiko.io/photos/normal/D50_5535_2309.jpg","contentUrl":"https://kiko.io/photos/normal/D50_5535_2309.jpg","discussionUrl":"https://kiko.io/photos/D50_5535_2309","license":"https://creativecommons.org/licenses/by-sa/4.0/","acquireLicensePage":"https://kiko.io/photos","creditText":"Kristof Zerbe","copyrightNotice":"Kristof Zerbe (CC BY-SA 4.0)","creator":{"@id":"https://kiko.io/#person"}},{"@type":"ImageObject","@id":"https://kiko.io#image/Get-and-use-a-dominant-color-that-matches-the-header-image","url":"/images/social-media/Get-and-use-a-dominant-color-that-matches-the-header-image.png","contentUrl":"/images/social-media/Get-and-use-a-dominant-color-that-matches-the-header-image.png","license":"https://creativecommons.org/licenses/by-sa/4.0/","acquireLicensePage":"https://kiko.io/photos","creditText":"Kristof Zerbe","copyrightNotice":"Kristof Zerbe (CC BY-SA 4.0)","creator":{"@id":"https://kiko.io/#person"}}]}</script>

    <meta property="og:site_name" content="kiko.io">
  <meta property="og:type" content="blog">
  <meta property="og:url" content="https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/">
  <meta property="og:title" content="Get and use a dominant color that matches the header image - kiko.io">
  
  <meta property="og:description" content="Vibrant Color library and recalculating its HSL output values">
  
  <meta property="og:image" content="https://kiko.io/images/social-media/Get-and-use-a-dominant-color-that-matches-the-header-image.png">
  <meta property="og:locale" content="en_US">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/">
  <meta property="twitter:title" content="Get and use a dominant color that matches the header image - kiko.io">
  
  <meta property="twitter:description" content="Vibrant Color library and recalculating its HSL output values">
  
  <meta property="twitter:image" content="https://kiko.io/images/social-media/Get-and-use-a-dominant-color-that-matches-the-header-image.png">

    <link rel="webmention" href="https://webmention.io/kiko.io/webmention" />
  <link rel="pingback" href="https://webmention.io/kiko.io/xmlrpc" />

    <link rel="authorization_endpoint" href="https://indieauth.com/auth" />
  <link rel="token_endpoint" href="https://tokens.indieauth.com/token" />
  <link href="https://github.com/kristofzerbe" rel="me authn">
  <link href="mailto:kristof.zerbe@gmail.com" rel="me authn">
  
    <link rel="alternate" href="/atom.xml" title="Get and use a dominant color that matches the header image - kiko.io" type="application/atom+xml">

  <link rel="preload" href="/css/fonts/lexend/webfonts/Lexend-ExtraLight.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/lexend/webfonts/Lexend-Light.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/lexend/webfonts/Lexend-Regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/lexend/webfonts/Lexend-Medium.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/lexend/webfonts/Lexend-SemiBold.woff2" as="font" type="font/woff2" crossorigin>
  
  <link rel="preload" href="/css/fonts/opensans/opensans-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-italic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-semibold.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-semibolditalic.woff2" as="font" type="font/woff2" crossorigin>
  
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-Regular.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-It.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-Bold.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-BoldIt.ttf.woff2" as="font" type="font/woff2" crossorigin>
  
  <link rel="preload" href="/css/fonts/forkawesome/forkawesome-webfont.woff2" as="font" type="font/woff2" crossorigin>

  
  <link rel="preload" as="image" id="img-preload" href="/images/social-media/Get-and-use-a-dominant-color-that-matches-the-header-image.png" 
        imagesrcset="/images/social-media/Get-and-use-a-dominant-color-that-matches-the-header-image.png 480w, /images/social-media/Get-and-use-a-dominant-color-that-matches-the-header-image.png 768w">
  <link rel="preload" as="image" id="photo-preload" href="/photos/normal/D50_5535_2309.jpg" 
        imagesrcset="/photos/mobile/D50_5535_2309.jpg 480w, /photos/tablet/D50_5535_2309.jpg 768w">
  
    
  
<link rel="stylesheet" href="/css/dist/asset-bundle.min.css">

  
<link rel="stylesheet" href="/css/style.css">


  <script>
    var theme = "light"; //default

    var storedTheme = localStorage.getItem("theme"); 
    if (storedTheme) { 
      theme = storedTheme; 
    } else if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark";
    }

    localStorage.setItem("theme", theme);
    document.documentElement.setAttribute("data-theme", theme);

    window.onload = function () { setTheme(theme); };

  </script>

  
<script src="/js/tools.js"></script>

  
<script src="/js/dialog.js"></script>

  
<script src="/js/dist/scroll-timeline.js"></script>

  
<script src="/js/dist/tiny-slider.js"></script>

  
<script src="/js/dist/image-compare-viewer.min.js"></script>

  
<script src="/js/dist/macy.js"></script>



  <script defer type="text/javascript" 
    src="https://api.pirsch.io/pirsch.js"
    id="pirschjs"
    data-code="aJ835msd85Jl5WkTLtS76XLxVxSm4ODZ"></script>
  <script type="text/javascript" 
    src="https://api.pirsch.io/pirsch-events.js"
    id="pirscheventsjs"
    data-code="aJ835msd85Jl5WkTLtS76XLxVxSm4ODZ"></script>    


<meta name="generator" content="Hexo 6.3.0"></head>

<body id="body">  
  <header id="header">
  <a href="#" id="header-photo-link" rel="noopener" ></a>
  <div id="banner">
    <div id="header-nav-start"></div>
    <nav id="header-nav" role="navigation">
      <ul class="menu">
        
          
          <li class="menu-item menu-item-icon" id="nav-home-link">
            <a class="sub-nav-link"
               href="/">
                <span>Home</span>
              </a>
          </li>
        
          
          <li class="menu-item menu-item-icon" id="nav-search-link">
            <a class="sub-nav-link"
               href="/search">
                <span>Search</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-archives-link">
            <a class="sub-nav-link"
               href="/archives">
                <span>Archives</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-series-link">
            <a class="sub-nav-link"
               href="/series">
                <span>series</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-notes-link">
            <a class="sub-nav-link"
               href="/notes">
                <span>notes</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-photos-link">
            <a class="sub-nav-link"
               href="/photos">
                <span>photos</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-tiny-tools-link">
            <a class="sub-nav-link"
               href="/collections/tiny-tools">
                <span>tiny-tools</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-projects-link">
            <a class="sub-nav-link"
               href="/projects">
                <span>projects</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-about-link">
            <a class="sub-nav-link"
               href="/about">
                <span>About</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-feeds-link">
            <a class="sub-nav-link"
               href="/feeds">
                <span>Feeds</span>
              </a>
          </li>
        
      </ul>
    </nav>
    <div id="header-nav-end"></div>
  </div>
  <div id="progress"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
        <a href="/" id="logo">
          <h1 id="title-wrap">
            <span style="opacity:0.2;">kiko.io</span>
          </h1>
        </a>
      
        <h2 id="subtitle">
          Memorable Tech Stuff
        </h2>
        <div id="sub-socialmediaimage-link" onclick="copysocialmediaimageLink();"></div>
        <script>
          function copysocialmediaimageLink() {
            let smil = document.querySelector('meta[property="og:image"]').content;
            copyTextToClipboard(smil);
          }
        </script>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        <div id="sub-nav-theme">          
          <input type="checkbox" id="theme-switch">
          <label for="theme-switch"></label>
        </div>
      </nav>
    </div>
  </div>
</header>
<script>
  if (location.pathname === "/") {
    document.getElementById("nav-home-link").remove();
  }
</script>
  <div id="content" class="outer">
    <main class="">
  <style>
#banner {
    background-size: cover;
}
@media screen and (max-width: 479px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/mobile/D50_5535_2309.jpg"); }
}
@media screen and (min-width: 480px) and (max-width: 767px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/tablet/D50_5535_2309.jpg"); }
}
@media screen and (min-width: 768px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/normal/D50_5535_2309.jpg"); }    
}
</style>

<img id="header-photo" data-pagefind-meta="image[src], image_alt[alt]"
     src="/photos/normal/D50_5535_2309.jpg" 
     alt="Floral Magic XCI"
     width="0" height="0"/>


    <script>
        var header = document.getElementById("header");
        header.classList.add("photograph");
        
        var photoLink = document.getElementById("header-photo-link");
        photoLink.href = "/photos/D50_5535_2309";
        photoLink.innerHTML = "<strong>Floral Magic XCI</strong>";
    </script>




<script>
  var body = document.getElementById("body");
  body.classList.add("article-view");
</script>
  
<article id="post-2023/Get-and-use-a-dominant-color-that-matches-the-header-image" data-pagefind-body data-pagefind-meta="type:Article"
         class="article article-type-post h-entry">
  
  <div class="article-meta" data-pagefind-ignore>
    <div class="h-card p-author" style="display:none">
      <img class="u-photo" src="/images/kristof-zerbe.png" alt="Kristof Zerbe" />
      <a class="p-name u-url" href="https://kiko.io" rel="author">Kristof Zerbe</a>
    </div>
    <a class="u-url u-uid" href="https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/" style="display:none;">https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/</a>
    <a href="/post/Get-and-use-a-dominant-color-that-matches-the-header-image/" class="article-date">
  
  <time class="published dt-published" data-pagefind-meta="date" 
        datetime="2023-10-10T13:34:57.000Z">10 Oct 2023</time>
</a>
    
  <div class="article-category p-category category-javascript">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> 
  </div>

  </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        




        


  
    <h1 class="article-title p-name" data-pagefind-ignore
        data-title="Get and use a dominant color that matches the header image" 
        data-pagefind-meta="title[data-title]">
        
        <span>Get and use a dominant color that matches the header image</span>
    </h1>
  

        
  
    <h2 class="article-subtitle p-summary">
      Vibrant Color library and recalculating its HSL output values
    </h2>
  

      </header>
    
    
    <div class="article-entry e-content">
      <p>The pages of this website are all structured according to the scheme <strong>Header</strong>, <strong>Content</strong>, <strong>Footer</strong>, where the header contains an individual hero image and, like the footer, has a dark gray background color. I chose dark gray at the time because I needed contrast and it matches all the other colors, since the header image is slowly overlaid by the header background color as you scroll.</p>
<p>In July last year, in <a href="/post/Discoveries-19-Visual-Helpers/" title="Discoveries #19 - Visual Helpers">Discoveries #19 - Visual Helpers</a>, I introduced two tools that deal with determining the dominant color from an image, and since then I‚Äôve been buzzing around in my head about using one of them to color the header and footer to match the image.</p>
<p>After a short testing period I decided to use <a href="https://github.com/Vibrant-Colors">Vibrant Colors</a> (also because of the good example by Konstantin Polunin on <a href="https://codepen.io/kopol/details/QWjwrPN">Codepen</a>) and how it works and how I had to adapt the results to my needs I want to highlight in this post.</p>
<span id="more"></span>

<p>The work on the project <a href="https://github.com/Vibrant-Colors/node-vibrant">node-vibrant</a>, is probably based on <a href="https://github.com/jariz/vibrant.js/">vibrant.js</a> (at least this archived repo refers to it) and is actually a Node.js solution, but you can also just use it in the browser. Since the determination of the total of 6 different colors (<strong>Vibrant</strong>, <strong>Muted</strong> and both with its variants of <strong>Light</strong> und <strong>Dark</strong> mode) from an image can possibly lead to performance problems in the browser, the maintainers have focused on Node.js and also built in a WebWorker solution. My approach is based on the already fully loaded page, including the header image and the display with the original dark gray background color. So the new color is simply icing and thus should not lead to problems.</p>
<p>Here is an example of the 6 extracted colors with one of my images from Konstantine‚Äôs codepen, mentioned above:</p>

    <a href="https://codepen.io/kopol/details/QWjwrPN">
        <img src="codepen-sample-kopol-QWjwrPN.png" alt="Vibrant Codepen Sample" />
    </a>
    

<hr>
<h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h2><p>The installation is done quickly ‚Ä¶ Execute <code>npm install node-vibrant</code> in the console, copy out the file <strong>vibrant.min.js</strong> into the distribution script folder and include it into the HTML page header:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/dist/vibrant.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><p>Depending on the size of the image to be read out, the determination may take some time. Therefore, it is advisable, as in my case, not only to compress the images, but also to let them preload in the head of the page. For this you can use the <code>rel=preload</code> mechanism, which ensures that a resource is loaded fast.</p>

    <div>
        <blockquote><p>The preload value of the <link> element‚Äôs rel attribute lets you declare fetch requests in the HTML‚Äôs <head>, specifying resources that your page will need very soon, which you want to start loading early in the page lifecycle, before browsers‚Äô main rendering machinery kicks in.</p>
</blockquote>
        <cite><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preload">--- MDN Web Docs</a></cite>
    </div>
  

<p>By adding an ID to the LINK it will be easy later on to get the URL of the image to throw at the library:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">as</span>=<span class="string">&quot;image&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">id</span>=<span class="string">&quot;photo-preload&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">href</span>=<span class="string">&quot;/photos/normal/20-08 Mallorca-7333.jpg&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">imagesrcset</span>=<span class="string">&quot;/photos/mobile/20-08 Mallorca-7333.jpg 480w, /photos/tablet/20-08 Mallorca-7333.jpg 768w&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Usage-First-Attempt"><a href="#Usage-First-Attempt" class="headerlink" title="Usage, First Attempt"></a>Usage, First Attempt</h2><p>Thus prepared, it is easy to read out the preferred RGB color value in a script that is embedded in the footer of the page, using Vibrant Color:</p>
<figure class="highlight js"><figcaption><span>after-footer.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setVibrantColor</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get url of preloaded image</span></span><br><span class="line">  <span class="keyword">let</span> img = $(<span class="string">&quot;#photo-preload&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;href&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// call Vibrant Color</span></span><br><span class="line">  <span class="title class_">Vibrant</span>.<span class="title function_">from</span>(img).<span class="title function_">getPalette</span>().<span class="title function_">then</span>(<span class="function"><span class="params">palette</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get vibrant color swatch</span></span><br><span class="line">    <span class="keyword">let</span> swatch = palette.<span class="property">Vibrant</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// helper to format output</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">_rgbToString</span> = (<span class="params">_rgb</span>) =&gt; <span class="string">`rgb(<span class="subst">$&#123;_rgb[<span class="number">0</span>]&#125;</span>, <span class="subst">$&#123;_rgb[<span class="number">1</span>]&#125;</span>, <span class="subst">$&#123;_rgb[<span class="number">2</span>]&#125;</span>)`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get formatted RGB value of swatch</span></span><br><span class="line">    <span class="keyword">let</span> rgb = <span class="title function_">_rgbToString</span>(swatch.<span class="title function_">getRgb</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set new background color to header and footer</span></span><br><span class="line">    $(<span class="string">&quot;#header, #footer&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, rgb);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">setVibrantColor</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>The MUTED variants were out of the question for me after a bit of trial and error, because for me this color has too little to do with what the eye immediately draws out of the image. This can be seen in the example above: the green of the MUTED colors is by no means dominant. That‚Äôs why I decided to use VIBRANT.</p>
<hr>
<h2 id="Usage-Second-Attempt"><a href="#Usage-Second-Attempt" class="headerlink" title="Usage, Second Attempt"></a>Usage, Second Attempt</h2><p>But there is also a problem with the VIBRANT variant: under certain circumstances the extracted color is <strong>too bright</strong> for the background with white text in the foreground. Vibrant Color offers the possibility to create matching text colors, but neither worked for me, nor did I want to get away from white. If you additionally offer a dark theme like I do, the selected color will definitely be too light.</p>
<p>Besides the possibility to read out the RGB color from the so-called swatches, the library also offers the output <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/hsl">HSL (Hue&#x2F;Saturation&#x2F;Lightness)</a>. By adjusting the L-value downwards, the desired contrast can be achieved again.</p>
<p>The HSL values in Vibrant Colors are only available as decimal numbers, i.e. it is necessary to convert them using the HSL specification:</p>
<figure class="highlight js"><figcaption><span>after-footer.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setVibrantColor</span>(<span class="params">theme</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get url of preloaded image</span></span><br><span class="line">  <span class="keyword">let</span> img = $(<span class="string">&quot;#photo-preload&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;href&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// call Vibrant Color</span></span><br><span class="line">  <span class="title class_">Vibrant</span>.<span class="title function_">from</span>(img).<span class="title function_">getPalette</span>().<span class="title function_">then</span>(<span class="function"><span class="params">palette</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get vibrant color swatch</span></span><br><span class="line">    <span class="keyword">let</span> swatch = palette.<span class="property">Vibrant</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get HSL from swatch and convert values</span></span><br><span class="line">    <span class="keyword">let</span> _hsl = swatch.<span class="title function_">getHsl</span>();</span><br><span class="line">    <span class="keyword">let</span> h = (_hsl[<span class="number">0</span>] * <span class="number">360</span>); <span class="comment">// in relation to the HSL color wheel</span></span><br><span class="line">    <span class="keyword">let</span> s = (_hsl[<span class="number">1</span>] * <span class="number">100</span>); <span class="comment">// percentage</span></span><br><span class="line">    <span class="keyword">let</span> l = (_hsl[<span class="number">2</span>] * <span class="number">100</span>); <span class="comment">// percentage</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// overwrite l with new fixed hue depending on theme</span></span><br><span class="line">    l = (theme === <span class="string">&quot;dark&quot;</span>) ? <span class="number">20</span> : <span class="number">35</span>; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// helper to format output, limited to 4 decimal places</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">_hslToString</span> = (<span class="params">h, s, l</span>) =&gt; </span><br><span class="line">      <span class="string">`hsl(<span class="subst">$&#123;h.toFixed(<span class="number">4</span>)&#125;</span>, <span class="subst">$&#123;s.toFixed(<span class="number">4</span>)&#125;</span>%, <span class="subst">$&#123;l.toFixed(<span class="number">4</span>)&#125;</span>%)`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get formatted HSL value</span></span><br><span class="line">    <span class="keyword">let</span> hsl = <span class="title function_">_hslToString</span>(h, s, l);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set new background color to header and footer</span></span><br><span class="line">    $(<span class="string">&quot;#header, #footer&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background-color&quot;</span>, hsl);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Usage-Final-Attempt"><a href="#Usage-Final-Attempt" class="headerlink" title="Usage, Final Attempt"></a>Usage, Final Attempt</h2><p>HSL generally has the problem that colors appear brighter than others depending on the saturation. Therefore, the <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV color model</a> is often preferred, because it corresponds more closely to human color perception.</p>
<p>A complete conversion to HSV seemed a bit too much for my case. Therefore, I limited myself to downscaling the lightness proportionally from a saturation value of 70%:</p>
<figure class="highlight js"><figcaption><span>after-footer.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setVibrantColor</span>(<span class="params">theme</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// overwrite l with new fixed hue depending on theme</span></span><br><span class="line">    l = (theme === <span class="string">&quot;dark&quot;</span>) ? <span class="number">20</span> : <span class="number">35</span>; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// calculate hue reduction when saturation too high</span></span><br><span class="line">    <span class="keyword">let</span> reduce = (s &gt; <span class="number">70</span>) ? <span class="number">10</span> - ((<span class="number">100</span> - s) / <span class="number">4</span>) : <span class="number">0</span>; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// take half of reduction when dark theme</span></span><br><span class="line">    l -= (theme === <span class="string">&quot;dark&quot;</span>) ? reduce / <span class="number">2</span> : reduce; </span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="The-Result"><a href="#The-Result" class="headerlink" title="The Result"></a>The Result</h3><p>The result convinces me, even if it is not (yet) perfect. But that is primarily due to the choice of the dominant color of the library. According to my color perception, it could be different from time to time ‚Ä¶ like for example for the page of this post. My eye would have expected some kind of violet. </p>
<p>But on other pages it works fine, even the reduced lightness, because my header image at the top is darkened too with a gradient to let the text pop out more.</p>
<img src="/post/Get-and-use-a-dominant-color-that-matches-the-header-image/scroll-header-vibrant-back.gif" title="Scrolling with default dark vibrant header background" style="max-width: 40vw" />

    </div>
    
    <footer class="article-footer" data-pagefind-ignore>      
      
  <div class="article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Imaging/" rel="tag">Imaging</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Theming/" rel="tag">Theming</a></li></ul>  
  </div>

      
  
  

      <div class="article-permalink" id="article-permalink-clowyfpjx0037nop6cv6ydvi0">
    <input class="article-permalink-value" value="https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/" 
           data-id="clowyfpjx0037nop6cv6ydvi0" data-title="Get and use a dominant color that matches the header image" />
    <a class="article-action action-copy" title="Copy URL"></a>
    <a class="article-action action-share" title="Open Share Dialog"></a>
</div>
<script>
    window.addEventListener("load", () => {
        initPermalink("clowyfpjx0037nop6cv6ydvi0");
    });
</script>

      
    </footer>

  </div>

  
  

<div class="article-share" data-pagefind-ignore>
  <button onclick="dialog.shareOnMastodon();" class="share mastodon">Share on Mastodon</button>
</div>

<div class="article-interaction" data-pagefind-ignore>
  <p>
    You can interact with this article (applause, criticism, whatever) 
    by mention it in one of your posts, which will also be shown here as a  
    <a href="https://en.wikipedia.org/wiki/Webmention"><em>Webmention</em></a> ... or you leave a good old comment with your GitHub account.   
  </p>
</div>

<div class="article-webmentions" data-pagefind-ignore>
  <h2>Webmentions</h2>

  <div class="webmentions-placeholder">
    <p class="wm-placeholder">No Webmentions yet...</p>
  </div>

  <p class="webmention-form-info">
    In case your blog software can't send Webmentions, 
    you can use this form to submit me a mention of this article...
  </p>

  <form class="webmention-form" action="https://webmention.io/kiko.io>/webmention" name="webmention-form"
    method="post">
    <label for="webmention-form-source">Your Article URL:</label><br>
    <input class="webmention-form-source" type="url" name="source" placeholder="https://your-blog.com/your-article"
      required="">
    <input type="hidden" name="target" value="https://kiko.io/post/Get-and-use-a-dominant-color-that-matches-the-header-image/">
    <input type="submit" value="Send Webmention">
  </form>

  <script>
    window.addEventListener('load', function () {
      insertWebmentions('2023/Get-and-use-a-dominant-color-that-matches-the-header-image', 'https://kiko.io', 'Kristof Zerbe');
    });
  </script>

  

</div>


<div class="article-comments" data-pagefind-ignore>
  <h2>Comments</h2>
  <div id="comment-placeholder"></div>
  <script>
    window.addEventListener('load', function () {
      insertUtterancesCommentBlock();
    });
  </script>
</div>

  
  <div class="article-related">
    <h2>Related</h2>
    <div class="archives">
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/post/Pool-Photo-Generator/">
        <img class="archive-article-photo" src="/photos/tablet/23-05 Holland-0174.jpg" alt="Beer Copper" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/post/Pool-Photo-Generator/" class="archive-article-date">
  
  <time class="published dt-published" data-pagefind-meta="date" 
        datetime="2023-08-20T22:00:00.000Z">21 Aug 2023</time>
</a>
      
  <div class="archive-article-category category-javascript">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> 
  </div>

      




      


  
    <h3>
      <a class="archive-article-title"
         href="/post/Pool-Photo-Generator/">Pool Photo Generator</a>
    </h3>
  

      
  
    <h2 class="archive-article-subtitle">
      How to create multiple device dependent header photos with Node
    </h2>
  
              
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Imaging/" rel="tag">Imaging</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/post/Automatic-Duplicate-Image-Shadow/">
        <img class="archive-article-photo" src="/photos/tablet/18-09 Kroatien-0349.jpg" alt="Colorful Twig" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/post/Automatic-Duplicate-Image-Shadow/" class="archive-article-date">
  
  <time class="published dt-published" data-pagefind-meta="date" 
        datetime="2021-07-16T15:45:30.000Z">16 Jul 2021</time>
</a>
      
  <div class="archive-article-category category-javascript">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> 
  </div>

      




      


  
    <h3>
      <a class="archive-article-title"
         href="/post/Automatic-Duplicate-Image-Shadow/">Automatic Duplicate Image Shadow</a>
    </h3>
  

      
  
    <h2 class="archive-article-subtitle">
      Drop an image shadow with the image itself via JavaScript
    </h2>
  
              
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Imaging/" rel="tag">Imaging</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/post/Discoveries-19-Visual-Helpers/">
        <img class="archive-article-photo" src="/photos/tablet/D50_0053.jpg" alt="Thomas&#39; Ruby Prince I" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/post/Discoveries-19-Visual-Helpers/" class="archive-article-date">
  
  <time class="published dt-published" data-pagefind-meta="date" 
        datetime="2022-07-09T10:30:17.000Z">09 Jul 2022</time>
</a>
      
  <div class="archive-article-category category-misc">
    <a class="article-category-link" href="/categories/Misc/">Misc</a> 
  </div>

      


    <a class="archive-article-anything" href="/series/discoveries">Discoveries</a>



      


  
    <h3>
      <a class="archive-article-title"
         href="/post/Discoveries-19-Visual-Helpers/">Discoveries #19 - Visual Helpers</a>
    </h3>
  

                    
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Collection/" rel="tag">Collection</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
    </div>
  </div>

  
<nav id="article-nav">
  
    <a href="/post/Handling-IPTC-metadata-on-Android-and-Windows/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Handling IPTC metadata on Android and Windows
        
      </div>
    </a>
  
  
    <a href="/post/SVWW-vs-HSV-2023-10-07/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">SVWW vs. HSV @ 2023-10-07</div>
    </a>
  
</nav>

  

</article></main>
    
      <aside id="sidebar">
  
    <div class="widget-wrap">
    <div class="widget about h-card"><!--http://microformats.org/wiki/h-card-->
        <div class="avatar">
            <a href="/about"><img class="u-photo" src="/images/kristof-zerbe.png" alt="Kristof Zerbe"></a>
            <a href="https://github.com/kristofzerbe" target="_blank" class="fab fa-github" rel="me"></a>
            <a href="https://www.xing.com/profile/Kristof_Zerbe" target="_blank" class="fab fa-xing" rel="me"></a>
            <a href="https://www.linkedin.com/in/kristof-zerbe-91012510/" target="_blank" class="fab fa-linkedin" rel="me"></a>      
            <a href="https://500px.com/kikon" target="_blank" class="fab fa-500px" rel="me"></a>
            <a href="https://indieweb.social/@kiko" target="_blank" class="fab fa-mastodon" rel="me"></a>
            <a href="https://pixelfed.social/kristofz" target="_blank" class="fab fa-pixelfed" rel="me"></a>
        </div>
        <h3 class="p-name">Kristof Zerbe</h3>
        <p class="p-note">
            <i class="p-role">Developer & Team Lead</i><br>located in <i class="p-locality">Wiesbaden</i>,<br><i class="p-country-name">Germany</i>
        </p>
        <a class="u-url u-uid" href="https://kiko.io" style="display:none;"></a>
    </div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            
              <a href="/post/Experimenting-with-the-font-LEXEND/">Experimenting with the font LEXEND</a>
            
          </li>
        
          <li>
            
              <a href="/post/SVWW-vs-Hansa-Rostock-2023-10-29/">SVWW vs. Hansa Rostock @ 2023-10-29</a>
            
          </li>
        
          <li>
            
              <a href="/post/SGE-vs-HJK-2023-10-26/">SGE vs. HJK @ 2023-10-26</a>
            
          </li>
        
          <li>
            
              <a href="/post/Handling-IPTC-metadata-on-Android-and-Windows/">Handling IPTC metadata on Android and Windows</a>
            
          </li>
        
      </ul>
    </div>
  </div>

  

  <div class="widget widget-wrap">
    <p>
      Want more? This way ... to the <a href="/archives">archives</a>
    </p>
  </div>  
</aside>
    
  </div>
  <footer id="footer">
  
  <div class="outer">
    <div class="inner">

      <ul id="footer-dots">
        <li class="dot"><a href="https://search.google.com/search-console?resource_id=sc-domain%3Akiko.io" title="SearchConsole"></a></li>
        <li class="dot"><a href="https://kiko-io.pirsch.io/" title="Pirsch"></a></li>
        <li class="dot"><a href="https://webmentions.kiko.io" title="Webmention Analytics"></a></li>
      </ul>

      <div id="footer-info" class="footer-block">
        &copy; 2019-2023&nbsp;&nbsp;Kristof Zerbe
        <span class="dot-space">&#9679;</span>
        Powered by <a href="https://hexo.io/">Hexo</a> & <a href="https://github.com/">GitHub</a>
      </div>

      <div id="footer-links">
        
        <a href="/about">About</a>
        <span class="dot-space">&#9679;</span>
        
        <a href="/impressum">Impressum</a>
        <span class="dot-space">&#9679;</span>
        
        <a href="/feeds">Feeds</a>
        <span class="dot-space">&#9679;</span>
        
        <a href="javascript:dialog.pageMeta();">Page Meta</a>
      </div>

      <div id="footer-perf">
        Page loaded in <span class="perf-loadtime">0</span> at <span class="perf-viewport"></span>
        <script>
          window.addEventListener("resize", function () {
            const height = document.documentElement.clientHeight;
            const width = document.documentElement.clientWidth;
            document.querySelector("#footer-perf span.perf-viewport").innerHTML = `${width} x ${height}`;
          });
          window.addEventListener("load", function () {
            const pageEnd = performance.mark("pageEnd")
            const loadTime = pageEnd.startTime / 1000;
            document.querySelector("#footer-perf span.perf-loadtime").innerHTML = loadTime.toFixed(2);
            window.dispatchEvent(new Event('resize'));
          });
        </script>
      </div>

      <div id="webring">
        <a id="webring-prev" class="webring-link" href="https://xn--sr8hvo.ws/%F0%9F%A7%80%F0%9F%91%9F%F0%9F%8E%8A/previous">&nbsp;</a>
        <a href="https://xn--sr8hvo.ws">IndieWeb Webring&nbsp;üï∏üíç</a>
        <a id="webring-next" class="webring-link" href="https://xn--sr8hvo.ws/%F0%9F%A7%80%F0%9F%91%9F%F0%9F%8E%8A/next">&nbsp;</a>
      </div>

    </div>
  </div>
</footer>
  <script>
  let isOffline = 'false' === 'true';
</script>


<script src="/js/jquery-3.6.0.min.js"></script>


<script src="/js/dist/asset-bundle.min.js"></script>


<script src="/js/scripts.js"></script>


<script src="/js/dist/qr-code-styling.js"></script>


<script src="/js/dist/tinycolor-min.js"></script>


<script src="/js/dist/qr-code-styling-options-contact-light.json" id="qr-code-styling-options-light" type="application&#x2F;json"></script>


<script src="/js/dist/qr-code-styling-options-contact-dark.json" id="qr-code-styling-options-dark" type="application&#x2F;json"></script>


<script>
  //--- eval url hash on load
  var hash = window.location.hash.substr(1);
  switch (hash.toLowerCase()) {
    case "contact":
      window.addEventListener('load', function () {
        dialog.contact();
      });
      break;
    case "continue":
      //has no offset due to fixed header
      //...document.getElementById("more").scrollIntoView({ behavior: "smooth", block: "start", inline: "nearest"});
      window.scrollTo({
        behavior: 'smooth',
        top:
          document.querySelector("#more").getBoundingClientRect().top -
          document.body.getBoundingClientRect().top -
          200,
      });
      history.replaceState(null, null, ' '); // remove hash
    default: break;
  }
</script>

<script>

  //HEADER
  var header = {
    height: 0,
    top: 0,
    offset: 55,
    photoLinkOpacity: 0,
    titleFontSize: 0
  };
  function initHeader() {
    $("#header").css("height", ""); //reset inline css
    $("#header-title").css("top", "");
    $("#header-photo-link").css("opacity", "");
    $("#title-wrap").css("font-size", "");
    header.height = $("#header").height(); //set from given css
    header.top = parseFloat($("#header-title").css("top"));
    header.photoLinkOpacity = parseFloat($("#header-photo-link").css("opacity"));
    header.titleFontSize = parseFloat($("#title-wrap").css("font-size"));

    //change subtitle a bit
    let sub = $("#header").find("#subtitle");
    let col = sub.css("color");
    let rpl = `<span style="text-decoration:line-through;color:rgb(120 120 120)" title="not only anymore"><span style="color:${col};opacity:0.75">Tech</span></span>`;
    let txt = sub.text().trim().replace('Tech', rpl);
    sub.html(txt);

    scrollHeader();
  }
  function scrollHeader() {
    var h = header.height - header.offset,
        st = $(document).scrollTop(),
        d = (h - st),
        p = (d / h),
        hfs = header.titleFontSize / 5 * 3,
        jSide = $("aside");
    if (d > 0) {
      $("#header").css("height", d + header.offset + "px");
      $("#header-photo-link").css("opacity", header.photoLinkOpacity * p);
      $("#banner").css("opacity", p);
      $("#title-wrap").css("font-size", header.titleFontSize - ( header.titleFontSize / 3) * (1 - p) );
      $("#header-title").css("top", header.top - (hfs * (1 - p)) + "px");
      $("#subtitle").css("opacity", p);
      jSide.css("max-width", "").css("position", "").css("top", "");
    } else {
      $("#header").css("height", header.offset + "px");
      $("#header-photo-link").css("opacity", 0);
      $("#banner").css("opacity", 0);
      $("#title-wrap").css("font-size", header.titleFontSize - ( header.titleFontSize / 3) * (1) );
      $("#header-title").css("top", header.top - (hfs * (1)) + "px");
      $("#subtitle").css("opacity", 0);
      if (window.matchMedia("screen and (min-width: 768px)").matches & window.innerHeight > (jSide.height() + 50)) {
        jSide.css("max-width", $("aside").width()).css("position", "fixed").css("top", "50px");
      }
    }
  }

</script>

<script>
  /*** EVENTS */

  window.addEventListener('scroll', function() {
    scrollHeader();
    initViewportImage();
  }, { passive: true });

  window.addEventListener('resize', function() {
    initHeader();
    initViewportImage();
  });

  /*** INITS */
  // $(document).ready(function() {
    initHeader();
    initViewportImage();
    initNavMenuScroll();
    initScrollProgress();
  // });

  // BACK-TO-TOP
  addBackToTop({ diameter: 30 });

  // MENU-ITEM-SCROLL
  let pathItem = window.location.pathname.split('/')[1].toLowerCase();
  if (pathItem === "collections") pathItem = window.location.pathname.split('/')[2].toLowerCase()
  setTimeout(() => {
    let e = document.getElementById(`nav-${pathItem}-link`);
    if (e) e.scrollIntoView({ behavior: "smooth", block: "center", inline: "center" });
  }, 250);

  // AUTOTYPING
  setTimeout(function() {
    $("#title-wrap").empty();
    new AutoTyping({
      id: 'title-wrap',
      typeText: ['kiko.io'],
      textColor: '#fff',
      typeSpeed: 100,
      typeDelay: 100,
      showCursor: false,
      delete: false,
      typeInfinity: false
    }).init();
  }, 1000);

  //MEDIUM-ZOOM
  mediumZoom(document.querySelectorAll('img.zoom'), {
    background: 'rgba(55, 55, 55, 0.5)',
    margin: 20,
    scrollOffset: 10
  });

</script>


  <script>
    //HOOK LINKS FOR PIRSCH EVENT...

    //VSCODE
    let vscode = document.querySelectorAll(".brand-links .vscode").forEach(link => link.addEventListener("click", function() { pirsch("Open in VSCode"); }));

  </script>

</body>
<template id="contact-dialog">
  <div class="contact-content">
    <div class="contact-card">
      <div class="contact-face face-front">
        <div class="contact-face-wrapper">
          <img class="photo" src="/images/kristof-zerbe.png" alt="Kristof Zerbe">
          <div class="header">
            <h3>Kristof Zerbe</h3>
            <h4>Developer & Team Lead</h4>
            <p>Wiesbaden, Germany</p>
            <p class="download">
              <label>Save my contact by<br>downloading my</label>
              <a href="/kristof-zerbe.vcf" download="kristof-zerbe.vcf" class="fa-icon-download">vCard</a>  
            </p>
          </div>
          <hr class="divider">
          <div class="info">
            <p>
              <label>Mail me at</label>
              <a href="mailto:kristof.zerbe@gmail.com" class="fa-icon-mail">kristof.zerbe@gmail.com</a>    
            </p>
            <p>
              <label>Call me at</label>
              <a href="tel:+491716998867" class="fa-icon-phone">+49 171 6998867</a>  
            </p>
            <p>
              <label>Connect with me via</label>
              <a href="https://www.linkedin.com/in/kristof-zerbe-91012510/" class="fa-icon-linkedin">LinkedIn</a>
            </p>
            <p>
              <label>Connect with me via</label>
              <a href="https://www.xing.com/profile/Kristof_Zerbe" class="fa-icon-xing">Xing</a>
            </p>
            <p>
              <label>Follow me on</label>
              <a href="https://indieweb.social/@kiko" class="fa-icon-mastodon">Mastodon</a>  
            </p>
            <p>
              <label>Review my projects on</label>
              <a href="https://github.com/kristofzerbe" class="fa-icon-github">GitHub</a>  
            </p>
            <p>
              <label>Review my photos on</label>
              <a href="https://500px.com/kikon" class="fa-icon-500px">500px</a>  
            </p>
            <p>
              <label>Comment my photos on</label>
              <a href="https://pixelfed.social/kristofz" class="fa-icon-pixelfed">Pixelfed</a>  
            </p>
          </div>
        </div>
        <div class="contact-face-flip">flip for qrcode</div>
      </div>
      <div class="contact-face face-back">
        <div class="contact-face-wrapper">
          <div class="header">
            <h3>Kristof Zerbe</h3>
            <h4>kiko.io/#contact</h4>
          </div>
          <hr class="divider">
          <div id="contact-qrcode" class="qrcode"></div>
        </div>
        <div class="contact-face-flip">flip for card</div>
      </div>
    </div>
  </div>
</template>
<template id="mastodon-share-dialog">
  <div class="mastodon-share-content">
    <section>
      <p id="mastodon-share-intro">
        <img src="/images/mastodon.svg" alt="Mastodon">
        There are many Mastodon instances out there. 
        Tell me yours and I will redirect you to the share dialog of your server:
      </p>
      <label for="mastodon-instance">Your Mastodon Instance</label>
      <div id="mastodon-instance-wrapper">
        <span>https://</span>
        <input id="mastodon-instance" name="intance" required />
      </div>
      <label for="mastodon-text">Text to share ...</label>
      <textarea id="mastodon-text" name="text" rows="8"></textarea>
      <button id="mastodon-share">Share</button>
    </section>
  </div>
</template>
</html>