<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Automatic Header Images in Hexo - kiko.io</title>
  <meta name="author" content="Kristof Zerbe">
  <meta name="title" content="Automatic Header Images in Hexo - kiko.io">
  
  <meta name="description" content="Use static images randomly for posts via Hexo script">
  

  <link rel="canonical" href="https://kiko.io/post/Automatic-Header-Images-in-Hexo/">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
  <meta name="theme-color" content="#444">

    
  <script type="application/ld+json">{"@context":"http://schema.org/","@graph":[{"@type":"Article","@id":"https://kiko.io/post/Automatic-Header-Images-in-Hexo/#article","mainEntityOfPage":{"@id":"https://kiko.io/post/Automatic-Header-Images-in-Hexo/"},"headline":"Automatic Header Images in Hexo - kiko.io","description":"Use static images randomly for posts via Hexo script","datePublished":"2020-06-22T15:49:16Z","dateModified":"2020-06-22T15:49:16Z","image":{"@id":"https://kiko.io#image/Automatic-Header-Images-in-Hexo"},"author":{"@id":"https://kiko.io/#person"},"publisher":{"@id":"https://kiko.io/#organization"}},{"@type":"WebPage","@id":"https://kiko.io/post/Automatic-Header-Images-in-Hexo/","url":"https://kiko.io/post/Automatic-Header-Images-in-Hexo/","name":"Automatic Header Images in Hexo - kiko.io","isPartOf":{"@id":"https://kiko.io/#website"},"description":"Use static images randomly for posts via Hexo script","inLanguage":"en-US","primaryImageOfPage":{"@id":"https://kiko.io#image/Automatic-Header-Images-in-Hexo"},"image":{"@id":"https://kiko.io#photo/D70_7344.jpg"}},{"@type":"ImageObject","@id":"https://kiko.io#image/Automatic-Header-Images-in-Hexo","url":"https://kiko.io/images/social-media/Automatic-Header-Images-in-Hexo.png","contentUrl":"https://kiko.io/images/social-media/Automatic-Header-Images-in-Hexo.png","license":"https://creativecommons.org/licenses/by-sa/4.0/","acquireLicensePage":"https://kiko.io/photos","creditText":"Kristof Zerbe","copyrightNotice":"Kristof Zerbe (CC BY-SA 4.0)","creator":{"@id":"https://kiko.io/#person"}},{"@type":"ImageObject","@id":"https://kiko.io#photo/D70_7344.jpg","caption":"Non Toccare","url":"https://kiko.io/photos/normal/D70_7344.jpg","contentUrl":"https://kiko.io/photos/normal/D70_7344.jpg","license":"https://creativecommons.org/licenses/by-sa/4.0/","acquireLicensePage":"https://kiko.io/photos","creditText":"Kristof Zerbe","copyrightNotice":"Kristof Zerbe (CC BY-SA 4.0)","creator":{"@id":"https://kiko.io/#person"}},{"@type":"WebSite","@id":"https://kiko.io/#website","url":"https://kiko.io","name":"kiko.io","description":"Blog about memorable tech stuff by Kristof Zerbe","inLanguage":"en-US","publisher":{"@id":"https://kiko.io/#organization"},"potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://kiko.io/search/?q={searchTerm}"},"query-input":"required name=searchTerm"}},{"@type":"Organization","@id":"https://kiko.io/#organization","name":"kiko.io","url":"https://kiko.io","logo":"https://kiko.io/images/icon-192x192.png"},{"@type":"Person","@id":"https://kiko.io/#person","name":"Kristof Zerbe","url":"https://kiko.io/about","image":"https://kiko.io/images/kristof-zerbe.png","sameAs":["https://indieweb.social/@kiko","https://github.com/kristofzerbe","https://500px.com/p/kikon"]}]}</script>

    <meta property="og:site_name" content="kiko.io">
  <meta property="og:type" content="blog">
  <meta property="og:url" content="https://kiko.io/post/Automatic-Header-Images-in-Hexo/index.html">
  <meta property="og:title" content="Automatic Header Images in Hexo - kiko.io">
  
  <meta property="og:description" content="Use static images randomly for posts via Hexo script">
  
  <meta property="og:image" content="https://kiko.io/images/social-media/Automatic-Header-Images-in-Hexo.png">
  <meta property="og:locale" content="en_US">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://kiko.io/post/Automatic-Header-Images-in-Hexo/index.html">
  <meta property="twitter:title" content="Automatic Header Images in Hexo - kiko.io">
  
  <meta property="twitter:description" content="Use static images randomly for posts via Hexo script">
  
  <meta property="twitter:image" content="https://kiko.io/images/social-media/Automatic-Header-Images-in-Hexo.png">

    <link rel="webmention" href="https://webmention.io/kiko.io/webmention" />
  <link rel="pingback" href="https://webmention.io/kiko.io/xmlrpc" />

    <link rel="authorization_endpoint" href="https://indieauth.com/auth" />
  <link rel="token_endpoint" href="https://tokens.indieauth.com/token" />
  <link href="https://github.com/kristofzerbe" rel="me authn">
  <link href="mailto:kristof.zerbe@gmail.com" rel="me authn">
  
    

  <link rel="preload" href="/css/fonts/opensans/opensans-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-italic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-semibold.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-semibolditalic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-Regular.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-It.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-Bold.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-BoldIt.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/fontawesome/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/fontawesome/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/fontawesome/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>

  <link rel="preload" as="image" href="/images/hero.jpg" imagesrcset="/images/hero-mobile.jpg 480w, /images/hero-tablet.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$search.jpg" imagesrcset="/photos/mobile/$search.jpg 480w, /photos/tablet/$search.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$notes-2021.jpg" imagesrcset="/photos/mobile/$notes-2021.jpg 480w, /photos/tablet/$notes-2021.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$notes-2022.jpg" imagesrcset="/photos/mobile/$notes-2022.jpg 480w, /photos/tablet/$notes-2022.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$notes-2023.jpg" imagesrcset="/photos/mobile/$notes-2023.jpg 480w, /photos/tablet/$notes-2023.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$notes-2024.jpg" imagesrcset="/photos/mobile/$notes-2024.jpg 480w, /photos/tablet/$notes-2024.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$projects.jpg" imagesrcset="/photos/mobile/$projects.jpg 480w, /photos/tablet/$projects.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$tiny-tools.jpg" imagesrcset="/photos/mobile/$tiny-tools.jpg 480w, /photos/tablet/$tiny-tools.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$photos.jpg" imagesrcset="/photos/mobile/$photos.jpg 480w, /photos/tablet/$photos.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$about.jpg" imagesrcset="/photos/mobile/$about.jpg 480w, /photos/tablet/$about.jpg 768w">
  <link rel="preload" as="image" href="/photos/normal/$404.jpg" imagesrcset="/photos/mobile/$404.jpg 480w, /photos/tablet/$404.jpg 768w">

  
<link rel="stylesheet" href="/css/dist/bundle.min.css">

  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/tools.js"></script>

  
<script src="/js/dist/scroll-timeline.js"></script>

  
<script src="/js/dist/image-compare-viewer.min.js"></script>

  
<script src="/js/dist/tiny-slider.min.js"></script>



  <script defer type="text/javascript" 
    src="https://api.pirsch.io/pirsch.js"
    id="pirschjs"
    data-code="aJ835msd85Jl5WkTLtS76XLxVxSm4ODZ"></script>
  <script type="text/javascript" 
    src="https://api.pirsch.io/pirsch-events.js"
    id="pirscheventsjs"
    data-code="aJ835msd85Jl5WkTLtS76XLxVxSm4ODZ"></script>    


<meta name="generator" content="Hexo 6.3.0"></head>

<body id="body">  
  <div id="container" class="container">
    <div class="inner-container">
      <div id="wrap">
        <header id="header">
  <a href="#" id="header-photo-link" target="_blank" rel="noopener" ></a>
  <div id="banner">
    <div id="header-nav-start"></div>
    <nav id="header-nav" role="navigation">
      <ul class="menu">
        
          
          <li class="menu-item menu-item-icon" id="nav-home-link">
            <a class="sub-nav-link"
               href="/">
                <span>Home</span>
              </a>
          </li>
        
          
          <li class="menu-item menu-item-icon" id="nav-search-link">
            <a class="sub-nav-link"
               href="/search">
                <span>Search</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-archives-link">
            <a class="sub-nav-link"
               href="/archives">
                <span>Archives</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-series-link">
            <a class="sub-nav-link"
               href="/series">
                <span>series</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-notes-link">
            <a class="sub-nav-link"
               href="/notes">
                <span>notes</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-projects-link">
            <a class="sub-nav-link"
               href="/projects">
                <span>projects</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-tiny-tools-link">
            <a class="sub-nav-link"
               href="/collections/tiny-tools">
                <span>tiny-tools</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-photos-link">
            <a class="sub-nav-link"
               href="/photos">
                <span>photos</span>
              </a>
          </li>
        
          
          <li class="menu-item" id="nav-about-link">
            <a class="sub-nav-link"
               href="/about">
                <span>About</span>
              </a>
          </li>
        
          
          <li class="menu-item menu-item-icon" id="nav-rss-link">
            <a class="sub-nav-link"
               href="/atom.xml">
                <span>RSS Feed</span>
              </a>
          </li>
        
      </ul>
    </nav>
    <div id="header-nav-end"></div>
  </div>
  <div id="progress"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
        <a href="/" id="logo">
          <h1 id="title-wrap">
            <span style="opacity:0.2;">kiko.io</span>
          </h1>
        </a>
      
        <h2 id="subtitle">
          Memorable Tech Stuff
        </h2>
        <div id="sub-socialmediaimage-link" onclick="copysocialmediaimageLink();"></div>
        <script>
          function copysocialmediaimageLink() {
            let smil = document.querySelector('meta[property="og:image"]').content;
            copyTextToClipboard(smil);
          }
        </script>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        <div id="sub-nav-theme">          
          <input type="checkbox" id="theme-switch">
          <label for="theme-switch"></label>
        </div>
      </nav>
    </div>
  </div>
</header>
<script>
  if (location.pathname === "/") {
    document.getElementById("nav-home-link").remove();
  }
</script>
        <div id="content" class="outer">
          <main>
  <style>
#banner {
    background-size: cover;
}
@media screen and (max-width: 479px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/mobile/D70_7344.jpg"); }
}
@media screen and (min-width: 480px) and (max-width: 767px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/tablet/D70_7344.jpg"); }
}
@media screen and (min-width: 768px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/normal/D70_7344.jpg"); }    
}
</style>

<img id="header-photo" data-pagefind-meta="image[src], image_alt[alt]"
     src="/photos/normal/D70_7344.jpg" 
     alt="Non Toccare"
     width="0" height="0"/>


    <script>
        var header = document.getElementById("header");
        header.classList.add("photograph");
        
        var photoLink = document.getElementById("header-photo-link");
        photoLink.href = "https://500px.com/photo/1017605762";
        photoLink.innerHTML = "see <strong>Non Toccare</strong> at 500px";
    </script>




<script>
  var body = document.getElementById("body");
  body.classList.add("article-view");
</script>
  
<article id="post-2020/Automatic-Header-Images-in-Hexo" data-pagefind-body data-pagefind-meta="type:Article"
         class="article article-type-post h-entry">
  
  <div class="article-meta" data-pagefind-ignore>
    <div class="h-card p-author" style="display:none">
      <img class="u-photo" src="https://kiko.io/images/kristof-zerbe.png" alt="Kristof Zerbe" />
      <a class="p-name u-url" href="https://kiko.io" rel="author">Kristof Zerbe</a>
    </div>
    <a class="u-url u-uid" href="https://kiko.io/post/Automatic-Header-Images-in-Hexo/" style="display:none;">https://kiko.io/post/Automatic-Header-Images-in-Hexo/</a>
    <a href="/post/Automatic-Header-Images-in-Hexo/" class="article-date">
  
    <time class="published dt-published" data-pagefind-meta="date" 
          datetime="2020-06-22T15:49:16.000Z">22 Jun 2020</time>
  
</a>
    
  <div class="article-category p-category category-tools">
    <a class="article-category-link" href="/categories/Tools/">Tools</a> 
  </div>

  </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        


    <a class="article-anything" href="/series/a-new-blog">A New Blog</a>



        


  
    <h1 class="article-title p-name" data-pagefind-ignore
        data-title="Automatic Header Images in Hexo" 
        data-pagefind-meta="title[data-title]">
        
        <span>Automatic Header Images in Hexo</span>
    </h1>
  

        
    <h2 class="article-subtitle p-summary">
        Use static images randomly for posts via Hexo script
    </h2>

      </header>
    
    
    <div class="article-entry e-content">
      <p>Every article in this blog has an individual header image, to bring a little bit color into it. In this post I will show you how I deal with the images in using and automatic provisioning.</p>
<p>For serving these pictures I use a static folder, as described in <a href="/categories/Tools/A-New-Blog-Customizing-Hexo/">A New Blog: Customizing Hexo</a>. The hard work is done by the plugin <a href="https://github.com/niahoo/hexo-generator-copy">Hexo Generator Copy</a>, which copies the static files into the <code>public_dir</code> while generating.</p>
<span id="more"></span>

<h2 id="Static-File-Structure"><a href="#Static-File-Structure" class="headerlink" title="Static File Structure"></a>Static File Structure</h2><p>It is always advisable to provide one image for every device class, in order to save bandwidth and make the page loading as fast as possible:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">| static/</span><br><span class="line">   | photos/</span><br><span class="line">      | mobile/</span><br><span class="line">         | my-lovely-picture.jpg</span><br><span class="line">         | ...</span><br><span class="line">      | tablet/</span><br><span class="line">         | my-lovely-picture.jpg</span><br><span class="line">         | ...</span><br><span class="line">      | normal/</span><br><span class="line">         | my-lovely-picture.jpg</span><br><span class="line">         | ...</span><br></pre></td></tr></table></figure>

<p>The <code>mobile</code> images are at least 480 pixels wide, the <code>tablet</code> variants 768 pixels and the standard or <code>normal</code> one 1280 pixels.</p>
<p>While creating the JPG files, it is important to compress them with a tool like <a href="https://www.jpegmini.com/">JPEGMini</a> to save data while loading.</p>
<h2 id="Binding"><a href="#Binding" class="headerlink" title="Binding"></a>Binding</h2><p>In order to bind a picture with some additional information to an article, I have extended the Frontmatter of every post:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">photograph:</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">&#x27;my-lovely-image.jpg&#x27;</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&#x27;My Lovely Image&#x27;</span></span><br><span class="line">    <span class="attr">link:</span> <span class="string">&#x27;https://500px.com/photo/123456789/My-Lovely-Image&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="Usage-in-Theme"><a href="#Usage-in-Theme" class="headerlink" title="Usage in Theme"></a>Usage in Theme</h2><p>It relies on your Hexo theme, how to use a header image. In my theme (derived from the standard theme) I just added following code in the <code>article.js</code> to show the individual header image as a background image at the top of the article: </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!index &amp;&amp; post.photograph)&#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#banner</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-size</span>: cover;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">479px</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#banner</span> &#123; <span class="attribute">background-image</span>:</span></span><br><span class="line"><span class="language-css">      <span class="built_in">linear-gradient</span>(to bottom, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.75</span>) <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="number">75%</span>),</span></span><br><span class="line"><span class="language-css">      <span class="built_in">url</span>(<span class="string">&quot;/photos/mobile/&lt;%= post.photograph.file %&gt;&quot;</span>); &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">480px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">767px</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#banner</span> &#123; <span class="attribute">background-image</span>: </span></span><br><span class="line"><span class="language-css">      <span class="built_in">linear-gradient</span>(to bottom, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.75</span>) <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="number">75%</span>),</span></span><br><span class="line"><span class="language-css">      <span class="built_in">url</span>(<span class="string">&quot;/photos/tablet/&lt;%= post.photograph.file %&gt;&quot;</span>); &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">768px</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#banner</span> &#123; <span class="attribute">background-image</span>: </span></span><br><span class="line"><span class="language-css">      <span class="built_in">linear-gradient</span>(to bottom, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.75</span>) <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) <span class="number">75%</span>),</span></span><br><span class="line"><span class="language-css">      <span class="built_in">url</span>(<span class="string">&quot;/photos/normal/&lt;%= post.photograph.file %&gt;&quot;</span>); &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> photoLink = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;header-photo-link&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  photoLink.<span class="property">href</span> = <span class="string">&quot;&lt;%= post.photograph.link%&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  photoLink.<span class="property">innerHTML</span> = <span class="string">&quot;see &lt;strong&gt;&lt;%= post.photograph.name%&gt;&lt;/strong&gt; at 500px&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<p>Important part here is the use of the Frontmatter data <code>post.photograph.file</code> in the URL of the background CSS. The script fills the additional information into the absolute positioned element <code>header-photo-link</code> which is placed on top of the header.</p>
<h2 id="Pooling-Images"><a href="#Pooling-Images" class="headerlink" title="Pooling Images"></a>Pooling Images</h2><p>As it is time consuming to generate the necessary images, I have created another static folder <code>pool</code> to store prepared files and a text file with the additional information about the image. The structure of <code>pool</code> is different to <code>photos</code>, because of my image workflow and some limitations of automating the provisioning.</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">| static/</span><br><span class="line">   | pool/</span><br><span class="line">      | my-lovely-picture/</span><br><span class="line">         | meta.txt</span><br><span class="line">         | mobile.jpg</span><br><span class="line">         | normal.jpg</span><br><span class="line">         | tablet.jpg</span><br><span class="line">      | ...</span><br></pre></td></tr></table></figure>
<p>The <code>meta.txt</code> is a simple text file with two lines of text: first the name of the image and second the Url to link to, which will be inserted in the appropriate Frontmatter fields on creating a new post:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">My Lovely Image</span><br><span class="line">https://500px.com/photo/123456789/My-Lovely-Image</span><br></pre></td></tr></table></figure>

<h2 id="Automate-binding-and-provisioning-on-new-post"><a href="#Automate-binding-and-provisioning-on-new-post" class="headerlink" title="Automate binding and provisioning on new post"></a>Automate binding and provisioning on new post</h2><p>Developers are lazy and I do not make an exception. Having all these pool images and the meta informations, it would be nice, if Hexo just picks and processes one of the pool folders automatically, when I’m creating a new post by calling <code>hexo new &quot;My shiny new post&quot;</code> … and it was easier then I thought.</p>
<h3 id="Where-to-place-the-code-for-the-automatism"><a href="#Where-to-place-the-code-for-the-automatism" class="headerlink" title="Where to place the code for the automatism"></a>Where to place the code for the automatism</h3><p>Hexo has a great <a href="https://hexo.io/api/">API</a> to write <a href="https://hexo.io/plugins/">plugins</a> and it is not very difficult to setup a new plugin for this, which can be published to the <a href="https://www.npmjs.com/search?q=hexo">NPM registry</a>. But it is also possible to extend Hexo’s functionality by using a simple script. All you need is a <strong><code>script</code></strong> folder in the root of your Hexo project. Any JS files which is placed there, will be executed by Hexo.</p>
<p>Therefore, lets use a script called <code>\scripts\process-photo-on-new.js</code> …</p>
<h3 id="Things-an-automatism-should-do-Step-by-Step"><a href="#Things-an-automatism-should-do-Step-by-Step" class="headerlink" title="Things an automatism should do - Step by Step"></a>Things an automatism should do - Step by Step</h3><ol>
<li>Hook into the creation of a post</li>
<li>Pick randomly one of the pool images</li>
<li>Place the content of the meta.txt in the Frontmatter</li>
<li>Move the 3 device-dependend images into the <code>photos</code> folder</li>
</ol>
<h4 id="Step-1-Hook-into-the-creation-of-a-post"><a href="#Step-1-Hook-into-the-creation-of-a-post" class="headerlink" title="Step 1 - Hook into the creation of a post"></a>Step 1 - Hook into the creation of a post</h4><p>The needed event, the automatism can hook on, is:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;new&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>It will be executed every time you call the <code>hexo new</code> command. The parameter <code>data</code> is an object with two fields:</p>
<ul>
<li><p><code>path</code><br>Full path to the MD file of the new post</p>
</li>
<li><p><code>content</code><br>Complete content of the scaffold (template), which Hexo has used to create the new post; default is <code>/scaffolds/post.md</code>.</p>
</li>
</ul>
<p>By preloading the Hexo Front matter library and parsing <code>data.content</code> we get access to the definition of the new post:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> front = <span class="built_in">require</span>(<span class="string">&#x27;hexo-front-matter&#x27;</span>);</span><br><span class="line"></span><br><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;new&#x27;</span>, <span class="keyword">function</span>(<span class="params">post</span>)&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// parse article content</span></span><br><span class="line">  <span class="keyword">var</span> post = front.<span class="title function_">parse</span>(data.<span class="property">content</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Step-2-Pick-randomly-one-of-the-pool-images"><a href="#Step-2-Pick-randomly-one-of-the-pool-images" class="headerlink" title="Step 2 - Pick randomly one of the pool images"></a>Step 2 - Pick randomly one of the pool images</h4><p>There are some build-in variables to get the full path, for example, of the <code>source</code> folder, we can use to define the needed paths to the <code>pool</code> and the <code>photo</code> folder.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> front = <span class="built_in">require</span>(<span class="string">&#x27;hexo-front-matter&#x27;</span>);</span><br><span class="line"></span><br><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;new&#x27;</span>, <span class="keyword">function</span>(<span class="params">post</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> post = front.<span class="title function_">parse</span>(data.<span class="property">content</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// set the path variables</span></span><br><span class="line">  <span class="keyword">var</span> poolDir = hexo.<span class="property">source_dir</span>.<span class="title function_">replace</span>(<span class="string">&quot;\source&quot;</span>, hexo.<span class="property">config</span>.<span class="property">static_dir</span>) + <span class="string">&quot;pool&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> photosDir = hexo.<span class="property">source_dir</span>.<span class="title function_">replace</span>(<span class="string">&quot;\source&quot;</span>, hexo.<span class="property">config</span>.<span class="property">static_dir</span>) + <span class="string">&quot;photos&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Next, we need to preload the Hexo FS library for file access, to list the content of the <code>poolDir</code>, including the subfolders, and filter out the meta files. Out of the resulting array we pick one randomly, to use for the new post:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> front = <span class="built_in">require</span>(<span class="string">&#x27;hexo-front-matter&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;hexo-fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;new&#x27;</span>, <span class="keyword">function</span>(<span class="params">post</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> post = front.<span class="title function_">parse</span>(data.<span class="property">content</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> poolDir = hexo.<span class="property">source_dir</span>.<span class="title function_">replace</span>(<span class="string">&quot;\source&quot;</span>, hexo.<span class="property">config</span>.<span class="property">static_dir</span>) + <span class="string">&quot;pool&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> photosDir = hexo.<span class="property">source_dir</span>.<span class="title function_">replace</span>(<span class="string">&quot;\source&quot;</span>, hexo.<span class="property">config</span>.<span class="property">static_dir</span>) + <span class="string">&quot;photos&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// list all files</span></span><br><span class="line">  <span class="keyword">var</span> files = fs.<span class="title function_">listDirSync</span>(poolDir);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// filter the list to get meta files of each subfolder</span></span><br><span class="line">  <span class="keyword">var</span> metaFiles = files.<span class="title function_">filter</span>(<span class="function"><span class="params">file</span> =&gt;</span> file.<span class="title function_">match</span>(<span class="regexp">/.*[\\]meta.txt/g</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// pick one randomly</span></span><br><span class="line">  <span class="keyword">var</span> metaFile = metaFiles[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * metaFiles.<span class="property">length</span>)];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get the name of the picked photo (foldername)</span></span><br><span class="line">  <span class="keyword">var</span> photoName = metaFile.<span class="title function_">split</span>(<span class="string">&quot;\\&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Step-3-Place-the-content-of-the-meta-txt-in-the-Frontmatter"><a href="#Step-3-Place-the-content-of-the-meta-txt-in-the-Frontmatter" class="headerlink" title="Step 3 - Place the content of the meta.txt in the Frontmatter"></a>Step 3 - Place the content of the meta.txt in the Frontmatter</h4><p>Now we have to read the meta file, place the data in the Frontmatter and save the article file:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> front = <span class="built_in">require</span>(<span class="string">&#x27;hexo-front-matter&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;hexo-fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;new&#x27;</span>, <span class="keyword">function</span>(<span class="params">post</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> post = front.<span class="title function_">parse</span>(data.<span class="property">content</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> poolDir = hexo.<span class="property">source_dir</span>.<span class="title function_">replace</span>(<span class="string">&quot;\source&quot;</span>, hexo.<span class="property">config</span>.<span class="property">static_dir</span>) + <span class="string">&quot;pool&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> photosDir = hexo.<span class="property">source_dir</span>.<span class="title function_">replace</span>(<span class="string">&quot;\source&quot;</span>, hexo.<span class="property">config</span>.<span class="property">static_dir</span>) + <span class="string">&quot;photos&quot;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> files = fs.<span class="title function_">listDirSync</span>(poolDir);</span><br><span class="line">  <span class="keyword">var</span> metaFiles = files.<span class="title function_">filter</span>(<span class="function"><span class="params">file</span> =&gt;</span> file.<span class="title function_">match</span>(<span class="regexp">/.*[\\]meta.txt/g</span>));</span><br><span class="line">  <span class="keyword">var</span> metaFile = metaFiles[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * metaFiles.<span class="property">length</span>)];</span><br><span class="line">  <span class="keyword">var</span> photoName = metaFile.<span class="title function_">split</span>(<span class="string">&quot;\\&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// read meta file</span></span><br><span class="line">  <span class="keyword">var</span> meta = fs.<span class="title function_">readFileSync</span>(poolDir + <span class="string">&quot;\\&quot;</span> + metaFile);</span><br><span class="line">  <span class="keyword">var</span> metas = meta.<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// place file and additional info in the Frontmatter</span></span><br><span class="line">  post.<span class="property">photograph</span>.<span class="property">file</span> = photoName + <span class="string">&quot;.jpg&quot;</span>;</span><br><span class="line">  post.<span class="property">photograph</span>.<span class="property">name</span> = metas[<span class="number">0</span>];</span><br><span class="line">  post.<span class="property">photograph</span>.<span class="property">link</span> = metas[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// convert content back</span></span><br><span class="line">  postStr = front.<span class="title function_">stringify</span>(post);</span><br><span class="line">  postStr = <span class="string">&#x27;---\n&#x27;</span> + postStr;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// store article</span></span><br><span class="line">  fs.<span class="title function_">writeFile</span>(data.<span class="property">path</span>, postStr, <span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Step-4-Move-the-3-device-dependend-images-into-the-photos-folder"><a href="#Step-4-Move-the-3-device-dependend-images-into-the-photos-folder" class="headerlink" title="Step 4 - Move the 3 device-dependend images into the photos folder"></a>Step 4 - Move the 3 device-dependend images into the photos folder</h4><p>Last but not least, we have to move the pool images into the <code>photos</code> folder and remove the pool folder with all its processed content:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> front = <span class="built_in">require</span>(<span class="string">&#x27;hexo-front-matter&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;hexo-fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">hexo.<span class="title function_">on</span>(<span class="string">&#x27;new&#x27;</span>, <span class="keyword">function</span>(<span class="params">post</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> post = front.<span class="title function_">parse</span>(data.<span class="property">content</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> poolDir = hexo.<span class="property">source_dir</span>.<span class="title function_">replace</span>(<span class="string">&quot;\source&quot;</span>, hexo.<span class="property">config</span>.<span class="property">static_dir</span>) + <span class="string">&quot;pool&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> photosDir = hexo.<span class="property">source_dir</span>.<span class="title function_">replace</span>(<span class="string">&quot;\source&quot;</span>, hexo.<span class="property">config</span>.<span class="property">static_dir</span>) + <span class="string">&quot;photos&quot;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> files = fs.<span class="title function_">listDirSync</span>(poolDir);</span><br><span class="line">  <span class="keyword">var</span> metaFiles = files.<span class="title function_">filter</span>(<span class="function"><span class="params">file</span> =&gt;</span> file.<span class="title function_">match</span>(<span class="regexp">/.*[\\]meta.txt/g</span>));</span><br><span class="line">  <span class="keyword">var</span> metaFile = metaFiles[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * metaFiles.<span class="property">length</span>)];</span><br><span class="line">  <span class="keyword">var</span> photoName = metaFile.<span class="title function_">split</span>(<span class="string">&quot;\\&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> meta = fs.<span class="title function_">readFileSync</span>(poolDir + <span class="string">&quot;\\&quot;</span> + metaFile);</span><br><span class="line">  <span class="keyword">var</span> metas = meta.<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">  post.<span class="property">photograph</span>.<span class="property">file</span> = photoName + <span class="string">&quot;.jpg&quot;</span>;</span><br><span class="line">  post.<span class="property">photograph</span>.<span class="property">name</span> = metas[<span class="number">0</span>];</span><br><span class="line">  post.<span class="property">photograph</span>.<span class="property">link</span> = metas[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  postStr = front.<span class="title function_">stringify</span>(post);</span><br><span class="line">  postStr = <span class="string">&#x27;---\n&#x27;</span> + postStr;</span><br><span class="line"></span><br><span class="line">  fs.<span class="title function_">writeFile</span>(data.<span class="property">path</span>, postStr, <span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//copy normal image</span></span><br><span class="line">  fs.<span class="title function_">copyFile</span>(</span><br><span class="line">    poolDir + <span class="string">&quot;\\&quot;</span> + photoName + <span class="string">&quot;\\normal.jpg&quot;</span>,</span><br><span class="line">    photosDir + <span class="string">&quot;\\normal\\&quot;</span> + photoName + <span class="string">&quot;.jpg&quot;</span>,</span><br><span class="line">    <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//copy tablet image</span></span><br><span class="line">      fs.<span class="title function_">copyFile</span>(</span><br><span class="line">        poolDir + <span class="string">&quot;\\&quot;</span> + photoName + <span class="string">&quot;\\tablet.jpg&quot;</span>,</span><br><span class="line">        photosDir + <span class="string">&quot;\\tablet\\&quot;</span> + photoName + <span class="string">&quot;.jpg&quot;</span>,</span><br><span class="line">        <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//copy mobile image</span></span><br><span class="line">          fs.<span class="title function_">copyFile</span>(</span><br><span class="line">            poolDir + <span class="string">&quot;\\&quot;</span> + photoName + <span class="string">&quot;\\mobile.jpg&quot;</span>,</span><br><span class="line">            photosDir + <span class="string">&quot;\\mobile\\&quot;</span> + photoName + <span class="string">&quot;.jpg&quot;</span>,</span><br><span class="line">            <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">              <span class="comment">//remove processed pool folder</span></span><br><span class="line">              fs.<span class="title function_">rmdirSync</span>(poolDir + <span class="string">&quot;\\&quot;</span> + photoName);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Now it so easy to write a new post, because almost everything is set and I can concentrate on the article. Also, it is a nice surprise to see, which photo the script has chosen. The only thing I have to do from time to time, is to refill the pool folder with new images.</p>

    </div>
    
    <footer class="article-footer" data-pagefind-ignore>      
      
  <div class="article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blogging/" rel="tag">Blogging</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li></ul>  
  </div>

      
      <div class="article-permalink" id="article-permalink-cleblg8wb000gfoothhhy0in3">
    <input class="article-permalink-value" value="https://kiko.io/post/Automatic-Header-Images-in-Hexo/" 
           data-id="cleblg8wb000gfoothhhy0in3" data-title="Automatic Header Images in Hexo" />
    <a class="article-action action-copy"></a>
    <a class="article-action action-share"></a>
</div>
<script>
    window.addEventListener("load", () => {
        initPermalink("cleblg8wb000gfoothhhy0in3");
    });
</script>

      
    </footer>

  </div>

  
  

<div class="article-interaction" data-pagefind-ignore>

  <p>
    You can interact with this article (applause, criticism, whatever) 
    by mention it in one of your posts, which will be shown here as a  
    <a href="https://en.wikipedia.org/wiki/Webmention"><em>Webmention</em></a>, or 
    by leaving a good old <strong>comment</strong> with your GitHub account.
  </p>

</div>

<div class="article-webmentions" data-pagefind-ignore>
  <h2>Webmentions</h2>

  <div class="webmentions-placeholder">
    <p class="wm-placeholder">No Webmentions yet...</p>
  </div>

  <p class="webmention-form-info">
    In case your blog software can't send Webmentions, 
    you can use this form to submit me a mention of this article...
  </p>

  <form class="webmention-form" action="https://webmention.io/kiko.io>/webmention" name="webmention-form"
    method="post">
    <label for="webmention-form-source">Your Article URL:</label><br>
    <input class="webmention-form-source" type="url" name="source" placeholder="https://your-blog.com/your-article"
      required="">
    <input type="hidden" name="target" value="https://kiko.io/post/Automatic-Header-Images-in-Hexo/">
    <input type="submit" value="Send Webmention">
  </form>

  <script>
    window.addEventListener('load', function () {
      insertWebmentions('2020/automatic-header-images-in-hexo', 'https://kiko.io', 'Kristof Zerbe');
    });
  </script>

  
  <input type="hidden" name="alias" value="https://kiko.io/categories/Tools/Automatic-Header-Images-in-Hexo/">
  

</div>

<div class="article-comments" data-pagefind-ignore>
  <h2>Comments</h2>
  <div id="comment-placeholder"></div>
  <script>
    window.addEventListener('load', function () {
      insertUtterancesCommentBlock();
    });
  </script>
</div>
  
  <div class="article-related">
    <h2>Related</h2>
    <div class="archives">
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/post/Hexo-and-the-Dark-Mode-revised/">
        <img class="archive-article-photo" src="/photos/tablet/19-07 Schottland-0025.jpg" alt="Glencoe River" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/post/Hexo-and-the-Dark-Mode-revised/" class="archive-article-date">
  
    <time class="published dt-published" data-pagefind-meta="date" 
          datetime="2019-10-26T12:08:05.000Z">26 Oct 2019</time>
  
</a>
      
  <div class="archive-article-category category-tools">
    <a class="article-category-link" href="/categories/Tools/">Tools</a> 
  </div>

      


    <a class="archive-article-anything" href="/series/a-new-blog">A New Blog</a>



      


  
    <h1>
      <a class="archive-article-title"
         href="/post/Hexo-and-the-Dark-Mode-revised/">Hexo and the Dark Mode ... revised</a>
    </h1>
  

      
    <h2 class="archive-article-subtitle">
        Second approach to implement &#39;prefers-color-scheme&#39;
    </h2>
              
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Dark-Mode/" rel="tag">Dark Mode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stylus/" rel="tag">Stylus</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/post/A-New-Blog-Customizing-Hexo/">
        <img class="archive-article-photo" src="/photos/tablet/19-07 Schottland-0198.jpg" alt="Thistle Fence" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/post/A-New-Blog-Customizing-Hexo/" class="archive-article-date">
  
    <time class="published dt-published" data-pagefind-meta="date" 
          datetime="2019-09-25T10:00:00.000Z">25 Sep 2019</time>
  
</a>
      
  <div class="archive-article-category category-tools">
    <a class="article-category-link" href="/categories/Tools/">Tools</a> 
  </div>

      


    <a class="archive-article-anything" href="/series/a-new-blog">A New Blog</a>



      


  
    <h1>
      <a class="archive-article-title"
         href="/post/A-New-Blog-Customizing-Hexo/">A New Blog: Customizing Hexo</a>
    </h1>
  

      
    <h2 class="archive-article-subtitle">
        Part Two of having fun with Hexo and GitHub Pages
    </h2>
              
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blogging/" rel="tag">Blogging</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VS-Code/" rel="tag">VS Code</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/post/A-New-Blog-VS-Code-Hexo-and-GitHub-Pages/">
        <img class="archive-article-photo" src="/photos/tablet/19-07 Schottland-0405.jpg" alt="Tiny Scots 7" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/post/A-New-Blog-VS-Code-Hexo-and-GitHub-Pages/" class="archive-article-date">
  
    <time class="published dt-published" data-pagefind-meta="date" 
          datetime="2019-09-23T22:00:00.000Z">24 Sep 2019</time>
  
</a>
      
  <div class="archive-article-category category-tools">
    <a class="article-category-link" href="/categories/Tools/">Tools</a> 
  </div>

      


    <a class="archive-article-anything" href="/series/a-new-blog">A New Blog</a>



      


  
    <h1>
      <a class="archive-article-title"
         href="/post/A-New-Blog-VS-Code-Hexo-and-GitHub-Pages/">A New Blog: VS Code, Hexo and GitHub Pages</a>
    </h1>
  

      
    <h2 class="archive-article-subtitle">
        Part One of having fun with Hexo and GitHub Pages
    </h2>
              
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blogging/" rel="tag">Blogging</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VS-Code/" rel="tag">VS Code</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
    </div>
  </div>

  
<nav id="article-nav">
  
    <a href="/post/Meaningful-automatic-versioning-with-T4/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Meaningful automatic versioning with T4
        
      </div>
    </a>
  
  
    <a href="/post/Localization-with-resource-files-in-JavaScript-web-apps/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Localization with resource files in JavaScript web apps</div>
    </a>
  
</nav>

  

</article></main>
          
            <aside id="sidebar">
  
    <div class="widget-wrap">
    <div class="widget about h-card"><!--http://microformats.org/wiki/h-card-->
        <div class="avatar">
            <a href="/about"><img class="u-photo" src="https://kiko.io/images/kristof-zerbe.png" alt="Kristof Zerbe"></a>
            <a href="https://github.com/kristofzerbe" target="_blank" class="fab fa-github" rel="me"></a>
            <a href="https://www.xing.com/profile/Kristof_Zerbe" target="_blank" class="fab fa-xing" rel="me"></a>
            <a href="https://www.linkedin.com/in/kristof-zerbe-91012510/" target="_blank" class="fab fa-linkedin" rel="me"></a>      
            <a href="https://500px.com/kikon" target="_blank" class="fab fa-500px" rel="me"></a>
            <a href="https://indieweb.social/@kiko" target="_blank" class="fab fa-mastodon" rel="me"></a>
        </div>
        <h3 class="p-name">Kristof Zerbe</h3>
        <p class="p-note">
            <i class="p-role">Developer and Team Lead</i> located in <i class="p-locality">Wiesbaden</i>, <i class="p-country-name">Germany</i>
        </p>
        <a class="u-url u-uid" href="https://kiko.io" style="display:none;"></a>
    </div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            
              <a href="/post/Discoveries-23-UI-CSS/">Discoveries #23 -  UI/CSS</a>
            
          </li>
        
          <li>
            
              <a href="/post/Provide-Blog-Metadata-via-JSON-LD/">Provide Blog Metadata via JSON-LD</a>
            
          </li>
        
          <li>
            
              <a href="/post/Pagefind-UI-and-URL-Parameters/"><b>Update: </b>Pagefind UI and URL Parameters</a>
            
          </li>
        
          <li>
            
              <a href="/post/Radio-Garden/">Radio Garden</a>
            
          </li>
        
          <li>
            
              <a href="/post/Integration-of-Pagefind-in-Hexo/">Integration of Pagefind in Hexo</a>
            
          </li>
        
      </ul>
    </div>
  </div>

  

  <div class="widget widget-wrap">
    <p>
      Want more? This way ... to the <a href="/archives">archives</a>
    </p>
  </div>  
</aside>
          
        </div>
        <footer id="footer">
  
  <div class="outer">
    <div class="inner">

      <ul id="footer-dots">
        <li class="dot"><a href="https://search.google.com/search-console?resource_id=sc-domain%3Akiko.io" title="SearchConsole"></a></li>
        <li class="dot"><a href="https://kiko-io.pirsch.io/" title="Pirsch"></a></li>
        <li class="dot"><a href="https://webmentions.kiko.io" title="Webmention Analytics"></a></li>
      </ul>

      <div id="footer-info" class="footer-block">
        &copy; 2019-2023&nbsp;&nbsp;<a href="https://bio.link/kristof">Kristof Zerbe</a>
        <span class="dot-space">&#9679;</span>
        Powered by <a href="https://hexo.io/">Hexo</a> & <a href="https://github.com/">GitHub</a>  
        <div id="footer-links">
          
            <a href="/about">About</a>
            <span class="dot-space">&#9679;</span>
          
            <a href="/impressum">Impressum</a>
            <span class="dot-space">&#9679;</span>
          
            <a href="/atom.xml">RSS Feed</a>
            <span class="dot-space">&#9679;</span>
          
        </div>
      </div>

      <div id="webring">
        <a id="webring-prev" class="webring-link" href="https://xn--sr8hvo.ws/%F0%9F%A7%80%F0%9F%91%9F%F0%9F%8E%8A/previous">&nbsp;</a>
        <a href="https://xn--sr8hvo.ws">IndieWeb Webring&nbsp;🕸💍</a>
        <a id="webring-next" class="webring-link" href="https://xn--sr8hvo.ws/%F0%9F%A7%80%F0%9F%91%9F%F0%9F%8E%8A/next">&nbsp;</a>
      </div>

    </div>
  </div>
</footer>
      </div>
      <script>
  let isOffline = 'false' === 'true';
</script>


<script src="/js/jquery-3.6.0.min.js"></script>


<script src="/js/dist/bundle.min.js"></script>


<script src="/js/script.js"></script>


<script>
  // HEADER
  var header = {
    height: 0,
    top: 0,
    offset: 55,
    photoLinkOpacity: 0,
    titleFontSize: 0
  };

  function initHeader() {
    $("#header").css("height", ""); //reset inline css
    $("#header-title").css("top", "");
    $("#header-photo-link").css("opacity", "");
    $("#title-wrap").css("font-size", "");
    header.height = $("#header").height(); //set from given css
    header.top = parseFloat($("#header-title").css("top"));
    header.photoLinkOpacity = parseFloat($("#header-photo-link").css("opacity"));
    header.titleFontSize = parseFloat($("#title-wrap").css("font-size"));
    scrollHeader();
  }
  function scrollHeader() {
    var h = header.height - header.offset,
        st = $(document).scrollTop(),  
        d = (h - st),
        p = (d / h),
        hfs = header.titleFontSize / 5 * 3,
        jSide = $("aside");
    if (d > 0) {
      $("#header").css("height", d + header.offset + "px");
      $("#header-photo-link").css("opacity", header.photoLinkOpacity * p);
      $("#banner").css("opacity", p);
      $("#title-wrap").css("font-size", header.titleFontSize - ( header.titleFontSize / 3) * (1 - p) );
      $("#header-title").css("top", header.top - (hfs * (1 - p)) + "px");
      $("#subtitle").css("opacity", p);
      jSide.css("max-width", "").css("position", "").css("top", "");
    } else {
      $("#header").css("height", header.offset + "px");
      $("#header-photo-link").css("opacity", 0);
      $("#banner").css("opacity", 0);
      $("#title-wrap").css("font-size", header.titleFontSize - ( header.titleFontSize / 3) * (1) );      
      $("#header-title").css("top", header.top - (hfs * (1)) + "px");      
      $("#subtitle").css("opacity", 0);
      if (window.matchMedia("screen and (min-width: 768px)").matches & window.innerHeight > (jSide.height() + 50)) {
        jSide.css("max-width", $("aside").width()).css("position", "fixed").css("top", "50px");
      }
    }    
  }

  // IMAGE VIEWPORT
  function isVisibleInViewPort(e) {
    var viewTop = $(window).scrollTop();
    var viewBottom = viewTop + $(window).height();
  
    var eTop = $(e).offset().top;
    var eBottom = eTop + $(e).height();
  
    return ((eBottom <= viewBottom) && (eTop >= viewTop));
  }
  function initViewportImage() {
    $(".article-photo, .archive-article-photo, .card-img, .img-link").each(function() {
      if (isVisibleInViewPort($(this))) {
        $(this).addClass("in-view");
      } else {
        $(this).removeClass("in-view");
      }
    });
  }

  // HORIZONTAL MENU SCROLL
  function watchNavMenuScroll() {
    const nav = document.querySelector('#header-nav');
    const menu = nav.querySelector('.menu');
    const firstMenuItem = menu.querySelector('.menu-item:first-child');
    const lastMenuItem = menu.querySelector('.menu-item:last-child');

    firstMenuItem.setAttribute("data-scim", "start");
    lastMenuItem.setAttribute("data-scim", "end");
    
    let observer = new IntersectionObserver((entries, observer) => { 
      entries.forEach(entry => {

        let scimElement = document.querySelector("#header-nav-" + entry.target.getAttribute("data-scim"));
        if (entry.intersectionRatio != 1) { 
          scimElement.classList.add("show");
        } else {
          scimElement.classList.remove("show");
        }
      });
    }, {threshold: 1});
    
    observer.observe(firstMenuItem);
    observer.observe(lastMenuItem);
  }

  $(window).on('scroll', function() {
    scrollHeader();
    initViewportImage();
  });

  $(window).on('resize', function() {
    initHeader();
    initViewportImage();
  });

  initHeader();
  initViewportImage();
  watchNavMenuScroll();

  // BACK-TO-TOP
  addBackToTop({
    diameter: 30
  })

  // AUTOTYPING
  setTimeout(function() {
    $("#title-wrap").empty();
    new AutoTyping({
      id: 'title-wrap',
      typeText: ['kiko.io'],
      textColor: '#fff',
      typeSpeed: 100,
      typeDelay: 100,
      showCursor: false,
      delete: false,
      typeInfinity: false
    }).init();
  }, 1000);

  //MEDIUM-ZOOM
  mediumZoom(document.querySelectorAll('img.zoom'), {
    background: 'rgba(55, 55, 55, 0.5)',
    margin: 20
  });

  //SCROLL-TIMELINE
  // Create ScrollTimeline
  const myScrollTimeline = new ScrollTimeline({
    source: document.scrollingElement,
    scrollSource: document.scrollingElement, // For legacy implementations
    orientation: 'block',
      scrollOffsets: [
          new CSSUnitValue(0, 'percent'),
          new CSSUnitValue(100, 'percent'),
      ],
  });

  // Animate Progress Bar on Scroll
  document.querySelector("#progress").animate(
    {
      transform: ["scaleX(0)", "scaleX(1)"]
    },
    { 
      duration: 1, 
      fill: "forwards", 
      timeline: myScrollTimeline 
    }
  );
</script>


  <script>
    //HOOK LINKS FOR PIRSCH EVENT...

    //FEED
    let feed = document.querySelector("#nav-rss-link a.sub-nav-link");
    if (feed) feed.addEventListener("click", function() { pirsch('Feed clicked') });

    //VSCODE
    let vscode = document.querySelectorAll(".brand-links .vscode").forEach(link => link.addEventListener("click", function() { pirsch("Open in VSCode"); }));
    
  </script>  

    </div>
  </div>
</body>
</html>