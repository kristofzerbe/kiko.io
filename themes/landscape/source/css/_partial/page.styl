.page-title
  @extend $title
  button.title-command
    display: inline-block
    position: relative
    left: 6px
    top: 2px
    width: 20px
    height: 20px
    background: transparent
    border: none
    transition: all ease-out 0.2s
    opacity: 0.25
    &:hover
      opacity: 0.75
    &:before
      display: block
      content: ""
      background-repeat: no-repeat
      background-position: 0 0
      background-size: 20px
      width: 20px
      height: 20px
      filter: invert(0)
      transition: all ease-out 0.2s
      /[data-theme="dark"] &
        filter: invert(1)
  button.title-command.switch-condensed
    &:before
      //see /images/icons/minimize.svg
      background-image: url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xml:space='preserve' viewBox='0 0 24 24' fill='none'%3E%3Cpath stroke='%23000000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 14h4m0 0v4m0-4-6 6m14-10h-4m0 0V6m0 4 6-6'/%3E%3C/svg%3E");
    &.condensed
      &:before
        //see /images/icons/maximize.svg
        background-image: url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xml:space='preserve' viewBox='0 0 24 24' fill='none'%3E%3Cpath stroke='%23000000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 20H4m0 0v-4m0 4 6-6m6-10h4m0 0v4m0-4-6 6'/%3E%3C/svg%3E");

.page-title-svg-link
  display: block
  position: absolute
  right: 0
  top: -4px
  background-repeat: no-repeat
  background-size: cover
  width: 36px
  height: 36px
  opacity: 0.8
  /[data-theme="dark"] &
    filter:invert(1)

.page-subtitle
  font-size: font-pagetitle-size
  line-height: line-height-title
  text-transform: uppercase
  color: color-grey
  /[data-theme="dark"] &
    color: dark-color-grey

.page-subtitle
  font-weight: font-weight-normal
  margin-top: -(small-margin)
  margin-bottom: default-margin

.page-nav-index
  float: right
  list-style-type: none
  display: flex
  flex-direction: row
  flex-wrap: wrap
  justify-content: flex-end
  margin: 0 (gutter-width * -1)
  @media mq-normal
    margin: 0
  a
    flex: 0 0 auto
    display: block
    margin: 0
    padding: (default-padding-vert / 3) (default-padding / 2)
    font-size: 15px
    font-weight: 500
    text-transform: uppercase
    text-decoration: none
    opacity: 0.75
    box-shadow: inset 0px 32px 8px -32px rgba(0,0,0,0.5)
    // box-shadow: inset -2px -8px 14px -14px rgba(0,0,0,0.5)
    background-color: color-border
    color: color-button-link
    /[data-theme="dark"] &
      border-color: dark-color-border
      background-color: dark-color-border
      color: dark-color-button-link
    &.current, &:hover
      box-shadow: none
      // opacity: 1
      background-color: transparent
      /[data-theme="dark"] &
        border-color: dark-color-border
    &.current
      font-size: 1.2rem
    &:hover
      color: var(--color-accent1)
    &.prev:before, &.next::after
      font-size: 0.9rem
    &.prev:before
      content: "\276E"
      margin-right: 10px
    &.next::after
      content: "\276F"
      margin-left: 10px

.page-content
  @extend $base-style
  hr:not(.divider)
    padding-bottom: 0rem
    border-bottom-style: solid
    border-bottom-width: 1px
    border-bottom-color: color-block
    /[data-theme="dark"] &
      border-bottom-color: dark-color-border
    margin-bottom: 2rem
    margin-top: 0
    background: none
    opacity: 1
    height: 0;
  a:not([class])
    text-decoration: none
    border-bottom: color-border-3d 1px dashed
    /[data-theme="dark"] &
      border-bottom: dark-color-border-3d 1px dashed
    &:hover
      border-bottom: var(--color-accent1) 1px solid
  p
    margin: medium-margin 0 (default-margin)
  p.limit-4-lines
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 4;
    line-clamp: 4;
    overflow: hidden;
  p:first-of-type
    margin-top: 0
  .float-element 
    display: block
    float: right
    padding-left: default-padding
    padding-bottom: default-padding 
  section
    @extend $block-inner
    position: relative
    margin: default-margin 0
    &:first-child
      margin-top: 0
    padding: default-padding
    color: color-default
    /[data-theme="dark"] &
      color: dark-color-default
    figure, pre
      margin-left: -28px !important /* HACK */
      margin-right: -28px !important /* HACK */
    p, table
      margin: default-margin 0
      line-height: line-height-text
    p:first-child
      margin-top: 0
    p:last-child
      margin-bottom: 0
    h1:first-child, h2:first-child
      margin-top: 0
    h1, h2, h3, h5
      font-weight: font-weight-bold
    h4, h6
      font-weight: font-weight-normal
    h1, h2, h3, h4, h5, h6
      line-height: line-height-title
      margin: medium-margin 0 (default-margin)
    ul, ol, dl
      margin-top: line-height
      margin-bottom: line-height
    fieldset
      span.result
        position: absolute
        right: 0
      span.result.error
        color: color-error
    time
      font-size: font-size-small
      margin-bottom: -(default-margin)
      position: absolute
      color: color-header
      /[data-theme="dark"] &
        color: dark-color-header
      &.raised
        display: block
        position: absolute
        top: 0
        left: 0
  section.flex
    display: flex
    flex-wrap: wrap
    fieldset
      flex: 1 1 auto
    fieldset.gap
      margin-right: default-margin
      margin-bottom: auto;
    fieldset.max
      max-width: max-content
    @media mq-mobile
      fieldset.gap
        width: 100%
        margin-right: auto;
        margin-bottom: medium-margin
      fieldset.max
        max-width: 25%
      fieldset.max.expand
        max-width: 75%

  .view-bar
    margin: default-margin (medium-margin / 4) default-margin
    line-height: 1.8rem
    .view-count
      font-weight: font-weight-bold
    input[type=radio]
      display: none
    input[name="view-filter-status"], 
    input[name="view-filter-type"],
    input[name="view-presentation"],
    input[name="view-sort-field"],
    input[name="view-sort-order"]
      + label
        font-weight: font-weight-normal
        cursor: pointer
        display: none
      &:checked
        + label
          display: inline-block

  .view
    margin-bottom: double-margin
    .card
      @extend $block-inner
      @extend $base-style
      transition: all ease-out 0.2s
      transform: scale(1)
      opacity: 1
      color: color-default
      border: none
      /[data-theme="dark"] &
        color: dark-color-default
      a
        text-decoration: none
        display: inline-block
        &.break
          overflow-wrap: break-word
          word-wrap: break-word
          word-break: break-all /* important to break collection url's */
      .card-img
        display: block
        overflow: hidden
        position: relative
        img
          //@extend $inview-image
          height: 100%
          width: 100%
          background-color: color-background
          /[data-theme="dark"] &
            background-color: dark-color-background
      h3
        line-height: line-height-subtitle
        font-weight: font-weight-bold
        a
          text-decoration: none
          color: color-default
          /[data-theme="dark"] &
            color: dark-color-default
          &:hover
            color: var(--color-accent1)
      &:hover
        transform: scale(1) translateY(-1px)
        box-shadow: box-shadow color-border-3d
        /[data-theme="dark"] &
          box-shadow: dark-box-shadow dark-color-base
      // .card-img.in-view
      //   img
      //     @extend $inview-image-visible

    .card.collection
      .card-img
        border-radius: border-radius border-radius 0 0
        img
          border-bottom: 1px color-background solid
          /[data-theme="dark"] &
            border-bottom: 1px dark-color-background solid
      div.tags
        display: flex
        flex-flow: row wrap
        span, a.tag
          display: block
          border-radius: border-radius-small
          padding: 3px 9px
          margin: 0 small-margin small-margin 0
          text-transform: uppercase
          font-size: 0.75rem
          background-color: color-light
          color: color-grey
          /[data-theme="dark"] &
            background-color: dark-color-light
            color: dark-color-grey
    
    .card.photo
      display: grid
      .card-img.spotlight
        cursor: zoom-in
      span.pre-title
        font-size: font-size-small;
        opacity: 0.5
        em
          display: inline-block
      .status
        display: block
        white-space: nowrap
        overflow: hidden
        text-overflow: ellipsis
        font-size: font-size-medium
        padding: (default-padding-vert / 3) (default-padding / 2)
        opacity: 0.75
        border-radius: border-radius border-radius 0 0
        color: white
        &.used.start
          background-color: rgba(187, 94, 8, 0.5)
        &.used.page
          background-color: rgba(187, 58, 8, 0.5)
        &.used.post
          background-color: rgba(65, 117, 212, 0.6)
        &.used.notes
          background-color: rgba(135, 115, 0, 0.5)
        &.used.dynamic
          background-color: rgba(93, 65, 167 ,0.5)
        &.used.anything
          background-color: rgba(95, 158, 160, 0.8)
        &.used.draft
          background-color: rgba(240, 75, 75 ,0.6)
        &.pool
          background-color: rgba(95, 95, 95, 0.6)
        &.reserve
          background-color: rgba(130, 90, 90, 0.6)
        em
          opacity: 0.5
      &:hover
        .status
          opacity: 1
    .card.hide
    .card.trans
      transform: scale(0)
      opacity: 0

  .list
    display: flex
    flex-direction: column
    flex-wrap: nowrap
    .card
      padding: small-margin
      padding-bottom: 0
      margin: (default-margin / 2) 0
      display: grid
      .card-img
        grid-area: image
        height: 90px
        margin: -(small-margin)
        margin-bottom: 0
        border-radius: 0 0 0 border-radius
      h3
        margin: medium-margin 0 0
        font-size: font-subtitle-size
        grid-area: title
        overflow: hidden
        a
          display: block
          white-space: nowrap
          overflow: hidden
          text-overflow: ellipsis
      small, p
        display: none

    .card.collection
      grid-template-rows: 45px auto
      grid-template-columns: 100px auto
      grid-template-areas: "image title" "image tags"
      .card-img
        width: 90px
        border-radius: border-radius 0 0 border-radius
      h3
        margin-top: small-margin
      div.tags
        grid-area: tags
        margin: 0

    .card.photo
      grid-template-rows: auto auto 1fr
      grid-template-columns: calc(150px + 0.25rem) auto
      grid-template-areas: "status status" "image link" "image title"
      .card-img
        width: 150px
      h3
        margin: 0
        align-self: center
      div.card-links
        display: none
      span.pre-title
        grid-area: link
        line-height: 1rem
        padding-top: 0.25rem
      .status
        grid-area: status
        margin: -(small-margin)
        margin-bottom: (small-margin)

  .grid
    display: grid
    grid-gap: 2em
    grid-template-columns: repeat(auto-fill, minmax(220px,1fr))
    .card
      padding: (default-padding / 2)
      .card-img
        margin: -(default-padding / 2)
        margin-bottom: 0
        height: auto
        img
          width: 100%
          height: 100%
          object-fit: cover
      h3
        margin: medium-margin 0 0
        font-size: font-subtitle-size
        
    .card.collection
      div.tags
        margin: default-margin 0 small-margin

    .card.photo
      grid-template-areas: "status" "image" "text"
      .card-img
        grid-area: image
        img
          height: 160px
      h3
        min-height: 3rem /* HACK */
      div.card-links
        padding-top: (small-margin / 2)
        min-height: 2rem /* HACK */
        a.syndication-link /* on extension see config.syndication_hosts */
          position: relative
          width: 16px
          height: 16px
          padding-inline-end: 4px
          background-size: 14px
          background-repeat: no-repeat 
          background-position: 0
          filter: grayscale(1)
          /[data-theme="dark"] &
            filter: grayscale(1) invert(1)
          &:hover
            filter: grayscale(0)
            opacity: 1 !important
          &.host-500px
            background-image: var(--brand-500px)
            opacity: 0.33
            /[data-theme="dark"] &
              &:hover
                filter: invert(1)
          &.host-flickr
            background-image: var(--brand-flickr)
            opacity: 0.33
            background-size: 16px
            margin-inline-start: -1px
            padding-inline-end: 7px
          &.host-unsplash
            background-image: var(--brand-unsplash)
            opacity: 0.25
            background-size: 12px
            /[data-theme="dark"] &
              &:hover
                filter: invert(1)
          &.host-pixelfed
            background-image: var(--brand-pixelfed)
            opacity: 0.4
            /[data-theme="dark"] &
              background-image: url(/images/icons/pixelfed_invert.svg)
              filter: grayscale(1) invert(0)
              &:hover
                filter: grayscale(0)
        span.info-location
          display: block
          float: right
          opacity: 0.25
          width: 16px
          height: 16px
          img
            width: 16px
            height: 16px

      span.pre-title
        display: block
        margin-top: small-margin
      .status
        grid-area: status
        margin: -(default-padding / 2)
        margin-bottom: (default-padding / 2)
    
  .masonry
    display: block
    .card.photo
      box-shadow: none
      &:hover
        box-shadow: none
        transform: scale(1) translateY(0) !important
      .card-img
        display: flex
        width: auto
        //filter: grayscale(0) contrast(1) !important
        img 
          border-radius: border-radius-small
          width: 100%
      div.card-links
        display: none
      span.pre-title
        display: none
      .status
        display: none !important
      h3
        display: none

  section.about
    div.career
      width: 150px
      margin: 0 0 20px 20px
      float: right
      img 
        width: 150px
        float: left
    img.link
      float: left
      margin: 6px 18px 0 0
      height: 36px
      width: 36px
      & + p
        white-space: nowrap
        overflow: hidden
        text-overflow:ellipsis
    img.link.invert
      /[data-theme="dark"] &
        filter: invert(1)

  section.feeds
    .feed-group
      margin: default-margin 0 0
      > strong
        display: block
        margin-bottom: small-margin
      a
        display: grid
        grid-template-columns: 36px max-content auto
        grid-template-rows: auto
        grid-template-areas: "icon link info" ". size ."
        padding: small-margin
        text-decoration: none
        align-items: center
        &:hover
          background-color: color-hover-background
          /[data-theme="dark"] &
            background-color: dark-color-hover-background
        span
          grid-area: link
        em
          grid-area: size
      a.atom
        color: #4b81d1
      a.rss
        color: #56a5d5
      a.json
        color: #bf403b
      a:before
        grid-area: icon
        display: inline-block
        content: ""
        background-repeat: no-repeat
        background-size: 24px 24px
        width: 24px
        height: 24px
      a.atom:before
        background-image: url(/images/icons/atom.svg)
      a.rss:before
        background-image: url(/images/icons/rss_blue.svg)
      a.json:before
        background-image: url(/images/icons/jsonfeed.svg)
      a.site-default:after
        grid-area: info
        display: inline-block
        content: "- site's default"
        margin-left: small-margin
        font-size: font-size-small
  section.mf2feed
    .h-feed
      .h-entry
        margin-block: medium-margin
        details
          // &[open]
          summary
            cursor pointer
            &::marker
              position: absolute
              top: 0
            img
              max-width: 100%
              @media mq-mobile
                max-width: 92%;
          header, article
            padding-block-start: medium-margin
            padding-inline: medium-margin
            @media mq-mobile
              padding-inline: 0
          header              
            a
              text-decoration: none
              &:hover
                text-decoration: underline
            time
              position: unset
              margin-block: small-margin
            h3, h4
              line-height: line-height-text
            h3
              margin-block: small-margin
            h4
              font-size: font-subtitle-size
              @media mq-normal
                margin-block-end: 0
          article
              padding-block-start: default-padding-vert
              @media mq-mobile
                padding-block-start: small-padding
            img
              max-width: 100%
          hr
            @media mq-normal
              margin-block: medium-margin block-margin

  section.meta
    ul
      margin: 0 0 0 0
      list-style: none
      display: flex
      flex-direction: column
      gap: 1rem
      li
        display: flex
        flex-direction: column
        gap: 0.2rem
        label
          font-family: font-mono
          font-size: font-size-tiny
          text-transform: uppercase
          opacity: 0.5
          line-height: normal
        span
          line-height: normal

  section.image
    background: transparent
    box-shadow: none
    padding: 0
    position relative
    img
      @extend $block-inner
      width: 100%
      height: auto
      box-shadow: 1px 1px 12px 0px #888 !important
      /[data-theme="dark"] &
        box-shadow: 1px 1px 12px 0px #000 !important
    & #photo
      cursor: help
    small
      position: absolute
      right: 0
      bottom: -1rem
      opacity: 0.33
      font-size: 0.66rem

  section#color-list
    display: none
    background: transparent
    box-shadow: none
    padding: 0
    position relative
    font-size: font-size-medium
    ul
      display: flex
      gap: 1rem
      margin: 0
      flex-wrap: wrap
      flex-direction: row
      @media mq-medium
        flex-wrap: nowrap
        flex-direction: column
      li
        display: grid;
        grid-template-columns: auto 64px
        grid-template-rows: repeat(3,1fr)
        align-items: center
        padding: 1rem
        gap: 0 2rem
        width: auto
        position: relative
        border-radius: border-radius
        background: #fff
        box-shadow: 1px 2px 20px 5px #ddd
        /[data-theme="dark"] &
          background: #333
          box-shadow: 1px 2px 40px 1px #111
        span
          grid-area: 1/1/2/2
          min-width: 5rem
        strong
          grid-area: 2/1/3/2
          min-width: 130px
        em
          grid-area: 3/1/4/2
        div
          grid-area: 1/2/4/3
          width: 6.5rem
          height: 6.5rem
          position: absolute
          top: -1rem
          right: -1rem
          border-radius: 0 border-radius border-radius 0
  #map
    /[data-theme="dark"] &
      .leaflet-layer,
      .leaflet-control-zoom-in,
      .leaflet-control-zoom-out,
      .leaflet-control-attribution
        filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);
    &.page-map
      height: 320px
      margin: medium-margin -2rem small-margin
    &.inline-map
      border-radius: border-radius
      height: calc(80vh)
      width: 100%
      margin: 0 0 block-margin 0
    .photoPopup
      .leaflet-popup-content-wrapper, .leaflet-popup-tip
        border-radius: border-radius
        background-color: color-background
        color: color-foreground
        /[data-theme="dark"] &
          background-color: dark-color-background
          color: dark-color-foreground
      .leaflet-popup-content-wrapper
        .leaflet-popup-content
          ul
            margin: small-margin 0 0 0
            list-style-type: none
          li
            line-height: line-height
            a
              transition: all ease-out 0.2s
              color: var(--color-accent1)
            span
              opacity: 0.5