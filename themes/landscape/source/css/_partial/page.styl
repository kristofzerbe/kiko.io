.page-title
  font-size: font-pagetitle-size
  font-weight: font-weight-bold
  line-height: line-height-title
  text-transform: uppercase
  margin: default-padding 0 
  color: color-default
  /[data-theme="dark"] &
    color: dark-color-default

.page-title-svg-link
  display: block
  position: absolute
  right: 0
  top: -4px
  background-repeat: no-repeat
  background-size: cover
  width: 36px
  height: 36px
  opacity: 0.8
  /[data-theme="dark"] &
    filter:invert(1)

.page-subtitle, .page-backlink
  font-size: font-pagetitle-size
  line-height: line-height-title
  text-transform: uppercase
  color: color-grey
  /[data-theme="dark"] &
    color: dark-color-grey

.page-subtitle
  font-weight: font-weight-normal
  margin-top: -(small-margin)
  margin-bottom: default-margin

.page-backlink
  position: relative
  display: inline-block
  margin: default-margin 0 0 default-margin
  text-decoration: none
  font-weight: font-weight-bold
  opacity: 0.75
  &:hover
    color: color-link
    /[data-theme="dark"] &
      color: dark-color-link
  &:before
    position: absolute
    left: -(default-margin)
    top: 0.1rem;
    font-family: fa-icons
    font-weight: font-weight-normal
    width: icon-home-size
    height: icon-home-size
    content: icon-chevron-left

.page-index-list
  list-style-type: none
  display: flex
  flex-direction: row
  flex-wrap: wrap
  a
    flex: 0 0 auto
    display: block
    margin: 0 medium-margin medium-margin 0
    padding: (default-padding-vert / 3) (default-padding / 3)
    font-size: font-subtitle-size
    text-decoration: none
    border-radius: border-radius-small
    border-width: 1px
    border-style: solid
    border-color: color-border
    background-color: color-border
    color: color-button-link
    /[data-theme="dark"] &
      border-color: dark-color-border
      background-color: dark-color-border
      color: dark-color-button-link
    &.current
      font-size: font-subtitle-size
      font-weight: font-weight-bold
      background-color: transparent
      border-color: color-border
      /[data-theme="dark"] &
        border-color: dark-color-border
      &:before
        display: inline-block
        font-size: inherit
        text-rendering: auto
        -webkit-font-smoothing: antialiased
        font-family: fa-icons
        content: icon-minimize
      &.condensed
        &:before
          content: icon-maximize
    &:not(.current):hover
      border-color: color-link
      background-color: color-link
      color: color-logo
      /[data-theme="dark"] &
        border-color: dark-color-base
        background-color: dark-color-base
        color: dark-color-logo

.page-content
  @extend $base-style
  a:not([class])
    text-decoration: none
    border-bottom: transparent 1px solid
    &:hover
      border-bottom: color-link 1px solid
      /[data-theme="dark"] &
        border-bottom: dark-color-link 1px solid
  p
    margin: medium-margin 0 (default-margin)
  .float-element 
    display: block
    float: right
    padding-left: default-padding
    padding-bottom: default-padding 
  section
    @extend $block-inner
    position: relative
    margin: default-margin 0
    padding: default-padding
    color: color-default
    /[data-theme="dark"] &
      color: dark-color-default
    figure, pre
      margin-left: -28px !important /* HACK */
      margin-right: -28px !important /* HACK */
    p, table
      margin: default-margin 0
      line-height: line-height-text
    p:first-child
      margin-top: 0
    p:last-child
      margin-bottom: 0
    h1:first-child
      margin-top: 0
    h1, h2, h3, h5
      font-weight: font-weight-bold
    h4, h6
      font-weight: font-weight-normal
    h1, h2, h3, h4, h5, h6
      line-height: line-height-title
      margin: medium-margin 0 (default-margin)
    ul, ol, dl
      margin-top: line-height
      margin-bottom: line-height
    fieldset
      span.result
        position: absolute
        right: 0
      span.result.error
        color: color-error
    time
      font-size: font-size-small
      margin-bottom: -(default-margin)
      position: absolute
      color: color-header
      /[data-theme="dark"] &
        color: dark-color-header
      &.raised
        display: block
        position: absolute
        top: 0
        left: 0
  section.flex
    display: flex
    flex-wrap: wrap
    fieldset
      flex: 1 1 auto
    fieldset.gap
      margin-right: default-margin
      margin-bottom: auto;
    fieldset.max
      max-width: max-content
    @media mq-mobile
      fieldset.gap
        width: 100%
        margin-right: auto;
        margin-bottom: medium-margin
      fieldset.max
        max-width: 25%
      fieldset.max.expand
        max-width: 75%

  .view-bar
    margin: block-margin (medium-margin / 4) medium-margin
    display: flex
    flex-direction: row
    justify-content: flex-end
    gap: 1rem
    .bar-info
      margin-right: auto
      font-weight: font-weight-bold
      .info-des
        font-weight: font-weight-normal
    .bar-cmd
      margin-left: default-margin
      input[type=radio]
        display: none
        + label
          padding-left: 8px
          font-size: 1.66rem
          opacity: 0.25
          cursor: pointer
          &::before
            display: inline-block
            font-size: inherit
            text-rendering: auto
            -webkit-font-smoothing: antialiased
        &:checked
          + label
            opacity: 1
      input#switch-grid
        + label
          &::before
            font-family: fa-icons
            content: icon-grid
      input#switch-list
        + label
          &::before
            font-family: fa-icons
            content: icon-list
      input#switch-masonry
        + label
          &::before
            font-family: fa-icons
            content: icon-masonry
      input#filter-all
        + label
          &::before
            font-family: fa-icons
            content: icon-circle
      input#filter-pool
        + label
          &::before
            font-family: fa-icons
            content: icon-circle-notch
      input#filter-used
        + label
          &::before
            font-family: fa-icons
            content: icon-circle-dot
      input[name="view-filter"]
        + label
          display: none
        &:checked
          + label
            display: inline-block

  .view
    margin-bottom: double-margin
    .card
      @extend $block-inner
      @extend $base-style
      transition: all ease-out 0.2s
      transform: scale(1)
      opacity: 1
      color: color-default
      border: none
      /[data-theme="dark"] &
        color: dark-color-default
      a
        text-decoration: none
        display: inline-block
        &.break
          overflow-wrap: break-word
          word-wrap: break-word
          word-break: break-all /* important to break tiny-tools url's */
      .card-img
        display: block
        overflow: hidden
        position: relative
        filter: grayscale(0.5) contrast(0.5)
        img
          height: 100%
          width: 100%
          background-color: color-background
          /[data-theme="dark"] &
            background-color: dark-color-background
      h3
        line-height: line-height-title
        font-weight: font-weight-bold
        a
          text-decoration: none
          color: color-default
          /[data-theme="dark"] &
            color: dark-color-default
          &:hover
            color: color-link
            /[data-theme="dark"] &
              color: dark-color-link
      &:hover
        transform: scale(1) translateY(-1px)
        box-shadow: box-shadow color-border-3d
        /[data-theme="dark"] &
          box-shadow: dark-box-shadow dark-color-base
      .card-img.in-view
        filter: grayscale(0) contrast(1)

    .card.tiny-tools
      .card-img
        border-radius: border-radius border-radius 0 0
        img
          border-bottom: 1px color-background solid
          /[data-theme="dark"] &
            border-bottom: 1px dark-color-background solid
      div.tags
        display: flex
        flex-flow: row wrap
        span, a.tag
          display: block
          border-radius: border-radius-small
          padding: 3px 9px
          margin: 0 small-margin small-margin 0
          text-transform: uppercase
          font-size: 0.75rem
          background-color: color-light
          color: color-grey
          /[data-theme="dark"] &
            background-color: dark-color-light
            color: dark-color-grey
    
    .card.photo
      .card-img.spotlight
        cursor: zoom-in
      span.pre-title
        font-size: font-size-small;
        opacity: 0.5
      .status
        display: block
        white-space: nowrap
        overflow: hidden
        text-overflow: ellipsis
        padding: (default-padding-vert / 3) (default-padding / 2)
        opacity: 0.75
        border-radius: border-radius border-radius 0 0
        color: white
        &.used.home
          background-color: rgba(221, 120, 26, 0.5)
        &.used.post
          background-color: rgba(65, 117, 212, 0.6)
        &.used.page
          background-color: rgba(95, 158, 160, 0.9)
        &.used.draft
          background-color: rgba(240, 75, 75 ,0.5)
        &.used.dynamic
          background-color: rgba(93, 65, 167 ,0.5)
        &.used.anything
          background-color: rgba(163, 55, 32 ,0.5)
        &.used.notes
          background-color: rgba(122, 75, 20, 0.5)
        &.pool
          background-color: rgba(95, 95, 95, 0.6)
        em
          opacity: 0.5
      &:hover
        .status
          opacity: 1
    .card.hide
    .card.trans
      transform: scale(0)
      opacity: 0

  .list
    display: flex
    flex-direction: column
    flex-wrap: nowrap
    .card
      padding: small-margin
      padding-bottom: 0
      margin: (default-margin / 2) 0
      display: grid
      .card-img
        grid-area: image
        height: 90px
        margin: -(small-margin)
        margin-right: medium-margin
        margin-bottom: 0
        float: left
        border-radius: 0 0 0 border-radius
      h3
        margin: medium-margin 0 0
        font-size: font-subtitle-size
        grid-area: title
        overflow: hidden
        a
          display: block
          white-space: nowrap
          overflow: hidden
          text-overflow: ellipsis
      small, p
        display: none

    .card.tiny-tools
      grid-template-rows: 50px auto
      grid-template-columns: 100px auto
      grid-template-areas: "image title" "image tags"
      .card-img
        width: 90px
        border-radius: border-radius 0 0 border-radius
      h3
        margin-top: small-margin
      div.tags
        grid-area: tags
        margin: 0

    .card.photo
      grid-template-rows: auto 25px auto
      grid-template-columns: 160px auto
      grid-template-areas: "status status" "image link" "image title"
      .card-img
        width: 150px
      span.pre-title
        grid-area: link
      .status
        grid-area: status
        margin: -(small-margin)
        margin-bottom: (small-margin)

  .grid
    display: grid
    grid-gap: 2em
    grid-template-columns: repeat(auto-fill, minmax(220px,1fr))
    .card
      padding: (default-padding / 2)
      .card-img
        margin: -(default-padding / 2)
        margin-bottom: 0
        height: auto
        img
          width: 100%
          height: 100%
          object-fit: cover
      h3
        margin: default-margin 0 0
        font-size: font-subtitle-size
        
    .card.tiny-tools
      div.tags
        margin: default-margin 0 small-margin

    .card.photo
      grid-template-areas: "status" "image" "text"
      .card-img
        grid-area: image
        img
          height: 160px
      span.pre-title
        display: block
        margin-top: small-margin
      .status
        grid-area: status
        margin: -(default-padding / 2)
        margin-bottom: (default-padding / 2)
    
  .masonry
    display: block
    .card.photo
      box-shadow: none
      &:hover
        box-shadow: none
        transform: scale(1) translateY(0) !important
      .card-img
        display: flex
        width: auto
        filter: grayscale(0) contrast(1) !important
        img 
          border-radius: border-radius-small
          width: 100%
      span.pre-title
        display: none
      .status
        display: none !important
      h3
        display: none

  section.feeds
    h2
      margin-top: 0
    .feed-group
      margin: default-margin 0 0
      > strong
        display: block
        margin-bottom: small-margin
      a
        display: grid
        grid-template-columns: 36px max-content auto
        grid-template-rows: auto
        grid-template-areas: "icon link info" ". size ."
        padding: small-margin
        text-decoration: none
        align-items: center
        &:hover
          background-color: color-hover-background
          /[data-theme="dark"] &
            background-color: dark-color-hover-background
        span
          grid-area: link
        em
          grid-area: size
      a.atom
        color: #4b81d1
      a.rss
        color: #56a5d5
      a.json
        color: #bf403b
      a:before
        grid-area: icon
        display: inline-block
        content: ""
        background-repeat: no-repeat
        background-size: 24px 24px
        width: 24px
        height: 24px
      a.atom:before
        background-image: url(/images/atom.svg)
      a.rss:before
        background-image: url(/images/rss-alt.svg)
      a.json:before
        background-image: url(/images/jsonfeed.svg)
      a.site-default:after
        grid-area: info
        display: inline-block
        content: "- site's default"
        margin-left: small-margin
        font-size: font-size-small
        color: color-footer-text
        /[data-theme="dark"] &
          color: dark-footer-text
  section.meta
    ul
      margin: 0 0 0 0
      list-style: none
      display: flex
      flex-direction: column
      gap: 1rem
      li
        display: flex
        flex-direction: column
        gap: 0.2rem
        label
          font-family: font-mono
          font-size: font-size-tiny
          text-transform: uppercase
          opacity: 0.5
          line-height: normal
        span
          line-height: normal
        div.site-links
          display: flex
          flex-flow: column
          gap: 8px
          a.site-link
            padding: 1rem 1rem 1rem 3rem
            text-decoration: none
            overflow-wrap: break-word
            background-size: 20px 20px
            background-repeat: no-repeat
            background-color: color-hover-background
            background-position: 10px 16px
            /[data-theme="dark"] &
              background-color: dark-color-hover-background
            &.site-500px
              background-image: url(/images/500px.svg)
              /[data-theme="dark"] &
                background-image: url(/images/500px_invert.svg)
            &.site-pixelfed
              background-image: url(/images/pixelfed.svg)

  section.image
    background: transparent
    box-shadow: none
    padding: 0
    position relative
    img
      @extend $block-inner
      width: 100%
      height: auto
      box-shadow: 1px 1px 12px 0px #888 !important
      /[data-theme="dark"] &
        box-shadow: 1px 1px 12px 0px #000 !important
    small
      position: absolute
      right: 0
      bottom: -1rem
      opacity: 0.33
      font-size: 0.66rem

  section#color-list
    display: none
    background: transparent
    box-shadow: none
    padding: 0
    position relative
    ul
      display: flex
      gap: 1rem
      margin: 0
      flex-wrap: wrap
      flex-direction: row
      @media mq-medium
        flex-wrap: nowrap
        flex-direction: column
      li
        display: grid;
        grid-template-columns: auto 64px
        grid-template-rows: repeat(3,1fr)
        align-items: center
        padding: 1rem
        gap: 0 2rem
        width: auto
        position: relative
        background: #fff
        box-shadow: 1px 2px 20px 5px #ddd
        /[data-theme="dark"] &
          background: #333
          box-shadow: 1px 2px 40px 1px #111
        span
          grid-area: 1/1/2/2
          min-width: 5rem
        strong
          grid-area: 2/1/3/2
          min-width: 130px
        em
          grid-area: 3/1/4/2
        div
          grid-area: 1/2/4/3
          width: 6.5rem
          height: 6.5rem
          position: absolute
          top: -1rem
          right: -1rem

