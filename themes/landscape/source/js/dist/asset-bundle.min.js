function AutoTyping(a){let e=0,s,u=1,t=null,l=0,c=null;null!=a.textColor&&"string"==typeof a.textColor||(a.textColor="#000"),null!=a.typeSpeed&&"number"==typeof a.typeSpeed||(a.typeSpeed=100),null!=a.typeRandom&&0!=a.typeRandom&&"boolean"==typeof a.typeRandom||(a.typeRandom=!1),null!=a.typeDelay&&"number"==typeof a.typeDelay||(a.typeDelay=100),null!=a.cursor&&"string"==typeof a.cursor||(a.cursor="|"),null!=a.cursorColor&&"string"==typeof a.cursorColor||(a.cursorColor="#000"),null!=a.cursorSpeed&&"number"==typeof a.cursorSpeed||(a.cursorSpeed=300),null!=a.deleteSpeed&&"number"==typeof a.deleteSpeed||(a.deleteSpeed=50),null!=a.deleteDelay&&"number"==typeof a.deleteDelay||(a.deleteDelay=2e3),null!=a.callBack&&"object"==typeof a.callBack&&(t=a.callBack.method,null!=a.callBack.counter)&&"number"==typeof a.callBack.counter&&(c=a.callBack.counter),null==a.typeInfinity||1==a.typeInfinity||"boolean"!=typeof a.typeInfinity?a.typeInfinity=!0:a.typeInfinity=!1,null==a.delete||1==a.delete||"boolean"!=typeof a.delete?a.delete=!0:a.delete=!1,null==a.showCursor||1==a.showCursor||"boolean"!=typeof a.showCursor?a.showCursor=!0:a.showCursor=!1,this.typingElement=document.querySelector("#"+a.id);var o=document.createElement("span"),o=(o.className="typing-placeholder",this.helpingElement=this.typingElement.appendChild(o),this.helpingElement.innerHTML="",this.helpingElement.style.visibility="hidden",document.createElement("span"));o.className="typing-text",this.typingArea=this.typingElement.appendChild(o),a.showCursor&&((o=document.createElement("span")).className="typing-cursor",this.cursor=this.typingElement.appendChild(o),this.cursor.style.color=a.cursorColor,this.cursor.innerHTML=a.cursor,this.cursorSpeed=a.cursorSpeed),this.typeSpeed=a.typeSpeed,this.typeSpeedRandom=a.typeRandom,this.typingArea.style.color=a.textColor,this.typeText=a.typeText,this.deleteSpeed=a.deleteSpeed,this.deleteDelay=a.deleteDelay,this.typeDelay=a.typeDelay,this.typeInfinity=a.typeInfinity,this.callBack=t,this.userCounter=c,this.init=function(){let i=function(){l&&this.callBack&&(l=0,this.callBack(this.userCounter),"number"==typeof this.userCounter)&&(0<this.userCounter?this.userCounter--:this.userCounter=c);a.showCursor&&(clearInterval(s),this.cursor.style.visibility="visible");let n=[],t=this.typeText[e].split("");++e==this.typeText.length&&(e=0,u=this.typeInfinity?1:0);let o=function(){var e=t.shift(),e=(n.push(e),this.typingArea.innerHTML+=e,this.typeSpeedRandom?this.typeSpeed+=Math.floor(200*Math.random()):this.typeSpeed,setTimeout(o,this.typeSpeed));if(this.typeSpeed=a.typeSpeed,0==t.length){clearTimeout(e);let t=0;e=function(){t=0==t?(a.showCursor&&(this.cursor.style.visibility="hidden"),1):(a.showCursor&&(this.cursor.style.visibility="visible"),0)}.bind(this);a.showCursor&&(s=setInterval(e,this.cursorSpeed)),a.delete&&setTimeout(r,this.deleteDelay)}}.bind(this);o();let r=function(){a.showCursor&&(clearInterval(s),this.cursor.style.visibility="visible");n.pop();let e="";for(let t=0;t<n.length;t++)e+=n[t];this.typingArea.innerHTML=e;var o=setTimeout(r,this.deleteSpeed);if(0==n.length){clearTimeout(o);let t=0;o=function(){t=0==t?(a.showCursor&&(this.cursor.style.visibility="hidden"),1):(a.showCursor&&(this.cursor.style.visibility="visible"),0)}.bind(this);a.showCursor&&(s=setInterval(o,this.cursorSpeed)),this.typeInfinity||u?(this.callBack&&l++,setTimeout(i,this.typeDelay)):a.showCursor&&(clearInterval(s),this.cursor.style.visibility="hidden")}}.bind(this)}.bind(this);i()}}function insertWebmentions(o,n,r){if(!isOffline){const u=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}),l="wmts_"+o,c="wm_"+o;let t,e;function i(){const i=document.querySelector(".webmentions-placeholder");if(0<e.children.length){i.innerHTML="";let r=0;e.children.forEach(t=>{r+=1,t.no=r;let e;switch(t["wm-property"]){case"mention-of":e=function(t){let e=a(t,"mentioned"),o="";t.content&&t.content.text&&(o=`<p>${function(t,e){let o=t.split(/\s+/),n=o.slice(0,e).join(" ");o.length>e&&(n+=" ...");return n}(t.content.text,50)}</p>`);t=`
      <div class="wm-content p-content">
        ${o}
        <a class="wm-source" href="${t["wm-source"]}">${t["wm-source"]}</a>
      </div>
    `;return e.insertAdjacentHTML("beforeend",t),e}(t);break;case"in-reply-to":e=(n=a(o=t,"replied"),o=`
      <div class="wm-content p-content">
        <p>${o.content.html}</p>
      </div>
    `,n.insertAdjacentHTML("beforeend",o),n);break;case"like-of":e=a(t,"liked");break;case"repost-of":e=(n=a(o=t,"reposted"),o=`
      <div class="wm-content p-content">
        <a href="${o["wm-source"]}">${o["wm-source"]}</a>
      </div>
    `,n.insertAdjacentHTML("beforeend",o),n);break;case"bookmark-of":e=a(t,"bookmarked")}var o,n;i.insertAdjacentElement("beforeend",e)})}}function a(t,e){var o=s(`
      <div class="webmention wm-${e}" id="wm-${t["wm-id"]}">
      </div>
    `);return o.insertAdjacentElement("beforeend",function(t,e){(function(t){t.own=t.author.name===r,t.author.card_class="h_card",t.author.name_class="p-name",t.author.photo_class="u-photo",t.author.url_class="u-url",t.author.name||(t.author.name="Somebody",t.author.card_class="",t.author.name_class=""),t.author.photo||(t.author.photo="https://api.dicebear.com/7.x/initials/svg?seed="+t.author.name+"?size=42&scale=75&backgroundColor=bbbbbb",t.author.photo_class=""),t.author.url||(t.author.url="javascript:void();",t.author.url_class="")})(t),function(t){t.source_type="web",t["wm-source"].toLowerCase().includes("/facebook")&&(t.source_type="facebook"),t["wm-source"].toLowerCase().includes("/instagram")&&(t.source_type="instagram"),t["wm-source"].toLowerCase().includes("/twitter")&&(t.source_type="twitter"),t["wm-source"].toLowerCase().includes("/flickr")&&(t.source_type="flickr"),t["wm-source"].toLowerCase().includes("/github")&&(t.source_type="github"),t["wm-source"].toLowerCase().includes("/mastodon")&&(t.source_type="mastodon"),t["wm-source"].toLowerCase().includes("/reddit")&&(t.source_type="reddit"),t["wm-source"].toLowerCase().includes("/bluesky")&&(t.source_type="bluesky")}(t);e=s(`
      <div class="wm-card ${t.author.card_class}">
        <a class="wm-photo-link ${t.author.url_class}" href="${t.author.url}">
          <img class="wm-photo ${t.author.photo_class}" 
               src="${t.author.photo}" alt="${t.author.name}" />
        </a>
        <div class="wm-meta ${t.own?"wm-own":""}">
          <a class="wm-name ${t.author.name_class} wm-source-${t.source_type}" href="${t.author.url}">
            <span>${t.author.name}</span>
          </a>
          <span class="wm-verb">${e} on</span>
          <time class="wm-date dt-published" datetime="${t["wm-received"]}">${u.format(Date.parse(t["wm-received"]))}</time>
          <small>${t.no}</small>
        </div>
      </div>
    `);return e}(t,e)),o}function s(t){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}localStorage.getItem(l)&&localStorage.getItem(c)&&(t=localStorage.getItem(l),e=JSON.parse(localStorage.getItem(c))),e&&t&&Math.abs(Date.now()-t)/36e5<1?i():async function(){var t=new URL(window.location.href),t=n+t.pathname;t=`https://webmention.io/api/mentions.jf2?target=${t}&per-page=100&sort-dir=up`,t=await fetch(t);e=await t.json(),document.querySelector("input[name=alias]")&&(t=`https://webmention.io/api/mentions.jf2?target=${document.querySelector("input[name=alias]").value}&per-page=100&sort-dir=up`,t=await fetch(t),aliasWebmentions=await t.json(),e.children=[...aliasWebmentions.children,...e.children]);localStorage.setItem(c,JSON.stringify(e)),localStorage.setItem(l,Date.now())}().then(()=>{i()})}}function addBackToTop(t={}){const{backgroundColor:e="#000",cornerOffset:o=20,diameter:n=56,ease:s=function(t){return.5*(1-Math.cos(Math.PI*t))},id:r="back-to-top",innerHTML:i='<svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg>',onClickScrollTo:u=0,scrollContainer:a=document.body,scrollDuration:l=100,showWhenScrollTopIs:c=1,size:d=n,textColor:p="#fff",zIndex:h=1}=t;var m,f,t=a===document.body;const g=t&&document.documentElement,y=(m=Math.round(.43*d),f=Math.round(.29*d),f=`
        #${r} {
        background: ${e};
        // border-radius: 50%;
        bottom: ${o}px;
        // box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .26);
        color: ${p};
        cursor: pointer;
        display: block;
        height: ${d}px;
        opacity: 1;
        outline: none;
        position: fixed;
        right: ${o}px;
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        transition: bottom 0.2s, opacity 0.2s;
        user-select: none;
        width: ${d}px;
        z-index: ${h};
        }
        #${r} svg {
        display: block;
        fill: currentColor;
        height: ${m}px;
        margin: ${f}px auto 0;
        width: ${m}px;
        }
        #${r}.hidden {
        bottom: -${d}px;
        opacity: 0;
        }
    `,(m=document.createElement("style")).appendChild(document.createTextNode(f)),document.head.insertAdjacentElement("afterbegin",m),(f=document.createElement("div")).id=r,f.className="hidden",f.innerHTML=i,f.addEventListener("click",t=>{t.preventDefault();{const e="function"==typeof u?u():u,{performance:o,requestAnimationFrame:n}=window;if(l<=0||void 0===o||void 0===n)_(e);else{const r=o.now(),i=w(),a=i-e;n(function t(e){e=Math.min((e-r)/l,1);_(i-Math.round(s(e)*a)),e<1&&n(t)})}}}),document.body.appendChild(f),f);let b=!0;function v(){w()>=c?b&&(y.className="",b=!1):b||(y.className="hidden",b=!0)}function w(){return a.scrollTop||g&&document.documentElement.scrollTop||0}function _(t){a.scrollTop=t,g&&(document.documentElement.scrollTop=t)}(t?window:a).addEventListener("scroll",v),v()}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).mediumZoom=e()}(this,function(){"use strict";function l(t){return".svg"===(t.currentSrc||t.src).substr(-4).toLowerCase()}function s(t){try{return Array.isArray(t)?t.filter(e):o(t)?[].slice.call(t).filter(e):x(t)?[t].filter(e):"string"==typeof t?[].slice.call(document.querySelectorAll(t)).filter(e):[]}catch(t){throw new TypeError("The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList or an array.\nSee: https://github.com/francoischalifour/medium-zoom")}}function _(t,e){var o,e=c({bubbles:!1,cancelable:!1,detail:void 0},e);return"function"==typeof window.CustomEvent?new CustomEvent(t,e):((o=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),o)}function u(t){function e(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];var r=e.reduce(function(t,e){return[].concat(t,s(e))},[]);return r.filter(function(t){return-1===m.indexOf(t)}).forEach(function(t){m.push(t),t.classList.add("medium-zoom-image")}),a.forEach(function(t){var e=t.type,o=t.listener,n=t.options;r.forEach(function(t){t.addEventListener(e,o,n)})}),w}function o(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).target;return b.original?h():i({target:t})}var n,r=window.Promise||function(t){function e(){}t(e,e)},i=function(){function d(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},e=void 0,o=void 0,n=(y.container&&(y.container instanceof Object?(e=(t=c({},t,y.container)).width-t.left-t.right-2*y.margin,o=t.height-t.top-t.bottom-2*y.margin):(n=(u=(x(y.container)?y.container:document.querySelector(y.container)).getBoundingClientRect()).width,r=u.height,i=u.left,u=u.top,t=c({},t,{width:n,height:r,left:i,top:u}))),e=e||t.width-2*y.margin,o=o||t.height-2*y.margin,b.zoomedHd||b.original),r=!l(n)&&n.naturalWidth||e,i=!l(n)&&n.naturalHeight||o,n=(u=n.getBoundingClientRect()).top,a=u.left,s=u.width,u=u.height,r=Math.min(Math.max(s,r),e)/s,i=Math.min(Math.max(u,i),o)/u,i="scale("+(r=Math.min(r,i))+") translate3d("+((e-s)/2-a+y.margin+t.left)/r+"px, "+((o-u)/2-n+y.margin+t.top)/r+"px, 0)";b.zoomed.style.transform=i,b.zoomedHd&&(b.zoomedHd.style.transform=i)}var p=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).target;return new r(function(e){if(p&&-1===m.indexOf(p))e(w);else{var t,o,n,r,i,a,s,u,l=function t(){f=!1,b.zoomed.removeEventListener("transitionend",t),b.original.dispatchEvent(_("medium-zoom:opened",{detail:{zoom:w}})),e(w)};if(b.zoomed)e(w);else{if(p)b.original=p;else{if(!(0<m.length))return void e(w);var c=m;b.original=c[0]}b.original.dispatchEvent(_("medium-zoom:open",{detail:{zoom:w}})),g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,f=!0,b.zoomed=(c=b.original,t=c.getBoundingClientRect(),a=t.top,o=t.left,n=t.width,t=t.height,c=c.cloneNode(),r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,i=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,c.removeAttribute("id"),c.style.position="absolute",c.style.top=a+r+"px",c.style.left=o+i+"px",c.style.width=n+"px",c.style.height=t+"px",c.style.transform="",c),document.body.appendChild(v),y.template&&(a=x(y.template)?y.template:document.querySelector(y.template),b.template=document.createElement("div"),b.template.appendChild(a.content.cloneNode(!0)),document.body.appendChild(b.template)),b.original.parentElement&&"PICTURE"===b.original.parentElement.tagName&&b.original.currentSrc&&(b.zoomed.src=b.original.currentSrc),document.body.appendChild(b.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),b.original.classList.add("medium-zoom-image--hidden"),b.zoomed.classList.add("medium-zoom-image--opened"),b.zoomed.addEventListener("click",h),b.zoomed.addEventListener("transitionend",l),b.original.getAttribute("data-zoom-src")?(b.zoomedHd=b.zoomed.cloneNode(),b.zoomedHd.removeAttribute("srcset"),b.zoomedHd.removeAttribute("sizes"),b.zoomedHd.removeAttribute("loading"),b.zoomedHd.src=b.zoomed.getAttribute("data-zoom-src"),b.zoomedHd.onerror=function(){clearInterval(s),console.warn("Unable to reach the zoom image target "+b.zoomedHd.src),b.zoomedHd=null,d()},s=setInterval(function(){b.zoomedHd.complete&&(clearInterval(s),b.zoomedHd.classList.add("medium-zoom-image--opened"),b.zoomedHd.addEventListener("click",h),document.body.appendChild(b.zoomedHd),d())},10)):b.original.hasAttribute("srcset")?(b.zoomedHd=b.zoomed.cloneNode(),b.zoomedHd.removeAttribute("sizes"),b.zoomedHd.removeAttribute("loading"),u=b.zoomedHd.addEventListener("load",function(){b.zoomedHd.removeEventListener("load",u),b.zoomedHd.classList.add("medium-zoom-image--opened"),b.zoomedHd.addEventListener("click",h),document.body.appendChild(b.zoomedHd),d()})):d()}}})},h=function(){return new r(function(e){var t;f||!b.original?e(w):(t=function t(){b.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(b.zoomed),b.zoomedHd&&document.body.removeChild(b.zoomedHd),document.body.removeChild(v),b.zoomed.classList.remove("medium-zoom-image--opened"),b.template&&document.body.removeChild(b.template),f=!1,b.zoomed.removeEventListener("transitionend",t),b.original.dispatchEvent(_("medium-zoom:closed",{detail:{zoom:w}})),b.original=null,b.zoomed=null,b.zoomedHd=null,b.template=null,e(w)},f=!0,document.body.classList.remove("medium-zoom--opened"),b.zoomed.style.transform="",b.zoomedHd&&(b.zoomedHd.style.transform=""),b.template&&(b.template.style.transition="opacity 150ms",b.template.style.opacity=0),b.original.dispatchEvent(_("medium-zoom:close",{detail:{zoom:w}})),b.zoomed.addEventListener("transitionend",t))})},m=[],a=[],f=!1,g=0,y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},b={original:null,zoomed:null,zoomedHd:null,template:null},v=("[object Object]"===Object.prototype.toString.call(t)?y=t:!t&&"string"!=typeof t||e(t),y=c({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},y),t=y.background,(n=document.createElement("div")).classList.add("medium-zoom-overlay"),n.style.background=t,n),w=(document.addEventListener("click",function(t){t=t.target;t===v?h():-1!==m.indexOf(t)&&o({target:t})}),document.addEventListener("keyup",function(t){t=t.key||t.keyCode;"Escape"!==t&&"Esc"!==t&&27!==t||h()}),document.addEventListener("scroll",function(){var t;!f&&b.original&&(t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Math.abs(g-t)>y.scrollOffset)&&setTimeout(h,150)}),window.addEventListener("resize",h),{open:i,close:h,toggle:o,update:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t;return t.background&&(v.style.background=t.background),t.container&&t.container instanceof Object&&(e.container=c({},y.container,t.container)),t.template&&(t=x(t.template)?t.template:document.querySelector(t.template),e.template=t),y=c({},y,e),m.forEach(function(t){t.dispatchEvent(_("medium-zoom:update",{detail:{zoom:w}}))}),w},clone:function(){return u(c({},y,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))},attach:e,detach:function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];b.zoomed&&h();var n=0<e.length?e.reduce(function(t,e){return[].concat(t,s(e))},[]):m;return n.forEach(function(t){t.classList.remove("medium-zoom-image"),t.dispatchEvent(_("medium-zoom:detach",{detail:{zoom:w}}))}),m=m.filter(function(t){return-1===n.indexOf(t)}),w},on:function(e,o){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return m.forEach(function(t){t.addEventListener("medium-zoom:"+e,o,n)}),a.push({type:"medium-zoom:"+e,listener:o,options:n}),w},off:function(e,o){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return m.forEach(function(t){t.removeEventListener("medium-zoom:"+e,o,n)}),a=a.filter(function(t){return!(t.type==="medium-zoom:"+e&&t.listener.toString()===o.toString())}),w},getOptions:function(){return y},getImages:function(){return m},getZoomedImage:function(){return b.original}});return w}var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o,n=arguments[e];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},e=function(t){return"IMG"===t.tagName},o=function(t){return NodeList.prototype.isPrototypeOf(t)},x=function(t){return t&&1===t.nodeType};var t,n,r,i;return t=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}",n=(n=void 0===n?{}:n).insertAt,t&&"undefined"!=typeof document&&(r=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("style")).type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))),u}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Vibrant=e():t.Vibrant=e()}(window,function(){return o=[function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assignDeep=e.mapValues=void 0,e.mapValues=function(t,e){var o,n,r={};for(o in t)t.hasOwnProperty(o)&&(n=t[o],r[o]=e(n));return r},e.assignDeep=function n(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.forEach(function(t){if(t)for(var e in t){var o;t.hasOwnProperty(e)&&(o=t[e],Array.isArray(o)?r[e]=o.slice(0):"object"==typeof o?(r[e]||(r[e]={}),n(r[e],o)):r[e]=o)}}),r}},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=(Object.defineProperty(e,"__esModule",{value:!0}),o(7)),i=n(o(8)),a=o(0);function s(t,e){this._src=t,this.opts=a.assignDeep({},s.DefaultOpts,e)}s.use=function(t){this._pipeline=t},s.from=function(t){return new i.default(t)},Object.defineProperty(s.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),s.prototype._process=function(t,e){this.opts.quantizer;t.scaleDown(this.opts);e=r.buildProcessOptions(this.opts,e);return s._pipeline.process(t.getImageData(),e)},s.prototype.palette=function(){return this.swatches()},s.prototype.swatches=function(){throw new Error("Method deprecated. Use `Vibrant.result.palettes[name]` instead")},s.prototype.getPalette=function(){var e=this,t=arguments[0],o="string"==typeof t?t:"default",n="string"==typeof t?arguments[1]:t,r=new this.opts.ImageClass;return r.load(this._src).then(function(t){return e._process(t,{generators:[o]})}).then(function(t){return(e._result=t).palettes[o]}).then(function(t){return r.remove(),n&&n(void 0,t),t}).catch(function(t){return r.remove(),n&&n(t),Promise.reject(t)})},s.prototype.getPalettes=function(){var e=this,t=arguments[0],o=arguments[1],n=Array.isArray(t)?t:["*"],r=Array.isArray(t)?o:t,i=new this.opts.ImageClass;return i.load(this._src).then(function(t){return e._process(t,{generators:n})}).then(function(t){return(e._result=t).palettes}).then(function(t){return i.remove(),r&&r(void 0,t),t}).catch(function(t){return i.remove(),r&&r(t),Promise.reject(t)})},s.DefaultOpts={colorCount:64,quality:5,filters:[]},e.default=s},function(t,e,o){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),e.applyFilters=e.ImageBase=void 0,n.prototype.scaleDown=function(t){var e,o=this.getWidth(),n=this.getHeight(),r=1;0<t.maxDimension?(e=Math.max(o,n))>t.maxDimension&&(r=t.maxDimension/e):r=1/t.quality,r<1&&this.resize(o*r,n*r,r)},e.ImageBase=n,e.applyFilters=function(t,e){if(0<e.length)for(var o=t.data,n=o.length/4,r=0;r<n;r++)for(var i,a=o[0+(i=4*r)],s=o[1+i],u=o[2+i],l=o[3+i],c=0;c<e.length;c++)if(!e[c](a,s,u,l)){o[3+i]=0;break}return t}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Swatch=void 0;var n=o(4);function r(t,e){this._rgb=t,this._population=e}r.applyFilters=function(t,i){return 0<i.length?t.filter(function(t){for(var e=t.r,o=t.g,n=t.b,r=0;r<i.length;r++)if(!i[r](e,o,n,255))return!1;return!0}):t},r.clone=function(t){return new r(t._rgb,t._population)},Object.defineProperty(r.prototype,"r",{get:function(){return this._rgb[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"g",{get:function(){return this._rgb[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"b",{get:function(){return this._rgb[2]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rgb",{get:function(){return this._rgb},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hsl",{get:function(){var t,e,o;return this._hsl||(t=(o=this._rgb)[0],e=o[1],o=o[2],this._hsl=n.rgbToHsl(t,e,o)),this._hsl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hex",{get:function(){var t,e,o;return this._hex||(t=(o=this._rgb)[0],e=o[1],o=o[2],this._hex=n.rgbToHex(t,e,o)),this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"population",{get:function(){return this._population},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{rgb:this.rgb,population:this.population}},r.prototype.getRgb=function(){return this._rgb},r.prototype.getHsl=function(){return this.hsl},r.prototype.getPopulation=function(){return this._population},r.prototype.getHex=function(){return this.hex},r.prototype.getYiq=function(){var t;return this._yiq||(t=this._rgb,this._yiq=(299*t[0]+587*t[1]+114*t[2])/1e3),this._yiq},Object.defineProperty(r.prototype,"titleTextColor",{get:function(){return this._titleTextColor&&(this._titleTextColor=this.getYiq()<200?"#fff":"#000"),this._titleTextColor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bodyTextColor",{get:function(){return this._bodyTextColor&&(this._bodyTextColor=this.getYiq()<150?"#fff":"#000"),this._bodyTextColor},enumerable:!1,configurable:!0}),r.prototype.getTitleTextColor=function(){return this.titleTextColor},r.prototype.getBodyTextColor=function(){return this.bodyTextColor},e.Swatch=r},function(t,e,o){"use strict";function n(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(e)return[e[1],e[2],e[3]].map(function(t){return parseInt(t,16)});throw new RangeError("'"+t+"' is not a valid hex color")}function r(t,e,o){return e/=255,o/=255,t=.04045<(t/=255)?Math.pow((t+.005)/1.055,2.4):t/12.92,e=.04045<e?Math.pow((e+.005)/1.055,2.4):e/12.92,o=.04045<o?Math.pow((o+.005)/1.055,2.4):o/12.92,[.4124*(t*=100)+.3576*(e*=100)+.1805*(o*=100),.2126*t+.7152*e+.0722*o,.0193*t+.1192*e+.9505*o]}function i(t,e,o){return e/=100,o/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(e=.008856<e?Math.pow(e,1/3):7.787*e+16/116)-16,500*(t-e),200*(e-(o=.008856<o?Math.pow(o,1/3):7.787*o+16/116))]}function a(t,e,o){t=r(t,e,o);return i(t[0],t[1],t[2])}function s(t,e){var o=t[0],n=t[1],t=t[2],r=e[0],i=e[1],e=e[2],a=o-r,s=n-i,u=t-e,n=Math.sqrt(n*n+t*t),t=r-o,r=Math.sqrt(i*i+e*e)-n,o=Math.sqrt(a*a+s*s+u*u),i=Math.sqrt(o)>Math.sqrt(Math.abs(t))+Math.sqrt(Math.abs(r))?Math.sqrt(o*o-t*t-r*r):0;return t/=1,r/=1+.045*n,i/=1+.015*n,Math.sqrt(t*t+r*r+i*i)}function u(t,e){return s(a.apply(void 0,t),a.apply(void 0,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.getColorDiffStatus=e.hexDiff=e.rgbDiff=e.deltaE94=e.rgbToCIELab=e.xyzToCIELab=e.rgbToXyz=e.hslToRgb=e.rgbToHsl=e.rgbToHex=e.hexToRgb=e.DELTAE94_DIFF_STATUS=void 0,e.DELTAE94_DIFF_STATUS={NA:0,PERFECT:1,CLOSE:2,GOOD:10,SIMILAR:50},e.hexToRgb=n,e.rgbToHex=function(t,e,o){return"#"+((1<<24)+(t<<16)+(e<<8)+o).toString(16).slice(1,7)},e.rgbToHsl=function(t,e,o){t/=255,e/=255,o/=255;var n=Math.max(t,e,o),r=Math.min(t,e,o),i=0,a=0,s=(n+r)/2;if(n!==r){var u=n-r,a=.5<s?u/(2-n-r):u/(n+r);switch(n){case t:i=(e-o)/u+(e<o?6:0);break;case e:i=(o-t)/u+2;break;case o:i=(t-e)/u+4}i/=6}return[i,a,s]},e.hslToRgb=function(t,e,o){var n,r,i;function a(t,e,o){return o<0&&(o+=1),1<o&&--o,o<1/6?t+6*(e-t)*o:o<.5?e:o<2/3?t+(e-t)*(2/3-o)*6:t}return 0===e?n=r=i=o:(n=a(e=2*o-(o=o<.5?o*(1+e):o+e-o*e),o,t+1/3),r=a(e,o,t),i=a(e,o,t-1/3)),[255*n,255*r,255*i]},e.rgbToXyz=r,e.xyzToCIELab=i,e.rgbToCIELab=a,e.deltaE94=s,e.rgbDiff=u,e.hexDiff=function(t,e){return u(n(t),n(e))},e.getColorDiffStatus=function(t){return t<e.DELTAE94_DIFF_STATUS.NA?"N/A":t<=e.DELTAE94_DIFF_STATUS.PERFECT?"Perfect":t<=e.DELTAE94_DIFF_STATUS.CLOSE?"Close":t<=e.DELTAE94_DIFF_STATUS.GOOD?"Good":t<e.DELTAE94_DIFF_STATUS.SIMILAR?"Similar":"Wrong"}},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=n(o(6)),n=n(o(9));r.default.DefaultOpts.ImageClass=n.default,t.exports=r.default},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},n=(Object.defineProperty(e,"__esModule",{value:!0}),n(o(1)));n.default.DefaultOpts.quantizer="mmcq",n.default.DefaultOpts.generators=["default"],n.default.DefaultOpts.filters=["default"],e.default=n.default},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildProcessOptions=void 0;var i=o(0);e.buildProcessOptions=function(t,e){var o=t.colorCount,n=t.quantizer,r=t.generators,t=t.filters;return(n="string"==typeof n?{name:n,options:{}}:n).options=i.assignDeep({},{colorCount:o},n.options),i.assignDeep({},{quantizer:n,generators:r,filters:t},e)}},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=(Object.defineProperty(e,"__esModule",{value:!0}),n(o(1))),i=o(0);function a(t,e){void 0===e&&(e={}),this._src=t,this._opts=i.assignDeep({},r.default.DefaultOpts,e)}a.prototype.maxColorCount=function(t){return this._opts.colorCount=t,this},a.prototype.maxDimension=function(t){return this._opts.maxDimension=t,this},a.prototype.addFilter=function(t){return this._opts.filters?this._opts.filters.push(t):this._opts.filters=[t],this},a.prototype.removeFilter=function(t){return this._opts.filters&&0<(t=this._opts.filters.indexOf(t))&&this._opts.filters.splice(t),this},a.prototype.clearFilters=function(){return this._opts.filters=[],this},a.prototype.quality=function(t){return this._opts.quality=t,this},a.prototype.useImageClass=function(t){return this._opts.ImageClass=t,this},a.prototype.useGenerator=function(t,e){return this._opts.generators||(this._opts.generators=[]),this._opts.generators.push(e?{name:t,options:e}:t),this},a.prototype.useQuantizer=function(t,e){return this._opts.quantizer=e?{name:t,options:e}:t,this},a.prototype.build=function(){return new r.default(this._src,this._opts)},a.prototype.getPalette=function(t){return this.build().getPalette(t)},a.prototype.getSwatches=function(t){return this.build().getPalette(t)},e.default=a},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}))(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),o=(Object.defineProperty(e,"__esModule",{value:!0}),o(2));i=o.ImageBase,r(a,i),a.prototype._initCanvas=function(){var t=this.image,e=this._canvas=document.createElement("canvas"),o=e.getContext("2d");if(!o)throw new ReferenceError("Failed to create canvas context");this._context=o,e.className="@vibrant/canvas",e.style.display="none",this._width=e.width=t.width,this._height=e.height=t.height,o.drawImage(t,0,0),document.body.appendChild(e)},a.prototype.load=function(t){var n,r,e,o,i=this;if("string"==typeof t)n=document.createElement("img"),o=r=t,(o=new URL(o,location.href)).protocol===location.protocol&&o.host===location.host&&o.port===location.port||(o=window.location.href,e=r,o=new URL(o),e=new URL(e),o.protocol===e.protocol&&o.hostname===e.hostname&&o.port===e.port)||(n.crossOrigin="anonymous"),n.src=r;else{if(!(t instanceof HTMLImageElement))return Promise.reject(new Error("Cannot load buffer as an image in browser"));r=(n=t).src}return this.image=n,new Promise(function(t,e){function o(){i._initCanvas(),t(i)}n.complete?o():(n.onload=o,n.onerror=function(t){return e(new Error("Fail to load image: "+r))})})},a.prototype.clear=function(){this._context.clearRect(0,0,this._width,this._height)},a.prototype.update=function(t){this._context.putImageData(t,0,0)},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.resize=function(t,e,o){var n=this._canvas,r=this._context,i=this.image;this._width=n.width=t,this._height=n.height=e,r.scale(o,o),r.drawImage(i,0,0)},a.prototype.getPixelCount=function(){return this._width*this._height},a.prototype.getImageData=function(){return this._context.getImageData(0,0,this._width,this._height)},a.prototype.remove=function(){this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas)};var i,o=a;function a(){return null!==i&&i.apply(this,arguments)||this}e.default=o},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=o(5),n=n(o(11));r.use(n.default),t.exports=r},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=(Object.defineProperty(e,"__esModule",{value:!0}),n(o(12))),n=n(o(16)),o=(new(o(17).BasicPipeline)).filter.register("default",function(t,e,o,n){return 125<=n&&!(250<t&&250<e&&250<o)}).quantizer.register("mmcq",r.default).generator.register("default",n.default);e.default=o},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(Object.defineProperty(e,"__esModule",{value:!0}),o(3)),u=n(o(13)),l=n(o(15)),c=.75;function d(t,e){for(var o=t.size();t.size()<e;){var n=t.pop();if(!(n&&0<n.count()))break;var n=n.split(),r=n[0],n=n[1];if(t.push(r),n&&0<n.count()&&t.push(n),t.size()===o)break;o=t.size()}}e.default=function(t,e){if(0===t.length||e.colorCount<2||256<e.colorCount)throw new Error("Wrong MMCQ parameters");for(var t=u.default.build(t),o=(t.histogram.colorCount,new l.default(function(t,e){return t.count()-e.count()})),t=(o.push(t),d(o,c*e.colorCount),new l.default(function(t,e){return t.count()*t.volume()-e.count()*e.volume()})),n=(t.contents=o.contents,d(t,e.colorCount-t.size()),t),r=[];n.size();){var i=n.pop(),a=i.avg();a[0],a[1],a[2];r.push(new s.Swatch(a,i.count()))}return r}},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=(Object.defineProperty(e,"__esModule",{value:!0}),n(o(14)));function i(t,e,o,n,r,i,a){this.histogram=a,this._volume=-1,this._count=-1,this.dimension={r1:t,r2:e,g1:o,g2:n,b1:r,b2:i}}i.build=function(t){t=new r.default(t,{sigBits:5});return new i(t.rmin,t.rmax,t.gmin,t.gmax,t.bmin,t.bmax,t)},i.prototype.invalidate=function(){this._volume=this._count=-1,this._avg=null},i.prototype.volume=function(){var t,e,o,n,r,i;return this._volume<0&&(t=(i=this.dimension).r1,e=i.r2,o=i.g1,n=i.g2,r=i.b1,i=i.b2,this._volume=(e-t+1)*(n-o+1)*(i-r+1)),this._volume},i.prototype.count=function(){if(this._count<0){for(var t=this.histogram,e=t.hist,o=t.getColorIndex,t=this.dimension,n=t.r1,r=t.r2,i=t.g1,a=t.g2,s=t.b1,u=t.b2,l=0,c=n;c<=r;c++)for(var d=i;d<=a;d++)for(var p=s;p<=u;p++)l+=e[o(c,d,p)];this._count=l}return this._count},i.prototype.clone=function(){var t=this.histogram,e=this.dimension;return new i(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,t)},i.prototype.avg=function(){if(!this._avg){for(var t=this.histogram,e=t.hist,o=t.getColorIndex,t=this.dimension,n=t.r1,r=t.r2,i=t.g1,a=t.g2,s=t.b1,u=t.b2,l=0,c=void 0,d=void 0,p=void 0,c=d=p=0,h=n;h<=r;h++)for(var m=i;m<=a;m++)for(var f=s;f<=u;f++){var g=e[o(h,m,f)];l+=g,c+=g*(h+.5)*8,d+=g*(m+.5)*8,p+=g*(f+.5)*8}this._avg=l?[~~(c/l),~~(d/l),~~(p/l)]:[~~(8*(n+r+1)/2),~~(8*(i+a+1)/2),~~(8*(s+u+1)/2)]}return this._avg},i.prototype.contains=function(t){var e=t[0],o=t[1],t=t[2],n=this.dimension,r=n.r1,i=n.r2,a=n.g1,s=n.g2,u=n.b1,n=n.b2;return o>>=3,t>>=3,r<=(e>>=3)&&e<=i&&a<=o&&o<=s&&u<=t&&t<=n},i.prototype.split=function(){var t=this.histogram,e=t.hist,o=t.getColorIndex,t=this.dimension,n=t.r1,r=t.r2,i=t.g1,a=t.g2,s=t.b1,u=t.b2,t=this.count();if(!t)return[];if(1===t)return[this.clone()];var l,t=r-n+1,c=a-i+1,d=Math.max(t,c,u-s+1),p=null,h=(f=l=0,null);if(d===t)for(var h="r",p=new Uint32Array(r+1),m=n;m<=r;m++){for(var f=0,g=i;g<=a;g++)for(var y=s;y<=u;y++)f+=e[o(m,g,y)];l+=f,p[m]=l}else if(d===c){h="g",p=new Uint32Array(a+1);for(g=i;g<=a;g++){f=0;for(m=n;m<=r;m++)for(y=s;y<=u;y++)f+=e[o(m,g,y)];l+=f,p[g]=l}}else{h="b",p=new Uint32Array(u+1);for(y=s;y<=u;y++){f=0;for(m=n;m<=r;m++)for(g=i;g<=a;g++)f+=e[o(m,g,y)];l+=f,p[y]=l}}for(var b=-1,v=new Uint32Array(p.length),w=0;w<p.length;w++){var _=p[w];b<0&&l/2<_&&(b=w),v[w]=l-_}t=this;for(var c=(d=h)+"1",d=d+"2",h=t.dimension[c],x=t.dimension[d],C=t.clone(),L=t.clone(),S=b-h,z=x-b,x=S<=z?(x=Math.min(x-1,~~(b+z/2)),Math.max(0,x)):(x=Math.max(h,~~(b-1-S/2)),Math.min(t.dimension[d],x));!p[x];)x++;for(var M=v[x];!M&&p[x-1];)M=v[--x];return C.dimension[d]=x,L.dimension[c]=x+1,[C,L]},e.default=i},function(t,e,o){"use strict";function n(t,e){this.pixels=t;for(var o,n,r,i,a,s,u,l=(this.opts=e).sigBits,c=function(t,e,o){return(t<<2*l)+(e<<l)+o},d=(this.getColorIndex=c,8-l),p=new Uint32Array(1<<3*l),h=o=r=0,m=n=i=Number.MAX_VALUE,f=t.length/4,g=0;g<f;){var y=4*g;g++,a=t[0+y],s=t[1+y],u=t[2+y],0!==t[3+y]&&(p[c(a>>=d,s>>=d,u>>=d)]+=1,h<a&&(h=a),a<m&&(m=a),o<s&&(o=s),s<n&&(n=s),r<u&&(r=u),u<i)&&(i=u)}this._colorCount=p.reduce(function(t,e){return 0<e?t+1:t},0),this.hist=p,this.rmax=h,this.rmin=m,this.gmax=o,this.gmin=n,this.bmax=r,this.bmin=i}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(n.prototype,"colorCount",{get:function(){return this._colorCount},enumerable:!1,configurable:!0}),e.default=n},function(t,e,o){"use strict";function n(t){this._comparator=t,this.contents=[],this._sorted=!1}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype._sort=function(){this._sorted||(this.contents.sort(this._comparator),this._sorted=!0)},n.prototype.push=function(t){this.contents.push(t),this._sorted=!1},n.prototype.peek=function(t){return this._sort(),t="number"==typeof t?t:this.contents.length-1,this.contents[t]},n.prototype.pop=function(){return this._sort(),this.contents.pop()},n.prototype.size=function(){return this.contents.length},n.prototype.map=function(t){return this._sort(),this.contents.map(t)},e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=o(3),d=o(4),p={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function g(t,e,o,n,r,i,a){function s(t,e){return 1-Math.abs(t-e)}return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o=0,n=0,r=0;r<t.length;r+=2){var i=t[r+1];o+=t[r]*i,n+=i}return o/n}(s(t,e),a.weightSaturation,s(o,n),a.weightLuma,r/i,a.weightPopulation)}function h(i,t,a,s,u,l,c,d,p,h){var m=null,f=0;return t.forEach(function(t){var e,o,n=t.hsl,r=n[1],n=n[2];d<=r&&r<=p&&u<=n&&n<=l&&(o=t,(e=i).Vibrant!==o)&&e.DarkVibrant!==o&&e.LightVibrant!==o&&e.Muted!==o&&e.DarkMuted!==o&&e.LightMuted!==o&&(e=g(r,c,n,s,t.population,a,h),null===m||f<e)&&(m=t,f=e)}),m}e.default=function(t,e){e=Object.assign({},p,e);o=0,t.forEach(function(t){o=Math.max(o,t.population)});var o,n,r,i,a,s,u,l=o,t=(r=e,(n={Vibrant:null,DarkVibrant:null,LightVibrant:null,Muted:null,DarkMuted:null,LightMuted:null}).Vibrant=h(n,t=t,l=l,r.targetNormalLuma,r.minNormalLuma,r.maxNormalLuma,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.LightVibrant=h(n,t,l,r.targetLightLuma,r.minLightLuma,1,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.DarkVibrant=h(n,t,l,r.targetDarkLuma,0,r.maxDarkLuma,r.targetVibrantSaturation,r.minVibrantSaturation,1,r),n.Muted=h(n,t,l,r.targetNormalLuma,r.minNormalLuma,r.maxNormalLuma,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n.LightMuted=h(n,t,l,r.targetLightLuma,r.minLightLuma,1,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n.DarkMuted=h(n,t,l,r.targetDarkLuma,0,r.maxDarkLuma,r.targetMutesSaturation,0,r.maxMutesSaturation,r),n);return l=e,(r=t).Vibrant||r.DarkVibrant||r.LightVibrant||(!r.DarkVibrant&&r.DarkMuted&&(a=(u=r.DarkMuted.hsl)[0],s=u[1],u=u[2],u=l.targetDarkLuma,r.DarkVibrant=new c.Swatch(d.hslToRgb(a,s,u),0)),!r.LightVibrant&&r.LightMuted&&(a=(i=r.LightMuted.hsl)[0],s=i[1],u=i[2],u=l.targetDarkLuma,r.DarkVibrant=new c.Swatch(d.hslToRgb(a,s,u),0))),!r.Vibrant&&r.DarkVibrant?(a=(i=r.DarkVibrant.hsl)[0],s=i[1],u=i[2],u=l.targetNormalLuma,r.Vibrant=new c.Swatch(d.hslToRgb(a,s,u),0)):!r.Vibrant&&r.LightVibrant&&(a=(i=r.LightVibrant.hsl)[0],s=i[1],u=i[2],u=l.targetNormalLuma,r.Vibrant=new c.Swatch(d.hslToRgb(a,s,u),0)),!r.DarkVibrant&&r.Vibrant&&(a=(i=r.Vibrant.hsl)[0],s=i[1],u=i[2],u=l.targetDarkLuma,r.DarkVibrant=new c.Swatch(d.hslToRgb(a,s,u),0)),!r.LightVibrant&&r.Vibrant&&(a=(i=r.Vibrant.hsl)[0],s=i[1],u=i[2],u=l.targetLightLuma,r.LightVibrant=new c.Swatch(d.hslToRgb(a,s,u),0)),!r.Muted&&r.Vibrant&&(a=(i=r.Vibrant.hsl)[0],s=i[1],u=i[2],u=l.targetMutesSaturation,r.Muted=new c.Swatch(d.hslToRgb(a,s,u),0)),!r.DarkMuted&&r.DarkVibrant&&(a=(i=r.DarkVibrant.hsl)[0],s=i[1],u=i[2],u=l.targetMutesSaturation,r.DarkMuted=new c.Swatch(d.hslToRgb(a,s,u),0)),!r.LightMuted&&r.LightVibrant&&(a=(i=r.LightVibrant.hsl)[0],s=i[1],u=i[2],u=l.targetMutesSaturation,r.LightMuted=new c.Swatch(d.hslToRgb(a,s,u),0)),t}},function(t,e,o){"use strict";var r=this&&this.__awaiter||function(t,a,s,u){return new(s=s||Promise)(function(o,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?o(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,r)}i((u=u.apply(t,a||[])).next())})},u=this&&this.__generator||function(n,r){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(o){return function(t){var e=[o,t];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))u.label=e[1];else if(6===e[0]&&u.label<s[1])u.label=s[1],s=e;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(e)}}e=r.call(n,u)}catch(t){e=[6,t],a=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},n=(Object.defineProperty(e,"__esModule",{value:!0}),e.BasicPipeline=e.Stage=void 0,o(2)),i=(a.prototype.names=function(){return Object.keys(this._map)},a.prototype.has=function(t){return!!this._map[t]},a.prototype.get=function(t){return this._map[t]},a.prototype.register=function(t,e){return this._map[t]=e,this.pipeline},a);function a(t){this.pipeline=t,this._map={}}function s(){this.filter=new i(this),this.quantizer=new i(this),this.generator=new i(this)}e.Stage=i,s.prototype._buildProcessTasks=function(t){var e=this,o=t.filters,n=t.quantizer,t=t.generators;return 1===t.length&&"*"===t[0]&&(t=this.generator.names()),{filters:o.map(function(t){return r(e.filter,t)}),quantizer:r(this.quantizer,n),generators:t.map(function(t){return r(e.generator,t)})};function r(t,e){var o,n;return"string"==typeof e?o=e:(o=e.name,n=e.options),{name:o,fn:t.get(o),options:n}}},s.prototype.process=function(a,s){return r(this,void 0,void 0,function(){var e,o,n,r,i;return u(this,function(t){switch(t.label){case 0:return o=this._buildProcessTasks(s),n=o.filters,e=o.quantizer,o=o.generators,[4,this._filterColors(n,a)];case 1:return n=t.sent(),[4,this._generateColors(e,n)];case 2:return r=t.sent(),[4,this._generatePalettes(o,r)];case 3:return i=t.sent(),[2,{colors:r,palettes:i}]}})})},s.prototype._filterColors=function(t,e){return Promise.resolve(n.applyFilters(e,t.map(function(t){return t.fn})))},s.prototype._generateColors=function(t,e){return Promise.resolve(t.fn(e.data,t.options))},s.prototype._generatePalettes=function(n,o){return r(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(t){var e=t.fn,t=t.options;return Promise.resolve(e(o,t))}))];case 1:return e=t.sent(),[2,Promise.resolve(e.reduce(function(t,e,o){return t[n[o].name]=e,t},{}))]}})})},e.BasicPipeline=s}],n={},r.m=o,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=10);function r(t){var e;return(n[t]||(e=n[t]={i:t,l:!1,exports:{}},o[t].call(e.exports,e,e.exports,r),e.l=!0,e)).exports}var o,n}),function(i){i.fn.downupPopup=function(t){const o=i(this);var n;function r(){1==o.attr("bg")&&i("#dark-back").hide(),o.addClass("no-act"),i("body").css("overflow","inherit"),i(document).off("keyup"),(n?.urlHash||o.attr("hash"))&&(history.replaceState(null,null," "),i(window).off("popstate"))}"object"!=typeof t&&t||(n=i.extend({duration:"300",animation:"ease",background:!0,radiusLeft:"10px",radiusRight:"10px",distance:20,headerText:"",width:"100%",minContentHeight:null,contentScroll:!1,urlHash:null},t)),o.hasClass("downupPopup")||(o.addClass("downupPopup").addClass("no-act").prepend('<div class="downupPopup-header"><span></span><svg class="downupPopup-kapat" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div>'),o.find(".downupPopup-kapat").click(function(){r()}),i(document).on("click","#dark-back",function(){i(this).hide(),r()}),"object"!=typeof t&&t)||1==n.background&&(i("#dark-back")[0]||i("body").append("<div id='dark-back'></div>"),o.attr("bg",1)),"object"!=typeof t&&t||setTimeout(()=>{o.css("transition","transform "+n.duration+"ms "+n.animation),o.css("border-radius",n.radiusLeft+" "+n.radiusRight+" 0px 0px"),o.css("width",""+n.width);var t=o.find(".downupPopup-header"),t=(t.find("span").text(n.headerText),t.css("height","6vh"),n.minContentHeight&&(t=Math.round(100*(window.innerHeight-n.minContentHeight)/window.innerHeight)-6,n.distance=Math.max(0,t)),o.attr("distance",n.distance),o.find(".downupPopup-content")),e=100-n.distance-6;t.css("height",e+"vh"),n.contentScroll&&t.css("overflow-y","scroll"),i(document).on("keyup",function(t){"Escape"==t.key&&r()}),n.urlHash&&(window.location.hash=n.urlHash,i(window).on("popstate",function(){r()})),o.attr("hash",n.urlHash)},100),"object"!=typeof t&&("open"===t&&(i(".downupPopup").addClass("no-act"),1==o.attr("bg")&&i("#dark-back").show(),o.removeClass("no-act").css("transform","translate(-50%, "+o.attr("distance")+"vh)"),i("body").css("overflow","hidden"),o.attr("hash"))&&(window.location.hash=o.attr("hash"),i(window).on("popstate",function(){r()})),"close"===t)&&r()}}(jQuery);