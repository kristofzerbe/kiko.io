
<script type="module" src="/js/dist/activity-graph.min.js"></script>
<%- css('css/dist/charts.min.css') %>

<% if (page.photograph){ %>
  <%- partial('_partial/photograph') %>
<% } %>

<%- partial('_partial/nav-index-stats', { currentClass: "" }) %>

<h1 class="page-title" data-pagefind-meta="title" data-pagefind-meta="type:Page">
  <%= page.title %>
</h1>

<div class="page-content">
  <%- page.content %>
  
  <hr class="divider" />

  <section class="stats" style="z-index: 3">
    <h2>Posts</h2>
    <b><%= page.data.times.periodBetweenFirstLastPost.years %></b><span>years</span>,
    <b><%= page.data.times.periodBetweenFirstLastPost.months %></b><span>months</span> and 
    <b><%= page.data.times.periodBetweenFirstLastPost.days %></b><span>days</span> or a total of 
    <b><%= page.data.times.daysBetweenFirstLastPost %></b><span>days</span> have passed between my 
    <a href="/<%= page.data.times.firstPost.path %>" title="<%= page.data.times.firstPost.title %>">first post</a> on 
    <i><%= page.data.times.firstPost.dateFormat %></i> and the 
    <a href="/<%= page.data.times.lastPost.path %>" title="<%= page.data.times.lastPost.title %>">last one</a> 
    <b><%= page.data.times.daysSinceLastPost %></b><span>days ago</span>.
    <br><br>
    During this period I've written 
    <b><%= page.data.counts.articles %></b><span>articles</span> in 
    <b><%= page.data.counts.categories %></b><span>categories</span> with 
    <b><%= page.data.counts.tags %></b><span>tags</span> and published 
    <b><%= page.data.counts.notes %></b><span>notes</span>.
    <br><br>
    <b><%= page.data.counts.series.articles %></b><span>articles</span> belong to one of a total of 
    <b><%= page.data.counts.series.count %></b><span>series</span> and 
    <b><%= page.data.counts.projects.articles %></b><span>articles</span> to one of the   
    <b><%= page.data.counts.projects.count %></b><span>projects</span> I maintain.
  </section>

  <div class="charts-wrapper" style="z-index: 2">
    <table id="years-chart" class="charts-css bar show-labels data-spacing-5 multiple stacked">
      <thead>
        <tr>
          <th scope="col">Year</th>
          <th scope="col" class="articles">Articles</th>
          <th scope="col" class="notes">Notes</th>
        </tr>
      </thead>
      <tbody>
      <% Object.entries(page.data.lists.postsYearCount).reverse().forEach(([key, value]) => { %>
        <tr>
          <th scope="row"><%= key %></th>
          <% if (value.articles > 0) { %>
          <td class="articles" style="--size: calc(<%= value.articles %>/100);">
            <span class="data"><%= value.articles %></span>
          </td>
          <% } %>
          <% if (value.notes > 0) { %>
          <td class="notes" style="--size: calc(<%= value.notes %>/100);">
            <span class="data"><%= value.notes %></span>
          </td>
          <% } %>
        </tr>
      <% }); %>
      </tbody>
    </table>
    <ul class="charts-css legend legend-inline legend-square">
      <li class="articles">Articles</li>
      <li class="notes">Notes</li>
    </ul>
  </div>

  <div class="activity-graph-wrapper" style="z-index: 1">
    <activity-graph
      range-start="<%= page.data.times.firstPost.dateISO %>"
      range-end="<%= page.data.times.lastPost.dateISO %>"
      activity-data="<%= page.data.lists.postsAll.join(",") %>"
      activity-levels="0,1,2,4"
      first-day-of-week="1"
      lang="en"
      i18n='{"activities": "posts", "less": "less", "more": "more"}'>
    </activity-graph>
  </div>

  <section class="stats">
    <h2>Photos</h2>
    In between, I published 
    <b><%= page.data.counts.boxes %></b><span>photo boxes</span> and 
    <b><%= page.data.counts.photos.total %></b><span>photos in total</span>.<br> 
    For all my pages, I <span>used</span> <b><%= page.data.counts.photos.used.total %></b> 
    of them as individual header photos and have set aside 
    <b><%= page.data.counts.photos.unused.pool %></b> as <span>pool</span> photos for future articles. 
    <b><%= page.data.counts.photos.unused.reserve %></b> more are already 
    <span>reserved</span> for specific new pages. The remaining 
    <b><%= page.data.counts.photos.unused.shed %></b> photos are stored in the 
    <span>shed</span> for publication via syndication.
  </section>

  <section class="charts-wrapper">
    <h2>Syndications</h2>
    <table id="syndication-chart" class="charts-css bar show-labels data-spacing-5">
      <thead>
        <tr>
          <th scope="col">Host</th>
          <th scope="col">Syndications</th>
        </tr>
      </thead>
      <tbody>
      <% let syn = Object.entries(page.data.lists.syndicationHostCount).sort(([,va],[,vb]) => vb-va); %>
      <% syn.forEach(([key, value]) => { %>
        <tr data-key="<%= key %>">
          <th scope="row"><small><%= key %></small></th>
          <td style="--size: calc(<%= value %>/<%= syn[0][1] + 50 %>);">
            <span class="data"><%= value %></span>
          </td>
        </tr>
      <% }); %>
      </tbody>
    </table>
  </section>

  <section class="stats">
    <h2>Other</h2>
    Furthermore I collected 
    <b><%= page.data.counts.tinytools %></b><span>Tiny Tools</span>, added 
    <b><%= page.data.counts.blogroll %></b><span>authors</span> to my <span>blogroll</span> and went to 
    <b><%= page.data.counts.concerts %></b><span>concerts</span>.
  </section>

</div>

<script>
    //
</script>