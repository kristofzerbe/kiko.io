<!DOCTYPE html>
<html lang="en">
<head><link rel=manifest href=/site.webmanifest>
  <meta charset="utf-8">
  
  <!-- POST -->

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>kiko.io | Pimping the Permalink</title>
  <meta name="title" content="kiko.io | Pimping the Permalink">
  <meta name="description" content="kiko.io&#39;s Post &#39;Pimping the Permalink&#39;">
  <!-- Schema.org for Google -->
  <meta itemprop="name" content="kiko.io | Pimping the Permalink">
  <meta itemprop="description" content="kiko.io&#39;s Post &#39;Pimping the Permalink&#39;">
  <meta itemprop="image" content="https://kiko.io/photos/mobile/18-09 Kroatien-0245.jpg">
  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://kiko.io/categories/JavaScript/Pimping-the-Permalink/index.html">
  <meta property="og:title" content="kiko.io | Pimping the Permalink">
  <meta property="og:description" content="kiko.io&#39;s Post &#39;Pimping the Permalink&#39;">
  <meta property="og:image" content="https://kiko.io/photos/mobile/18-09 Kroatien-0245.jpg">
  <meta property="og:locale" content="en_GB">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://kiko.io/categories/JavaScript/Pimping-the-Permalink/index.html">
  <meta property="twitter:title" content="kiko.io | Pimping the Permalink">
  <meta property="twitter:description" content="kiko.io&#39;s Post &#39;Pimping the Permalink&#39;">
  <meta property="twitter:image" content="https://kiko.io/photos/mobile/18-09 Kroatien-0245.jpg">

  <link rel="canonical" href="https://kiko.io/categories/JavaScript/Pimping-the-Permalink/index.html">

  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
  <meta name="theme-color" content="#0059B8">

  

  <link rel="preload" href="/css/fonts/cookie/cookie-v12-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-italic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-semibold.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/opensans/opensans-semibolditalic.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-Regular.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-It.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-Bold.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/sourcecodepro/WOFF2/TTF/SourceCodePro-BoldIt.ttf.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/fontawesome/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/css/fonts/fontawesome/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>

  
<link rel="stylesheet" href="/css/dist/bundle.min.css">

  
<link rel="stylesheet" href="/css/dist/image-compare-viewer.min.css">

  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/tools.js"></script>

  
<script src="/js/dist/image-compare-viewer.min.js"></script>


<meta name="generator" content="Hexo 5.4.0"></head>

<body id="body">  
  <div id="container" class="container">
    <div class="inner-container">
      <div id="wrap">
        <header id="header">
  <a href="#" id="header-photo-expand" class="fullsizable"></a>
  <a href="#" id="header-photo-link"></a>
  <div id="banner">
    <nav id="header-nav" role="navigation">
      <ul class="menu">
        
          <li class="menu-item" id="nav-home-link" >
            <a class="nav-icon sub-nav-link"
               href="/">
                <span>Home</span>
              </a>
          </li>
        
          <li class="menu-item" id="nav-archives-link" >
            <a class="nav-icon sub-nav-link"
               href="/archives">
                <span>Archives</span>
              </a>
          </li>
        
          <li class="menu-item" id="nav-series-link" >
            <a class="nav-icon sub-nav-link"
               href="/series">
                <span>series</span>
              </a>
          </li>
        
          <li class="menu-item" id="nav-tiny-tools-link" >
            <a class="nav-icon sub-nav-link"
               href="/collections/tiny-tools">
                <span>tiny-tools</span>
              </a>
          </li>
        
          <li class="menu-item" id="nav-rss-link" >
            <a class="nav-icon sub-nav-link"
               href="/atom.xml">
                <span>RSS Feed</span>
              </a>
          </li>
        
      </ul>
    </nav>
  </div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
        <a href="/" id="logo">
          <h1 id="title-wrap">
            <span style="opacity:0.2;">kiko.io</span>
          </h1>
        </a>
      
        <h2 id="subtitle">
          Memorable Tech Stuff
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      
      

      <nav id="sub-nav">
        
        <a id="sub-nav-search" class="sub-nav-icon" title="Search"></a>
        <div id="sub-nav-theme">          
          <input type="checkbox" id="theme-switch">
          <label for="theme-switch"></label>
        </div>
      </nav>

      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://kiko.io"></form>
      </div>
    </div>
  </div>
</header>
<script>
  if (location.pathname === "/") {
    document.getElementById("nav-home-link").style.display = 'none';
  }
</script>
        <div id="content" class="outer">
          <main>
<style>
  #banner {
    background-size: cover;
  }
  @media screen and (max-width: 479px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/mobile/18-09 Kroatien-0245.jpg"); }
  }
  @media screen and (min-width: 480px) and (max-width: 767px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/tablet/18-09 Kroatien-0245.jpg"); }
  }
  @media screen and (min-width: 768px) {
    #banner { background-image: linear-gradient(to bottom, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0) 75%), url("/photos/normal/18-09 Kroatien-0245.jpg"); }    
  }
</style>
<script>
  var body = document.getElementById("body");
  body.classList.add("article-view");
</script>
<script>
  var header = document.getElementById("header");
  header.classList.add("photograph");
  var photoExpand = document.getElementById("header-photo-expand");
  photoExpand.href = "/photos/normal/18-09 Kroatien-0245.jpg";
  var photoLink = document.getElementById("header-photo-link");
  photoLink.href = "https://500px.com/photo/1005494226/Untitled-by-Kristof-Zerbe";
  photoLink.innerHTML = "see <strong>Untitled</strong> at 500px";
</script>

  
<article id="post-Pimping-the-Permalink" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/categories/JavaScript/Pimping-the-Permalink/" class="article-date">
  
    <time class="published" datetime="2020-09-20T14:30:37.000Z" itemprop="datePublished">20 Sep 2020</time>
  
</a>
    
  <div class="article-category category-javascript">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a> 
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        


    <p class="article-series" itemprop="name">
        A New Blog, Part 10
    </p>

        
  
    <h1 class="article-title" itemprop="name">
      Pimping the Permalink
    </h1>
  

        
    <h2 class="article-subtitle" itemprop="name">
        How to copy and share the permalink programatically
    </h2>

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Until now I did not show the permalink under my posts in this blog, but in the past I had sometimes the need to pass one of the links and it was not very user-friendly, on desktop as well as on mobile. Not the One-Click experience I prefer.</p>
<p>My goal was to show the permalink and, even more important, provide a simple way to copy and to share. JavaScript to the rescue…</p>
<span id="more"></span>

<h2 id="Display"><a href="#Display" class="headerlink" title="Display"></a>Display</h2><p>As I run my blog with <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>, I deal with <code>EJS</code> files. To show the permalink in my <code>article.ejs</code>, was quite simple. First step was to create a new partial file named <code>permalink.ejs</code>, to be called every time when the complete article has to be rendered:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (!index)&#123; %&gt;</span><br><span class="line">  &lt;%- partial(<span class="string">&#x27;post/permalink&#x27;</span>, &#123; <span class="attr">class_name</span>: <span class="string">&#x27;article-permalink&#x27;</span> &#125;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<p>The partial file looked like this in this step:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&lt;%= class_name %&gt;&quot;</span>&quot;&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;article-permalink&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- post.permalink %&gt;&quot;</span>&gt;</span>&lt;%- post.permalink %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Copy"><a href="#Copy" class="headerlink" title="Copy"></a>Copy</h2><p>As I read a little bit about the possibilities to copy text into the clipboard via JavaScript on <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard">MDN</a>, it became obvious that a link is not the best solution, because using the <code>exeCommand</code> needs to have something selected and this is difficult on anchors. Then … do it with an input:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&lt;%= class_name %&gt;&quot;</span>&quot;&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;article-permalink&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&lt;%- post.permalink %&gt;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;action-copy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;article-action&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:copyPermalink();&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> copyText = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#article-permalink&quot;</span>);</span></span><br><span class="line">  </span><br><span class="line"><span class="javascript">  <span class="comment">//Disable Input by default</span></span></span><br><span class="line"><span class="javascript">  copyText.disabled = <span class="literal">true</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">copyPermalink</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//Enable Input</span></span></span><br><span class="line"><span class="javascript">    copyText.disabled = <span class="literal">false</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">//Select permalink text</span></span></span><br><span class="line">    copyText.select();</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">//Copy to clipboard</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.execCommand(<span class="string">&quot;copy&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">//Remove selection again</span></span></span><br><span class="line">    copyText.blur();</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">//Disable Input again</span></span></span><br><span class="line"><span class="javascript">    copyText.disabled = <span class="literal">true</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Nice, but a user feedback, that the text has been copied to the clipboard, was advisable, because nothing is more annoying, when you click somewhere and nothing seems to happen. As I hate default browser confirmations and other distracting messaging methods, I wanted to use the input itself, by fading out the link text, replace it with a message and fade in the text again:</p>
<p><img src="/categories/JavaScript/Pimping-the-Permalink/copy-animation.gif" alt="Copy Animation"></p>
<p>I extended my <code>animation.styl</code> (Hexo works with <a target="_blank" rel="noopener" href="https://stylus-lang.com/">Stylus</a>) with two keyframe animations … one for fading in, one for fading out…</p>
<figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> fadeIn &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>:<span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>:<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.fade-<span class="keyword">in</span>-<span class="number">500</span></span><br><span class="line">  <span class="attribute">animation</span>: fadeIn ease <span class="number">0.5s</span>;</span><br><span class="line">.fade-<span class="keyword">in</span>-<span class="number">1000</span></span><br><span class="line">  <span class="attribute">animation</span>: fadeIn ease <span class="number">1s</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> fadeOut &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>:<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>:<span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.fade-out-<span class="number">500</span></span><br><span class="line">  <span class="attribute">animation</span>: fadeOut ease <span class="number">0.5s</span>;</span><br><span class="line">.fade-out-<span class="number">1000</span></span><br><span class="line">  <span class="attribute">animation</span>: fadeOut ease <span class="number">1s</span>;</span><br></pre></td></tr></table></figure>

<p>… and wrote a setTimeout cascade to achive the effect:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&lt;%= class_name %&gt;&quot;</span>&quot;&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;article-permalink&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&lt;%- post.permalink %&gt;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;article-action action-copy&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:copyPermalink();&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> copyText = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#article-permalink&quot;</span>);</span></span><br><span class="line"><span class="javascript">  copyText.disabled = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">copyPermalink</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      copyText.disabled = <span class="literal">false</span>;</span></span><br><span class="line">      copyText.select();</span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.execCommand(<span class="string">&quot;copy&quot;</span>);</span></span><br><span class="line">      copyText.blur();</span><br><span class="line"><span class="javascript">      copyText.disabled = <span class="literal">true</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">//Store original text</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> permalink = copyText.value;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">//Start fading out</span></span></span><br><span class="line"><span class="javascript">    copyText.classList.add(<span class="string">&quot;fade-out-500&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">//Wait until animation is done</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">//Set message, remove fadout class and add start fading in</span></span></span><br><span class="line"><span class="javascript">        copyText.value = <span class="string">&quot;copied to clipboard&quot;</span>;</span></span><br><span class="line"><span class="javascript">        copyText.classList.remove(<span class="string">&quot;fade-out-500&quot;</span>);</span></span><br><span class="line"><span class="javascript">        copyText.classList.add(<span class="string">&quot;fade-in-1000&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">//Wait 2 seconds to show the message</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">//Start to fade out message</span></span></span><br><span class="line"><span class="javascript">            copyText.classList.add(<span class="string">&quot;fade-out-500&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">//Wait until animation is done</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">//Set original text again and remove fadout class</span></span></span><br><span class="line">                copyText.value = permalink;</span><br><span class="line"><span class="javascript">                copyText.classList.remove(<span class="string">&quot;fade-out-500&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">//Wait until animation is done</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="comment">//Remove fadeout class</span></span></span><br><span class="line"><span class="javascript">                    copyText.classList.remove(<span class="string">&quot;fade-in-1000&quot;</span>);</span></span><br><span class="line">                &#125;, 500);</span><br><span class="line">            &#125;, 500);</span><br><span class="line">        &#125;, 2000);</span><br><span class="line">    &#125;, 500);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Share"><a href="#Share" class="headerlink" title="Share"></a>Share</h2><p>The second permalink feature was a little bit trickier, because I didn’t want to use one of the sharing libraries out there, whose business model is based on my readers data (always keep conservative on implementing third party stuff, because you never know what they are doing with the data). But a couple of months ago I read about a new native browser API for WebApps on the rise: <strong>Web Share API</strong>.</p>
<p>Since 2019 <a target="_blank" rel="noopener" href="https://www.w3.org/">W3C</a> is working on this API, <em>for sharing text, links and other content to an arbitrary destination of the user’s choice</em>. On 27 August 2020 the published a <a target="_blank" rel="noopener" href="https://www.w3.org/TR/web-share/">Working Draft</a> and on 16 September 2020 the latest <a target="_blank" rel="noopener" href="https://w3c.github.io/web-share/">Editors Draft</a>.</p>
<p><img src="/categories/JavaScript/Pimping-the-Permalink/caniuse-web-share.png" alt="Can I Use - Web Share, state today"></p>
<p>Brand new stuff. The browser support is not the best yet, but it will be getting better in the near feature, especially as Edge Chrome is one of the early adopters.</p>
<p><img src="/categories/JavaScript/Pimping-the-Permalink/web-share-edge-chrome.png" alt="Web Share in Edge Chrome"></p>
<p><a target="_blank" rel="noopener" href="https://web.dev/web-share/">web.dev</a> lists important requirements on using this new feature in JavaScript:</p>
<ul>
<li>It can only be used on a site that supports HTTPS</li>
<li>It must be invoked in response to a user action such as a click</li>
</ul>
<p>But it can share URL’s, text and even files! </p>
<p>A raw implementation can be:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (navigator.share === <span class="literal">undefined</span>) &#123;</span><br><span class="line">  navigator.share(&#123;</span><br><span class="line">    title: <span class="string">&#x27;My Post&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;https://my-domain.com/my-url&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;Successful share&#x27;</span>))</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;Error sharing&#x27;</span>, error));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// fallback</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>I refrain to implement a fallback, rather I would like to show the appropriate button only to those users, whose browser supports it:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&lt;%= class_name %&gt;&quot;</span>&quot;&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;article-permalink&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&lt;%- post.permalink %&gt;&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;&lt;%= post._id %&gt;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;action-copy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;article-action&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:copyPermalink();&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">&quot;action-share&quot;</span> <span class="attr">class</span>=<span class="string">&quot;article-action&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:sharePermalink();&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">copyPermalink</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line">      -- SEE ABOVE</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (navigator.share === <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> shareLink = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#action-share&quot;</span>);</span></span><br><span class="line"><span class="javascript">        shareLink.style.display = <span class="string">&quot;none&quot;</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">sharePermalink</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line">        navigator.share(&#123;</span><br><span class="line"><span class="javascript">            title: <span class="string">&quot;&lt;%- post.title %&gt;&quot;</span>,</span></span><br><span class="line"><span class="javascript">            url: <span class="string">&quot;&lt;%- post.permalink %&gt;&quot;</span>,</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


        <h2>More Info</h2>
        <ul class="moreinfo-list">
            <li>w3c.github.io: <a target="_blank" rel="noopener" href="https://w3c.github.io/web-share/demos/share-files.html">W3C Web Share Test</a></li><li>heise Developer: <a target="_blank" rel="noopener" href="https://www.heise.de/developer/artikel/Features-von-uebermorgen-Die-Web-Share-API-und-die-Web-Share-Target-API-3506197.html">Features von übermorgen: Die Web Share API und die Web Share Target API (German)</a></li><li>CSS-Tricks: <a target="_blank" rel="noopener" href="https://css-tricks.com/how-to-use-the-web-share-api/">How to Use the Web Share API</a></li>
        </ul>
    

      
    </div>
    <footer class="article-footer">      
      
  <div class="article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Share/" rel="tag">Share</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stylus/" rel="tag">Stylus</a></li></ul>  
  </div>

      
        <div class="article-permalink"">
    <input id="article-permalink" value="https://kiko.io/categories/JavaScript/Pimping-the-Permalink/" data-id="cknt598xn003fr0l984sw1kzp" />
    <a id="action-copy" class="article-action" href="javascript:copyPermalink();"></a>
    <a id="action-share" class="article-action" href="javascript:sharePermalink();"></a>
</div>
<script>
    var copyText = document.querySelector("#article-permalink");
    copyText.disabled = true;
    function copyPermalink() {
        copyText.disabled = false;
        copyText.select();
        document.execCommand("copy");
        copyText.blur();
        copyText.disabled = true;

        var permalink = copyText.value;
        copyText.classList.add("fade-out-500");
        setTimeout(function(){
            copyText.value = "copied to clipboard";
            copyText.classList.remove("fade-out-500");
            copyText.classList.add("fade-in-1000");
            setTimeout(function() {
                copyText.classList.add("fade-out-500");
                setTimeout(function() {
                    copyText.value = permalink;
                    copyText.classList.remove("fade-out-500");
                    setTimeout(function() {
                        copyText.classList.remove("fade-in-1000");
                    }, 500);
                }, 500);
            }, 2000);
        }, 500);
    }

    if (navigator.share === undefined) {
        var shareLink = document.querySelector("#action-share");
        shareLink.style.display = "none";
    } 
    
    function sharePermalink() {
        navigator.share({
            title: "Pimping the Permalink",
            url: "https://kiko.io/categories/JavaScript/Pimping-the-Permalink/",
        })
    }
</script>

      
    </footer>
  </div>
  
    <div class="article-comments">
  <div id="comment-placeholder"></div>
  <script>
    window.addEventListener('load', function () {
      insertUtterancesCommentBlock();
    })    
  </script>
</div>
    
  <div class="article-related">
    <h2>Related</h2>
    <div class="archives">
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/categories/UI-Design/Horizontal-navigation-menu-above-an-image/">
        <img class="archive-article-photo" src="/photos/tablet/19-07 Schottland-0495.jpg" alt="Untitled" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/categories/UI-Design/Horizontal-navigation-menu-above-an-image/" class="archive-article-date">
  
    <time class="published" datetime="2020-07-20T13:55:47.000Z" itemprop="datePublished">20 Jul 2020</time>
  
</a>
      
  <div class="archive-article-category category-ui-design">
    <a class="article-category-link" href="/categories/UI-Design/">UI-Design</a> 
  </div>

      


    <p class="archive-article-series" itemprop="name">
        A New Blog, Part 9
    </p>

      
  
    <h1 itemprop="name">
      <a class="archive-article-title" href="/categories/UI-Design/Horizontal-navigation-menu-above-an-image/">Horizontal navigation menu above an image</a>
    </h1>
  

      
    <h2 class="archive-article-subtitle" itemprop="name">
        How to deal with coverage, readability and scrollbars
    </h2>
              
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stylus/" rel="tag">Stylus</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/categories/Tools/A-New-Blog-Customizing-Hexo/">
        <img class="archive-article-photo" src="/photos/tablet/19-07 Schottland-0198.jpg" alt="Thistle Fence" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/categories/Tools/A-New-Blog-Customizing-Hexo/" class="archive-article-date">
  
    <time class="published" datetime="2019-09-25T10:00:00.000Z" itemprop="datePublished">25 Sep 2019</time>
  
</a>
      
  <div class="archive-article-category category-tools">
    <a class="article-category-link" href="/categories/Tools/">Tools</a> 
  </div>

      


    <p class="archive-article-series" itemprop="name">
        A New Blog, Part 2
    </p>

      
  
    <h1 itemprop="name">
      <a class="archive-article-title" href="/categories/Tools/A-New-Blog-Customizing-Hexo/">A New Blog: Customizing Hexo</a>
    </h1>
  

      
    <h2 class="archive-article-subtitle" itemprop="name">
        Part Two of having fun with Hexo and GitHub Pages
    </h2>
              
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blogging/" rel="tag">Blogging</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VS-Code/" rel="tag">VS Code</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
        
        <article class="archive-article archive-type-post">
  <div class="archive-article-inner">
    <header class="archive-article-header">
      
    <a href="/categories/Tools/A-New-Blog-VS-Code-Hexo-and-GitHub-Pages/">
        <img class="archive-article-photo" src="/photos/tablet/19-07 Schottland-0405.jpg" alt="Tiny Scots 7" />
    </a>

    </header>
    <div class="archive-article-content">
      <a href="/categories/Tools/A-New-Blog-VS-Code-Hexo-and-GitHub-Pages/" class="archive-article-date">
  
    <time class="published" datetime="2019-09-23T22:00:00.000Z" itemprop="datePublished">24 Sep 2019</time>
  
</a>
      
  <div class="archive-article-category category-tools">
    <a class="article-category-link" href="/categories/Tools/">Tools</a> 
  </div>

      


    <p class="archive-article-series" itemprop="name">
        A New Blog, Part 1
    </p>

      
  
    <h1 itemprop="name">
      <a class="archive-article-title" href="/categories/Tools/A-New-Blog-VS-Code-Hexo-and-GitHub-Pages/">A New Blog: VS Code, Hexo and GitHub Pages</a>
    </h1>
  

      
    <h2 class="archive-article-subtitle" itemprop="name">
        Part One of having fun with Hexo and GitHub Pages
    </h2>
              
    </div>
    <div class="archive-article-footer">
      
  <div class="archive-article-tags">
    <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Blogging/" rel="tag">Blogging</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GitHub/" rel="tag">GitHub</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VS-Code/" rel="tag">VS Code</a></li></ul>  
  </div>

    </div>
</div>
</article>
        
      
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/categories/Tools/404-Page-in-Hexo-for-GitHub-Pages/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          404 Page in Hexo for GitHub Pages
        
      </div>
    </a>
  
  
    <a href="/categories/Discoveries/Discoveries-2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Discoveries #2</div>
    </a>
  
</nav>

  
</article></main>
          
            <aside id="sidebar">
  
    <div class="widget-wrap">
    <div class="widget about">
        <div class="avatar">
            <a href="/about"><img src="/images/kristof-zerbe.png" alt="Kristof Zerbe"></a>
            <a href="https://github.com/kristofzerbe" target="blank" class="fab fa-github"></a>
            <a href="https://www.xing.com/profile/Kristof_Zerbe" target="blank" class="fab fa-xing"></a>
            <a href="https://www.linkedin.com/in/kristof-zerbe-91012510/" target="blank" class="fab fa-linkedin"></a>      
            <a href="https://500px.com/kikon" target="blank" class="fab fa-500px"></a>
            <a href="https://twitter.com/kristofz" target="blank" class="fab fa-twitter"></a>
        </div>
        <h3>Kristof Zerbe</h3>
        <p>
            Developer and Team Lead located in Wiesbaden, Germany
        </p>
    </div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            
              <a href="/categories/Discoveries/Discoveries-9/">Discoveries #9</a>
            
          </li>
        
          <li>
            
              <a href="/categories/Photo-Editing/Scotch-Presets-for-Lightroom/">Scotch Presets for Lightroom</a>
            
          </li>
        
          <li>
            
              <a href="/categories/Tools/Spice-Up-Windows-Terminal/"><b>Update: </b>Spice Up Windows Terminal</a>
            
          </li>
        
          <li>
            
              <a href="/categories/Misc/Adding-Screenshots-to-Trello-Cards-on-Android/">Adding Screenshots to Trello Cards on Android</a>
            
          </li>
        
          <li>
            
              <a href="/categories/UI-Design/SVG-Resources/">SVG Resources</a>
            
          </li>
        
      </ul>
    </div>
  </div>

  

  <div class="widget widget-wrap">
    <p>
      Want more? This way ... to the <a href="/archives">archives</a>
    </p>
  </div>  
</aside>
          
        </div>
        <footer id="footer">
  
  <div class="outer">
    <div class="inner">
        <div id="footer-info" class="footer-block">
          &copy; 2021 <a target="_blank" rel="noopener" href="https://github.com/kristofzerbe">Kristof Zerbe</a><br>
          Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/" target="_blank">GitHub</a>  
        </div>
        <ul id="footer-menu" class="footer-block">
          
            <li class="menu-item" id="menu-about-link">
              <a href="/about">
                  <span>About</span>
                </a>
            </li>
          
            <li class="menu-item" id="menu-rss-link">
              <a href="/atom.xml">
                  <span>RSS Feed</span>
                </a>
            </li>
          
        </ul>  
        <div id="footer-bmc" class="footer-block">
          <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" 
                  data-name="bmc-button" data-slug="kikoio" 
                  data-font="Cookie" data-text="Buy me a coffee" data-emoji="" 
                  data-color="#55555" data-outline-color="#fff" data-font-color="#fff" data-coffee-color="#fd0" ></script>
        </div>
        <ul id="footer-dots">
          <li class="dot"><a href="https://search.google.com/search-console?resource_id=sc-domain%3Akiko.io" target="_blank" title="SearchConsole"></a></li>
          <li id="hitcounter"></li>
        </ul>      
    </div>
  </div>
</footer>
      </div>
      
<script src="/js/jquery-3.6.0.min.js"></script>


<script src="/js/dist/bundle.min.js"></script>


<script src="/js/script.js"></script>


<script>
  //BACK-TO-TOP
  addBackToTop({
    diameter: 30
  })

  // AUTOTYPING
  setTimeout(function() {
    $("#title-wrap").empty();
    new AutoTyping({
      id: 'title-wrap',
      typeText: ['kiko.io'],
      textColor: '#fff',
      typeSpeed: 100,
      typeDelay: 100,
      showCursor: false,
      delete: false,
      typeInfinity: false
    }).init();
  }, 1000);

  //FULLSIZABLE
  $(function() {
    $("a.fullsizable").fullsizable();
  });

</script>

    </div>
  </div>
</body>
</html>