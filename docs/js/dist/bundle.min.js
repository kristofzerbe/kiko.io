var l="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function p(){p=function(){},n.Symbol||(n.Symbol=q)}var r=0;function q(t){return"jscomp_symbol_"+(t||"")+r++}for(var t=n,u=["Object","assign"],v=0;v<u.length-1;v++){var x=u[v];x in t||(t[x]={}),t=t[x]}var A=u[u.length-1],B=t[A],C=B||function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};function AutoTyping(t){let e,n=0,i=1,o=null,s=0,r=null;void 0!=t.textColor&&"string"==typeof t.textColor||(t.textColor="#000"),void 0!=t.typeSpeed&&"number"==typeof t.typeSpeed||(t.typeSpeed=100),void 0!=t.typeRandom&&0!=t.typeRandom&&"boolean"==typeof t.typeRandom||(t.typeRandom=!1),void 0!=t.typeDelay&&"number"==typeof t.typeDelay||(t.typeDelay=100),void 0!=t.cursor&&"string"==typeof t.cursor||(t.cursor="|"),void 0!=t.cursorColor&&"string"==typeof t.cursorColor||(t.cursorColor="#000"),void 0!=t.cursorSpeed&&"number"==typeof t.cursorSpeed||(t.cursorSpeed=300),void 0!=t.deleteSpeed&&"number"==typeof t.deleteSpeed||(t.deleteSpeed=50),void 0!=t.deleteDelay&&"number"==typeof t.deleteDelay||(t.deleteDelay=2e3),void 0!=t.callBack&&"object"==typeof t.callBack&&(o=t.callBack.method,void 0!=t.callBack.counter&&"number"==typeof t.callBack.counter&&(r=t.callBack.counter)),void 0==t.typeInfinity||1==t.typeInfinity||"boolean"!=typeof t.typeInfinity?t.typeInfinity=!0:t.typeInfinity=!1,void 0==t.delete||1==t.delete||"boolean"!=typeof t.delete?t.delete=!0:t.delete=!1,void 0==t.showCursor||1==t.showCursor||"boolean"!=typeof t.showCursor?t.showCursor=!0:t.showCursor=!1,this.typingElement=document.querySelector("#"+t.id);var l=document.createElement("span");l.className="typing-placeholder",this.helpingElement=this.typingElement.appendChild(l),this.helpingElement.innerHTML="",this.helpingElement.style.visibility="hidden";var a=document.createElement("span");if(a.className="typing-text",this.typingArea=this.typingElement.appendChild(a),t.showCursor){var c=document.createElement("span");c.className="typing-cursor",this.cursor=this.typingElement.appendChild(c),this.cursor.style.color=t.cursorColor,this.cursor.innerHTML=t.cursor,this.cursorSpeed=t.cursorSpeed}this.typeSpeed=t.typeSpeed,this.typeSpeedRandom=t.typeRandom,this.typingArea.style.color=t.textColor,this.typeText=t.typeText,this.deleteSpeed=t.deleteSpeed,this.deleteDelay=t.deleteDelay,this.typeDelay=t.typeDelay,this.typeInfinity=t.typeInfinity,this.callBack=o,this.userCounter=r,this.init=function(){let o=function(){s&&this.callBack&&(s=0,this.callBack(this.userCounter),"number"==typeof this.userCounter&&(this.userCounter>0?this.userCounter--:this.userCounter=r));t.showCursor&&(clearInterval(e),this.cursor.style.visibility="visible");let l=[],a=this.typeText[n].split("");++n==this.typeText.length&&(n=0,i=this.typeInfinity?1:0);let c=function(){let n=a.shift();l.push(n),this.typingArea.innerHTML+=n,this.typeSpeedRandom?this.typeSpeed+=Math.floor(200*Math.random()):this.typeSpeed;let i=setTimeout(c,this.typeSpeed);if(this.typeSpeed=t.typeSpeed,0==a.length){clearTimeout(i);let n=0,o=function(){0==n?(t.showCursor&&(this.cursor.style.visibility="hidden"),n=1):(t.showCursor&&(this.cursor.style.visibility="visible"),n=0)}.bind(this);t.showCursor&&(e=setInterval(o,this.cursorSpeed)),t.delete&&setTimeout(u,this.deleteDelay)}}.bind(this);c();let u=function(){t.showCursor&&(clearInterval(e),this.cursor.style.visibility="visible");l.pop();let n="";for(let t=0;t<l.length;t++)n+=l[t];this.typingArea.innerHTML=n;let r=setTimeout(u,this.deleteSpeed);if(0==l.length){clearTimeout(r);let n=0,l=function(){0==n?(t.showCursor&&(this.cursor.style.visibility="hidden"),n=1):(t.showCursor&&(this.cursor.style.visibility="visible"),n=0)}.bind(this);if(t.showCursor&&(e=setInterval(l,this.cursorSpeed)),!this.typeInfinity&&!i)return void(t.showCursor&&(clearInterval(e),this.cursor.style.visibility="hidden"));this.callBack&&s++,setTimeout(o,this.typeDelay)}}.bind(this)}.bind(this);o()}}function insertUtterancesCommentBlock(){if(isOffline)return;var t="github-light";localStorage.getItem("theme")&&"dark"===localStorage.getItem("theme")&&(t="github-dark");if(!document.getElementById("comment-theme-script")){const e=document.createElement("script");e.id="comment-theme-script",e.src="https://utteranc.es/client.js",e.setAttribute("repo","kristofzerbe/kiko.io"),e.setAttribute("issue-term","pathname"),e.setAttribute("theme",t),e.setAttribute("crossorigin","anonymous");const n=document.getElementById("comment-placeholder");n&&(n.innerHTML="",n.appendChild(e))}}C!=B&&null!=C&&l(t,A,{configurable:!0,writable:!0,value:C}),function(t){function e(i){if(n[i])return n[i].K;var o=n[i]={la:i,ga:!1,K:{}};return t[i].call(o.K,o,o.K,e),o.ga=!0,o.K}var n={};e.m=t,e.f=n,e.a=function(t,n,i){e.b(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){p(),p(),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(p(),Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})),Object.defineProperty(t,"__esModule",{value:!0})},e.l=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.da)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.a(i,o,function(e){return t[e]}.bind(null,o));return i},e.g=function(t){var n=t&&t.da?function(){return t.default}:function(){return t};return e.a(n,"a",n),n},e.b=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.h="",e(e.u=0)}([function(t,e,n){function i(t,e,n){e=void 0===e?{}:e,n=void 0===n?{}:n,this.g=Object.assign({},{ka:!0},e),this.a=t,this.b=n,this.b._gallery=this,this.b._arrowNavigation=this.g.arrowNavigation,this.h()}function o(t,e){if(e=void 0===e?{}:e,this.j=this.j.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this),this.g=this.g.bind(this),this.h=!1,this.b=t,!r(this.b))throw new TypeError("`new Luminous` requires a DOM element as its first argument.");t=document,"getRootNode"in this.b&&(t=this.b.getRootNode()),t=e.appendToNode||(t===document?document.body:t),this.a={B:e.namespace||null,v:e.sourceAttribute||"href",caption:e.caption||null,$:e.openTrigger||"click",s:e.closeTrigger||"click",Z:e.closeWithEscape||!0,Y:e.closeOnScroll||!1,w:null==e.showCloseButton||e.showCloseButton,ea:t,X:e.appendToSelector||null,ia:e.onOpen||null,D:e.onClose||null,A:e.includeImgixJSClass||!1,fa:e.injectBaseStyles||!0,i:e._gallery||null,o:e._arrowNavigation||null},e=document.body,t&&"getRootNode"in t&&(e=t.getRootNode()),this.a.fa&&(e&&e!==document||(e=document.head),e.querySelector(".lum-base-styles")||((t=document.createElement("style")).type="text/css",t.classList.add("lum-base-styles"),t.appendChild(document.createTextNode("@keyframes lum-noop{0%{zoom:1}}.lum-lightbox{position:fixed;display:none;top:0;right:0;bottom:0;left:0}.lum-lightbox.lum-open{display:block}.lum-lightbox.lum-closing,.lum-lightbox.lum-opening{animation:lum-noop 1ms}.lum-lightbox-inner{position:absolute;top:0;right:0;bottom:0;left:0;overflow:hidden}.lum-lightbox-loader{display:none}.lum-lightbox-inner img{max-width:100%;max-height:100%}.lum-lightbox-image-wrapper{vertical-align:middle;display:table-cell;text-align:center}")),e.insertBefore(t,e.firstChild))),this.m(),this.l()}function s(t){t=void 0===t?{}:t,this.g=this.g.bind(this),this.I=this.I.bind(this),this.J=this.J.bind(this),this.L=this.L.bind(this),this.u=this.u.bind(this),this.N=this.N.bind(this),this.M=this.M.bind(this);var e=t,n=void 0===e.B?null:e.B,i=void 0===e.C?c():e.C,o=void 0===e.F?c():e.F,s=void 0===e.v?c():e.v;if(this.a={B:n,C:i,F:o,v:s,caption:void 0===e.caption?null:e.caption,A:void 0!==e.A&&e.A,i:void 0===e.i?null:e.i,o:void 0===e.o?null:e.o,w:void 0===e.w||e.w,D:t.D,s:void 0===e.s?"click":e.s},!r(this.a.C))throw new TypeError("`new Lightbox` requires a DOM element passed as `parentEl`.");this.h=this.a.F,this.R=this.b("open"),this.W=this.b("opening"),this.T=this.b("closing"),this.U=this.V=!1}function r(t){return!!(h&&t instanceof ShadowRoot)||(u?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)}function l(t,e){e.forEach(function(e){t.classList.add(e)})}function a(t,e){e.forEach(function(e){t.classList.remove(e)})}function c(){throw Error("Missing parameter")}n.r(e);var u="object"==typeof HTMLElement,h="undefined"!=typeof ShadowRoot,d="undefined"!=typeof document&&"animation"in document.createElement("div").style;s.prototype.M=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault(),(t=this.a.D)&&"function"==typeof t&&t()},s.prototype.aa=function(){this.c.addEventListener(this.a.s,this.M),this.G&&this.G.addEventListener("click",this.M)},s.prototype.b=function(t){var e=["lum-"+t],n=this.a.B;return n&&e.push(n+"-"+t),e},s.prototype.ba=function(){this.c=document.createElement("div"),l(this.c,this.b("lightbox")),this.f=document.createElement("div"),l(this.f,this.b("lightbox-inner")),this.c.appendChild(this.f);var t=document.createElement("div");l(t,this.b("lightbox-loader")),this.f.appendChild(t),this.H=document.createElement("div"),l(this.H,this.b("lightbox-image-wrapper")),this.f.appendChild(this.H),l(t=document.createElement("span"),this.b("lightbox-position-helper")),this.H.appendChild(t),this.m=document.createElement("img"),l(this.m,this.b("img")),t.appendChild(this.m),this.l=document.createElement("p"),l(this.l,this.b("lightbox-caption")),t.appendChild(this.l),this.a.w&&(this.G=document.createElement("div"),l(this.G,this.b("close-button")),this.c.appendChild(this.G)),this.a.i&&this.ca(),this.a.C.appendChild(this.c),this.P(),this.O(),this.a.A&&this.m.classList.add("imgix-fluid")},s.prototype.ca=function(){this.S("previous",this.J),this.S("next",this.I)},s.prototype.S=function(t,e){var n=document.createElement("button");this[t+"Button"]=n,n.innerText=t,l(n,this.b(t+"-button")),l(n,this.b("gallery-button")),this.f.appendChild(n),n.addEventListener("click",function(t){t.stopPropagation(),e()},!1)},s.prototype.g=function(){var t=this.H.style;t.width=this.f.clientWidth+"px",t.maxWidth=this.f.clientWidth+"px",t.height=this.f.clientHeight-this.l.clientHeight+"px",t.maxHeight=this.f.clientHeight-this.l.clientHeight+"px"},s.prototype.O=function(){var t=typeof this.a.caption,e="";"string"===t?e=this.a.caption:"function"===t&&(e=this.a.caption(this.h)),this.l.innerHTML=e},s.prototype.P=function(){var t=this,e=this.h.getAttribute(this.a.v);if(!e)throw Error("No image URL was found in the "+this.a.v+" attribute of the trigger.");var n=this.b("loading");this.V||l(this.c,n),this.m.onload=function(){a(t.c,n),t.V=!0},this.m.setAttribute("src",e)},s.prototype.N=function(t){37==t.keyCode?this.J():39==t.keyCode&&this.I()},s.prototype.I=function(){this.a.i&&(this.h=this.a.i.ha(this.h),this.P(),this.O(),this.g())},s.prototype.J=function(){this.a.i&&(this.h=this.a.i.ja(this.h),this.P(),this.O(),this.g())},s.prototype.open=function(){this.U||(this.ba(),this.aa(),this.U=!0),this.h=this.a.F,this.P(),this.O(),l(this.c,this.R),this.g(),window.addEventListener("resize",this.g,!1),this.a.o&&window.addEventListener("keydown",this.N,!1),d&&(this.c.addEventListener("animationend",this.L,!1),l(this.c,this.W))},s.prototype.close=function(){window.removeEventListener("resize",this.g,!1),this.a.o&&window.removeEventListener("keydown",this.N,!1),d?(this.c.addEventListener("animationend",this.u,!1),l(this.c,this.T)):a(this.c,this.R)},s.prototype.L=function(){this.c.removeEventListener("animationend",this.L,!1),a(this.c,this.W)},s.prototype.u=function(){this.c.removeEventListener("animationend",this.u,!1),a(this.c,this.R),a(this.c,this.T)},s.prototype.j=function(){this.c&&this.a.C.removeChild(this.c)},o.prototype.open=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault(),this.f.open(),this.a.Y&&window.addEventListener("scroll",this.close,!1),(t=this.a.ia)&&"function"==typeof t&&t(),this.h=!0},o.prototype.close=function(){this.a.Y&&window.removeEventListener("scroll",this.close,!1),this.f.close();var t=this.a.D;t&&"function"==typeof t&&t(),this.h=!1},o.prototype.m=function(){var t=this.a.ea;this.a.X&&(t=document.querySelector(this.a.X)),this.f=new s({B:this.a.B,C:t,F:this.b,v:this.a.v,caption:this.a.caption,A:this.a.A,w:this.a.w,i:this.a.i,o:this.a.o,s:this.a.s,D:this.close})},o.prototype.l=function(){this.b.addEventListener(this.a.$,this.open,!1),this.a.Z&&window.addEventListener("keyup",this.g,!1)},o.prototype.u=function(){this.b.removeEventListener(this.a.$,this.open,!1),this.f.c&&this.f.c.removeEventListener(this.a.s,this.close,!1),this.a.Z&&window.removeEventListener("keyup",this.g,!1)},o.prototype.g=function(t){this.h&&27===t.keyCode&&this.close()},o.prototype.j=function(){this.u(),this.f.j()},o.prototype.open=o.prototype.open,o.prototype.close=o.prototype.close,o.prototype.destroy=o.prototype.j,i.prototype.h=function(){this.f=[];for(var t=this.a.length,e=0;e<t;e++){var n=new o(this.a[e],this.b);this.f.push(n)}},i.prototype.ha=function(t){return(t=Array.prototype.indexOf.call(this.a,t)+1)>=this.a.length?this.a[0]:this.a[t]},i.prototype.ja=function(t){return 0>(t=Array.prototype.indexOf.call(this.a,t)-1)?this.a[this.a.length-1]:this.a[t]},i.prototype.j=function(){this.f.forEach(function(t){return t.j()})},i.prototype.destroy=i.prototype.j,window.LuminousGallery=i,window.Luminous=o}]);var target=document.documentElement,observer=new MutationObserver(function(t){t.forEach(function(t){t.attributionName,insertUtterancesCommentBlock()})}),config={attributes:!0};function insertWebmentions(t){if(isOffline)return;const e=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"2-digit"}),n="wmts_"+t,i="wm_"+t,o=`https://webmention.io/api/mentions.jf2?target=${window.location.href}&per-page=100&sort-dir=up`;let s,r;function l(){const t=document.querySelector(".webmentions-placeholder");if(r.children.length>0){t.innerHTML="";let e=0;r.children.forEach(n=>{let i;switch(e+=1,n.no=e,n["wm-property"]){case"mention-of":i=function(t){let e=a(t,"mentioned"),n="";t.content&&t.content.text&&(n=`<p>${function(t,e){let n=t.split(/\s+/),i=n.slice(0,e).join(" ");n.length>e&&(i+=" ...");return i}(t.content.text,50)}</p>`);let i=`\n      <div class="wm-content p-content">\n        ${n}\n        <a class="wm-source" href="${t["wm-source"]}">${t["wm-source"]}</a>\n      </div>\n    `;return e.insertAdjacentHTML("beforeend",i),e}(n);break;case"in-reply-to":i=function(t){let e=a(t,"replied"),n=`\n      <div class="wm-content p-content">\n        <p>${t.content.html}</p>\n      </div>\n    `;return e.insertAdjacentHTML("beforeend",n),e}(n);break;case"like-of":i=a(n,"liked");break;case"repost-of":i=function(t){let e=a(t,"reposted"),n=`\n      <div class="wm-content p-content">\n        <p>... at <a href="${t["wm-source"]}">${t["wm-source"]}</a></p>\n      </div>\n    `;return e.insertAdjacentHTML("beforeend",n),e}(n);break;case"bookmark-of":i=function(t){return a(t,"bookmarked")}(n)}t.insertAdjacentElement("beforeend",i)})}}function a(t,n){let i=c(`\n      <div class="webmention wm-${n}" id="wm-${t["wm-id"]}">\n      </div>\n    `);return i.insertAdjacentElement("beforeend",function(t,n){return function(t){t.author.card_class="h_card",t.author.name_class="p-name",t.author.photo_class="u-photo",t.author.url_class="u-url",t.author.name||(t.author.name="Somebody",t.author.card_class="",t.author.name_class=""),t.author.photo||(t.author.photo="https://avatars.dicebear.com/api/identicon/"+Math.random().toString(36).substring(3)+".svg?width=44&margin=5&colors=grey&colorLevel=400",t.author.photo_class=""),t.author.url||(t.author.url="javascript:void();",t.author.url_class="")}(t),c(`\n      <div class="wm-card ${t.author.card_class}">\n        <a class="wm-photo-link ${t.author.url_class}" href="${t.author.url}">\n          <img class="wm-photo ${t.author.photo_class}" width="44" height="44"\n               src="${t.author.photo}" alt="${t.author.name}" />\n        </a>\n        <div class="wm-meta">\n          <a class="wm-name ${t.author.name_class}" href="${t.author.url}">${t.author.name}</a>\n          <span class="wm-verb">${n} on</span>\n          <time class="wm-date dt-published" datetime="${t["wm-received"]}">${e.format(Date.parse(t["wm-received"]))}</time>\n          <small>${t.no}</small>\n        </div>\n      </div>\n    `)}(t,n)),i}function c(t){let e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}localStorage.getItem(n)&&localStorage.getItem(i)&&(s=localStorage.getItem(n),r=JSON.parse(localStorage.getItem(i))),r&&s&&Math.abs(Date.now()-s)/36e5<1?l():async function(){const t=await fetch(o);r=await t.json(),localStorage.setItem(i,JSON.stringify(r)),localStorage.setItem(n,Date.now())}().then(()=>{l()})}function addBackToTop(t={}){const{backgroundColor:e="#000",cornerOffset:n=20,diameter:i=56,ease:o=C,id:s="back-to-top",innerHTML:r='<svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg>',onClickScrollTo:l=0,scrollContainer:a=document.body,scrollDuration:c=100,showWhenScrollTopIs:u=1,size:h=i,textColor:d="#fff",zIndex:p=1}=t,f=a===document.body,m=f&&document.documentElement;!function(){const t=Math.round(.43*h),i=Math.round(.29*h),o=`\n        #${s} {\n        background: ${e};\n        // border-radius: 50%;\n        bottom: ${n}px;\n        // box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .26);\n        color: ${d};\n        cursor: pointer;\n        display: block;\n        height: ${h}px;\n        opacity: 1;\n        outline: none;\n        position: fixed;\n        right: ${n}px;\n        -webkit-tap-highlight-color: transparent;\n        -webkit-touch-callout: none;\n        transition: bottom 0.2s, opacity 0.2s;\n        user-select: none;\n        width: ${h}px;\n        z-index: ${p};\n        }\n        #${s} svg {\n        display: block;\n        fill: currentColor;\n        height: ${t}px;\n        margin: ${i}px auto 0;\n        width: ${t}px;\n        }\n        #${s}.hidden {\n        bottom: -${h}px;\n        opacity: 0;\n        }\n    `,r=document.createElement("style");r.appendChild(document.createTextNode(o)),document.head.insertAdjacentElement("afterbegin",r)}();const y=function(){const t=document.createElement("div");return t.id=s,t.className="hidden",t.innerHTML=r,t.addEventListener("click",t=>{t.preventDefault(),function(){const t="function"==typeof l?l():l,{performance:e,requestAnimationFrame:n}=window;if(c<=0||void 0===e||void 0===n)return w(t);const i=e.now(),s=v(),r=s-t;n(function t(e){const l=Math.min((e-i)/c,1);w(s-Math.round(o(l)*r)),l<1&&n(t)})}()}),document.body.appendChild(t),t}();let g=!0;function b(){v()>=u?function(){if(!g)return;y.className="",g=!1}():function(){if(g)return;y.className="hidden",g=!0}()}function v(){return a.scrollTop||m&&document.documentElement.scrollTop||0}function w(t){a.scrollTop=t,m&&(document.documentElement.scrollTop=t)}function C(t){return.5*(1-Math.cos(Math.PI*t))}(f?window:a).addEventListener("scroll",b),b()}observer.observe(target,config),function(){var t,e,n,i,o,s,r,l,a,c,u,h,d,p,f,m,y,g,b,v,w,C,x,S,k,E,_;t=jQuery,s="#jquery-fullsizable",c="#fullsized_image_holder",e=t('<div id="jquery-fullsizable"><div id="fullsized_image_holder"></div></div>'),u=[],r=0,g=null,k=null,C=function(){var e;return null==(e=u[r]).ratio&&(e.ratio=(e.naturalHeight/e.naturalWidth).toFixed(2)),t(window).height()/e.ratio>t(window).width()?(t(e).width(t(window).width()),t(e).height(t(window).width()*e.ratio),t(e).css("margin-top",(t(window).height()-t(e).height())/2)):(t(e).height(t(window).height()),t(e).width(t(window).height()/e.ratio),t(e).css("margin-top",0))},h=function(t){if(27===t.keyCode&&o(),g.navigation&&(37===t.keyCode&&w(!0),39===t.keyCode))return m(!0)},w=function(t){if(null==t&&(t=!1),r>0)return S(u[r-1],-1,t)},m=function(t){if(null==t&&(t=!1),r<u.length-1)return S(u[r+1],1,t)},S=function(e,n,i){return null==n&&(n=1),null==i&&(i=!1),r=e.index,t(c).hide(),t(c).html(e),g.navigation&&(!0===i?a():x()),null!=e.loaded?(t(s).removeClass("fullsized_spinner"),C(),t(c).fadeIn("fast"),b(n)):(t(s).addClass("fullsized_spinner"),e.onload=function(){return C(),t(c).fadeIn("slow",function(){return t(s).removeClass("fullsized_spinner")}),this.loaded=!0,b(n)},e.src=e.buffer_src)},b=function(t){var e;if(1===t&&r<u.length-1)e=u[r+1];else{if(-1!==t&&r!==u.length-1||!(r>0))return;e=u[r-1]}if(e.onload=function(){return this.loaded=!0},""===e.src)return e.src=e.buffer_src},y=function(i,o){return t("body").append(e),t(window).bind("resize",C),S(i),t(s).hide().fadeIn(function(){return null!=g.detach_id&&(k=t(window).scrollTop(),t("#"+g.detach_id).css("display","none"),C()),n(),t(document).trigger("fullsizable:opened",o)})},o=function(){return null!=g.detach_id&&(t("#"+g.detach_id).css("display","block"),t(window).scrollTop(k)),t(s).fadeOut(function(){return e.remove()}),i(),t(s).removeClass("fullsized_spinner"),_(),t(window).unbind("resize",C)},d=function(){return u.length=0,t(g.selector).each(function(){var e;if((e=new Image).buffer_src=t(this).attr("href"),e.index=u.length,u.push(e),g.openOnClick)return t(this).unbind("click").click(function(t){return t.preventDefault(),g.reloadOnOpen&&d(),y(e,this)})})},v=function(){switch(g.navigation&&(0==e.find("#fullsized_go_prev").length&&(e.append('<a id="fullsized_go_prev" href="#prev"></a>'),t(document).on("click","#fullsized_go_prev",function(t){return t.preventDefault(),t.stopPropagation(),w()})),0==e.find("#fullsized_go_next").length&&(e.append('<a id="fullsized_go_next" href="#next"></a>'),t(document).on("click","#fullsized_go_next",function(t){return t.preventDefault(),t.stopPropagation(),m()}))),g.closeButton&&0==e.find("#fullsized_close").length&&(e.append('<a id="fullsized_close" href="#close"></a>'),t(document).on("click","#fullsized_close",function(t){return t.preventDefault(),t.stopPropagation(),o()})),g.fullscreenButton&&l()&&0==e.find("#fullsized_fullscreen").length&&(e.append('<a id="fullsized_fullscreen" href="#fullscreen"></a>'),t(document).on("click","#fullsized_fullscreen",function(t){return t.preventDefault(),t.stopPropagation(),E()})),g.clickBehaviour){case"close":return t(document).on("click",s,o);case"next":return t(document).on("click",s,function(){return m(!0)})}},n=function(){return g.keyBindings&&t(document).bind("keydown",h),g.navigation&&(t(document).bind("fullsizable:next",function(){return m(!0)}),t(document).bind("fullsizable:prev",function(){return w(!0)})),t(document).bind("fullsizable:close",o)},_=function(){return g.navigation&&(t(document).unbind("keydown",h),t(document).unbind("fullsizable:next"),t(document).unbind("fullsizable:prev")),t(document).unbind("fullsizable:close")},a=function(){var t;if(!0===(t=e.find("a")).is(":visible"))return t.toggle(!1),e.bind("mousemove",p)},f=null,p=function(t){if(null===f&&(f=[t.clientX,t.clientY]),Math.round(Math.sqrt(Math.pow(f[1]-t.clientY,2)+Math.pow(f[0]-t.clientX,2)))>=10)return e.unbind("mousemove",p),f=null,x()},x=function(){return t("#fullsized_close, #fullsized_fullscreen").toggle(!0),t("#fullsized_go_prev").toggle(0!==r),t("#fullsized_go_next").toggle(r!==u.length-1)},t.fn.fullsizable=function(e){return g=t.extend({selector:this.selector,detach_id:null,navigation:!0,keyBindings:!0,closeButton:!0,fullscreenButton:!0,openOnClick:!0,clickBehaviour:"close",preload:!0,reloadOnOpen:!1},e||{}),v(),g.preload&&d(),t(document).bind("fullsizable:reload",d),t(document).bind("fullsizable:open",function(e,n){var i,o,s,r;for(g.reloadOnOpen&&d(),r=[],o=0,s=u.length;o<s;o++)(i=u[o]).buffer_src===t(n).attr("href")?r.push(y(i,n)):r.push(void 0);return r}),this},l=function(){var t;return!!((t=e.get(0)).requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen)},i=function(){return E(!0)},E=function(t){var n;return(n=e.get(0)).requestFullScreen?document.fullScreen||t?document.exitFullScreen():n.requestFullScreen():n.webkitRequestFullScreen?document.webkitIsFullScreen||t?document.webkitExitFullScreen():n.webkitRequestFullScreen():n.mozRequestFullScreen?document.mozFullScreen||t?document.mozCancelFullScreen():n.mozRequestFullScreen():n.msRequestFullScreen?document.msIsFullScreen||t?document.msExitFullScreen():n.msRequestFullScreen():void 0}}.call(this);